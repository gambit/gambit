<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on September 13, 2011 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<meta name="description" content="Revised(5) Scheme">
<meta name="keywords" content="Revised(5) Scheme">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.25, maximum-scale=1.6">

<script>

function gestureStart() {
  var metas = document.getElementsByTagName('meta');
  for (var i=0; i<metas.length; i++) {
    if (metas[i].name === "viewport") {
      metas[i].content = "width=device-width, initial-scale=1.0, minimum-scale=0.25, maximum-scale=1.6";
    }
  }
}

document.addEventListener("gesturestart", gestureStart, false);

</script>

<style type="text/css">
<!--
body { -webkit-text-size-adjust:none }
a.summary-letter {text-decoration: none}
a:link {color: #0000e0}
a:visited {color: #0000e0}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-size: smaller}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.example {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>
</head>
<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000" onLoad="window.location='event:loaded'">

<a name="Top"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Top" title="Previous section in reading order"><img src="button-empty.png" border="0" alt="Back: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Contents" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Top" title="Beginning of this chapter or previous chapter"><img src="button-empty.png" border="0" alt="FastBack: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-empty.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Introduction" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>

<h1 class="settitle">Revised(5) Report on the Algorithmic Language Scheme</h1>

<br>

<center><a href="r5rs.pdf">[View PDF version]</a></center>

<blockquote><p>R<small>ICHARD</small> K<small>ELSEY</small>, W<small>ILLIAM</small> C<small>LINGER, AND</small> J<small>ONATHAN</small> R<small>EES</small> (<i>Editors</i>) 
<br>
</p><table>
<tr><td width="25%">H. A<small>BELSON</small></td><td width="25%">R. K. D<small>YBVIG</small></td><td width="25%">C. T. H<small>AYNES</small></td><td width="25%">G. J. R<small>OZAS</small></td></tr>
<tr><td width="25%">N. I. A<small>DAMS IV</small></td><td width="25%">D. P. F<small>RIEDMAN</small></td><td width="25%">E. K<small>OHLBECKER</small></td><td width="25%">G. L. S<small>TEELE</small> J<small>R</small>.</td></tr>
<tr><td width="25%">D. H. B<small>ARTLEY</small></td><td width="25%">R. H<small>ALSTEAD</small></td><td width="25%">D. O<small>XLEY</small></td><td width="25%">G. J. S<small>USSMAN</small></td></tr>
<tr><td width="25%">G. B<small>ROOKS</small></td><td width="25%">C. H<small>ANSON</small></td><td width="25%">K. M. P<small>ITMAN</small></td><td width="25%">M. W<small>AND</small></td></tr>
<tr><td width="25%"></td></tr>
</table>
</blockquote>

<p><i>Dedicated to the Memory of Robert Hieb</i> 
</p>


<a name="Summary"></a>
<h1 class="majorheading">Summary</h1>


<p>The report gives a defining description of the programming language
Scheme.  Scheme is a statically scoped and properly tail-recursive
dialect of the Lisp programming language invented by Guy Lewis
Steele Jr. and Gerald Jay Sussman.  It was designed to have an
exceptionally clear and simple semantics and few different ways to
form expressions.  A wide variety of programming paradigms, including
imperative, functional, and message passing styles, find convenient
expression in Scheme.
</p>
<p>The introduction offers a brief history of the language and of
the report.
</p>
<p>The first three chapters present the fundamental ideas of the
language and describe the notational conventions used for describing the
language and for writing programs in the language.
</p>
<p>Chapters <a href="#Expressions">Expressions</a> and <a href="#Program-structure">Program structure</a> describe
the syntax and semantics of expressions, programs, and definitions.
</p>
<p>Chapter <a href="#Standard-procedures">Standard procedures</a> describes Scheme's built-in
procedures, which include all of the language's data manipulation and
input/output primitives.
</p>
<p>Chapter <a href="#Formal-syntax-and-semantics">Formal syntax and semantics</a> provides a formal syntax for Scheme
written in extended BNF, along with a formal denotational semantics.
An example of the use of the language follows the formal syntax and
semantics.
</p>
<p>The report concludes with a list of references and an
alphabetic index.
</p>








<a name="Contents"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Top" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Introduction" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Top" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Introduction" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<h1 class="unnumbered">Contents</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction">Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                
</td></tr>
<tr><td align="left" valign="top"><a href="#Overview-of-Scheme">1. Overview of Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          
</td></tr>
<tr><td align="left" valign="top"><a href="#Lexical-conventions">2. Lexical conventions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Basic-concepts">3. Basic concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              
</td></tr>
<tr><td align="left" valign="top"><a href="#Expressions">4. Expressions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 
</td></tr>
<tr><td align="left" valign="top"><a href="#Program-structure">5. Program structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           
</td></tr>
<tr><td align="left" valign="top"><a href="#Standard-procedures">6. Standard procedures</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Formal-syntax-and-semantics">7. Formal syntax and semantics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Notes">Notes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       
</td></tr>
<tr><td align="left" valign="top"><a href="#Additional-material">Additional material</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Example">Example</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     
</td></tr>
<tr><td align="left" valign="top"><a href="#Bibliography">Bibliography</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                
</td></tr>
<tr><td align="left" valign="top"><a href="#Index">Alphabetic index of definitions of concepts, keywords, and procedures</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       
</td></tr>
</table>








   
<a name="Introduction"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Contents" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Background" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Background" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Contents" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Introduction-1"></a>
<h1 class="unnumbered">Introduction</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Background">Background</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  
</td></tr>
<tr><td align="left" valign="top"><a href="#Acknowledgements">Acknowledgements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
</table>




<p>Programming languages should be designed not by piling feature on top of
feature, but by removing the weaknesses and restrictions that make additional
features appear necessary.  Scheme demonstrates that a very small number
of rules for forming expressions, with no restrictions on how they are
composed, suffice to form a practical and efficient programming language
that is flexible enough to support most of the major programming
paradigms in use today.
</p>
<p>Scheme
was one of the first programming languages to incorporate first class
procedures as in the lambda calculus, thereby proving the usefulness of
static scope rules and block structure in a dynamically typed language.
Scheme was the first major dialect of Lisp to distinguish procedures
from lambda expressions and symbols, to use a single lexical
environment for all variables, and to evaluate the operator position
of a procedure call in the same way as an operand position.  By relying
entirely on procedure calls to express iteration, Scheme emphasized the
fact that tail-recursive procedure calls are essentially goto's that
pass arguments.  Scheme was the first widely used programming language to
embrace first class escape procedures, from which all previously known
sequential control structures can be synthesized.  A subsequent
version of Scheme introduced the concept of exact and inexact numbers,
an extension of Common Lisp's generic arithmetic.
More recently, Scheme became the first programming language to support
hygienic macros, which permit the syntax of a block-structured language
to be extended in a consistent and reliable manner.
</p>


<a name="Background"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Introduction" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Acknowledgements" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Acknowledgements" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Introduction" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Introduction" title="Up section"><img src="button-up.png" border="0" alt="Up: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Background-1"></a>
<h2 class="unnumberedsec">Background</h2>


<p>The first description of Scheme was written in
1975 [Scheme75].  A revised report [Scheme78]
 appeared in 1978, which described the evolution
of the language as its MIT implementation was upgraded to support an
innovative compiler [Rabbit].  Three distinct projects began in
1981 and 1982 to use variants of Scheme for courses at MIT, Yale, and
Indiana University [Rees82], [MITScheme], [Scheme311].  An introductory
computer science textbook using Scheme was published in
1984 [SICP].
</p>
<p>As Scheme became more widespread,
local dialects began to diverge until students and researchers
occasionally found it difficult to understand code written at other
sites.
Fifteen representatives of the major implementations of Scheme therefore
met in October 1984 to work toward a better and more widely accepted
standard for Scheme.
</p>
<p>Their report [RRRS]
was published at MIT and Indiana University in the summer of 1985.
Further revision took place in the spring of 1986 [R3RS],
and in the spring of 1988 [R4RS].
The present report reflects further revisions agreed upon in a meeting
at Xerox PARC in June 1992.
</p>




<br>
<br>
<br>

<p>We intend this report to belong to the entire Scheme community, and so
we grant permission to copy it in whole or in part without fee.  In
particular, we encourage implementors of Scheme to use this report as
a starting point for manuals and other documentation, modifying it as
necessary.
</p>



<a name="Acknowledgements"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Background" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Background" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Introduction" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Introduction" title="Up section"><img src="button-up.png" border="0" alt="Up: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Acknowledgements-1"></a>
<h2 class="unnumberedsec">Acknowledgements</h2>


<p>We would like to thank the following people for their help: Alan Bawden, Michael
Blair, George Carrette, Andy Cromarty, Pavel Curtis, Jeff Dalton, Olivier Danvy,
Ken Dickey, Bruce Duba, Marc Feeley,
Andy Freeman, Richard Gabriel, Yekta G&quot;ursel, Ken Haase, Robert
Hieb, Paul Hudak, Morry Katz, Chris Lindblad, Mark Meyer, Jim Miller, Jim Philbin,
John Ramsdell, Mike Shaff, Jonathan Shapiro, Julie Sussman,
Perry Wagle, Daniel Weise, Henry Wu, and Ozan Yigit.
We thank Carol Fessenden, Daniel
Friedman, and Christopher Haynes for permission to use text from the Scheme 311
version 4 reference manual.  We thank Texas Instruments, Inc. for permission to
use text from the <em>TI Scheme Language Reference Manual</em>[TImanual85].
We gladly acknowledge the influence of manuals for MIT Scheme[MITScheme],
T[Rees84], Scheme 84[Scheme84],Common Lisp[CLtL],
and Algol 60[Naur63].
</p>
<p>We also thank Betty Dexter for the extreme effort she put into
setting this report in TeX, and Donald Knuth for designing the program
that caused her troubles.
</p>
<p>The Artificial Intelligence Laboratory of the
Massachusetts Institute of Technology, the Computer Science
Department of Indiana University, the Computer and Information
Sciences Department of the University of Oregon, and the NEC Research
Institute supported the preparation of this report.  Support for the MIT
work was provided in part by
the Advanced Research Projects Agency of the Department of Defense under Office
of Naval Research contract N00014-80-C-0505.  Support for the Indiana
University work was provided by NSF grants NCS 83-04567 and NCS
83-03325.
</p>

   

<br>
<br>



<a name="Overview-of-Scheme"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Acknowledgements" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Acknowledgements" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Semantics" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.1 Semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Introduction" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Introduction" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Overview-of-Scheme-1"></a>
<h1 class="chapter">1. Overview of Scheme</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Semantics">1.1 Semantics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   
</td></tr>
<tr><td align="left" valign="top"><a href="#Syntax">1.2 Syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                      
</td></tr>
<tr><td align="left" valign="top"><a href="#Notation-and-terminology">1.3 Notation and terminology</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    
</td></tr>
</table>


<a name="Semantics"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Syntax" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.2 Syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Up section"><img src="button-up.png" border="0" alt="Up: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Semantics-1"></a>
<h2 class="section">1.1 Semantics</h2>



<p>This section gives an overview of Scheme's semantics.  A
detailed informal semantics is the subject of
chapters <a href="#Basic-concepts">Basic concepts</a> through <a href="#Standard-procedures">Standard procedures</a>.  For reference
purposes, section <a href="#Formal-semantics">Formal semantics</a> provides a formal
semantics of Scheme.
</p>
<p>Following Algol, Scheme is a statically scoped programming
language.  Each use of a variable is associated with a lexically
apparent binding of that variable.
</p>
<p>Scheme has latent as opposed to manifest types.  Types
are associated with values (also called objects) rather than
<a name="index-object"></a>
with variables.  (Some authors refer to languages with latent types as
weakly typed or dynamically typed languages.)  Other languages with
latent types are APL, Snobol, and other dialects of Lisp.  Languages
with manifest types (sometimes referred to as strongly typed or
statically typed languages) include Algol 60, Pascal, and C.
</p>
<p>All objects created in the course of a Scheme computation, including
procedures and continuations, have unlimited extent.
No Scheme object is ever destroyed.  The reason that
implementations of Scheme do not (usually!) run out of storage is that
they are permitted to reclaim the storage occupied by an object if
they can prove that the object cannot possibly matter to any future
computation.  Other languages in which most objects have unlimited
extent include APL and other Lisp dialects.
</p>
<p>Implementations of Scheme are required to be properly tail-recursive.
This allows the execution of an iterative computation in constant space,
even if the iterative computation is described by a syntactically
recursive procedure.  Thus with a properly tail-recursive implementation,
iteration can be expressed using the ordinary procedure-call
mechanics, so that special iteration constructs are useful only as
syntactic sugar.  See section <a href="#Proper-tail-recursion">Proper tail recursion</a>.
</p>
<p>Scheme procedures are objects in their own right.  Procedures can be
created dynamically, stored in data structures, returned as results of
procedures, and so on.  Other languages with these properties include
Common Lisp and ML. 
</p>

<p>One distinguishing feature of Scheme is that continuations, which
in most other languages only operate behind the scenes, also have
&ldquo;first-class&rdquo; status.  Continuations are useful for implementing a
wide variety of advanced control constructs, including non-local exits,
backtracking, and coroutines.  See section <a href="#Control-features">Control features</a>.
</p>
<p>Arguments to Scheme procedures are always passed by value, which
means that the actual argument expressions are evaluated before the
procedure gains control, whether the procedure needs the result of the
evaluation or not.  ML, C, and APL are three other languages that always
pass arguments by value.
This is distinct from the lazy-evaluation semantics of Haskell,
or the call-by-name semantics of Algol 60, where an argument
expression is not evaluated unless its value is needed by the
procedure.
</p>


<p>Scheme's model of arithmetic is designed to remain as independent as
possible of the particular ways in which numbers are represented within a
computer. In Scheme, every integer is a rational number, every rational is a
real, and every real is a complex number.  Thus the distinction between integer
and real arithmetic, so important to many programming languages, does not
appear in Scheme.  In its place is a distinction between exact arithmetic,
which corresponds to the mathematical ideal, and inexact arithmetic on
approximations.  As in Common Lisp, exact arithmetic is not limited to
integers.
</p>
<a name="Syntax"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Semantics" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.1 Semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Up section"><img src="button-up.png" border="0" alt="Up: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Syntax-1"></a>
<h2 class="section">1.2 Syntax</h2>


<p>Scheme, like most dialects of Lisp, employs a fully parenthesized prefix
notation for programs and (other) data; the grammar of Scheme generates a
sublanguage of the language used for data.  An important
consequence of this simple, uniform representation is the susceptibility of
Scheme programs and data to uniform treatment by other Scheme programs.
For example, the <samp>eval</samp> procedure evaluates a Scheme program expressed
as data.
</p>
<p>The <samp>read</samp> procedure performs syntactic as well as lexical decomposition of
the data it reads.  The <samp>read</samp> procedure parses its input as data
(section see section <a href="#External-representation">External representations</a>), not as program.
</p>
<p>The formal syntax of Scheme is described in section <a href="#Formal-syntax">Formal syntax</a>.
</p>

<a name="Notation-and-terminology"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Syntax" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.2 Syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive_003b-library_003b-and-optional-features" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3.1 Primitive; library; and optional features" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Up section"><img src="button-up.png" border="0" alt="Up: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Notation-and-terminology-1"></a>
<h2 class="section">1.3 Notation and terminology</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Primitive_003b-library_003b-and-optional-features">1.3.1 Primitive; library; and optional features</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Error-situations-and-unspecified-behavior">1.3.2 Error situations and unspecified behavior</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Entry-format">1.3.3 Entry format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                
</td></tr>
<tr><td align="left" valign="top"><a href="#Evaluation-examples">1.3.4 Evaluation examples</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Naming-conventions">1.3.5 Naming conventions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          
</td></tr>
</table>



<a name="Primitive_003b-library_003b-and-optional-features"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Notation-and-terminology" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Error-situations-and-unspecified-behavior" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3.2 Error situations and unspecified behavior" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Up section"><img src="button-up.png" border="0" alt="Up: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Primitive_003b-library_003b-and-optional-features-1"></a>
<h3 class="subsection">1.3.1 Primitive; library; and optional features</h3>



<p>It is required that every implementation of Scheme support all
features that are not marked as being <em>optional</em>.  Implementations are
<a name="index-optional"></a>
free to omit optional features of Scheme or to add extensions,
provided the extensions are not in conflict with the language reported
here.  In particular, implementations must support portable code by
providing a syntactic mode that preempts no lexical conventions of this
report.
</p>
<p>To aid in understanding and implementing Scheme, some features are marked
as <em>library</em>. These can be easily implemented in terms of the other,
<a name="index-library"></a>
primitive, features.  They are redundant in the strict sense of
the word, but they capture common patterns of usage, and are therefore
provided as convenient abbreviations.
</p>
<a name="Error-situations-and-unspecified-behavior"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Primitive_003b-library_003b-and-optional-features" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3.1 Primitive; library; and optional features" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Entry-format" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3.3 Entry format" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Up section"><img src="button-up.png" border="0" alt="Up: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Error-situations-and-unspecified-behavior-1"></a>
<h3 class="subsection">1.3.2 Error situations and unspecified behavior</h3>



<a name="index-error"></a>
<p>When speaking of an error situation, this report uses the phrase &ldquo;an
error is signalled&rdquo; to indicate that implementations must detect and
report the error.  If such wording does not appear in the discussion of
an error, then implementations are not required to detect or report the
error, though they are encouraged to do so.  An error situation that
implementations are not required to detect is usually referred to simply
as &ldquo;an error.&rdquo;
</p>
<p>For example, it is an error for a procedure to be passed an argument that
the procedure is not explicitly specified to handle, even though such
domain errors are seldom mentioned in this report.  Implementations may
extend a procedure's domain of definition to include such arguments.
</p>
<p>This report uses the phrase &ldquo;may report a violation of an
implementation restriction&rdquo; to indicate circumstances under which an
implementation is permitted to report that it is unable to continue
execution of a correct program because of some restriction imposed by the
implementation.  Implementation restrictions are of course discouraged,
but implementations are encouraged to report violations of implementation
restrictions.
<a name="index-implementation-restriction"></a>
</p>
<p>For example, an implementation may report a violation of an
implementation restriction if it does not have enough storage to run a
program.
</p>
<p>If the value of an expression is said to be &ldquo;unspecified,&rdquo; then
the expression must evaluate to some object without signalling an error,
but the value depends on the implementation; this report explicitly does
not say what value should be returned. 
<a name="index-unspecified"></a>
</p>





<a name="Entry-format"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Error-situations-and-unspecified-behavior" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3.2 Error situations and unspecified behavior" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Evaluation-examples" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3.4 Evaluation examples" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Up section"><img src="button-up.png" border="0" alt="Up: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Entry-format-1"></a>
<h3 class="subsection">1.3.3 Entry format</h3>


<p>Chapters <a href="#Expressions">Expressions</a> and <a href="#Standard-procedures">Standard procedures</a> are organized
into entries.  Each entry describes one language feature or a group of
related features, where a feature is either a syntactic construct or a
built-in procedure.  An entry begins with one or more header lines of the form
</p>

<table width="100%"><tr><td align="left"> <b><var>template</var></b></td><td align="right"><var>category</var></td></tr></table>


<p>for required, primitive features, or
</p>

<table width="100%"><tr><td align="left"> <b><var>template</var></b></td><td align="right"><var>qualifier</var> <var>category</var></td></tr></table>


<p>where <var>qualifier</var> is either &ldquo;library&rdquo; or &ldquo;optional&rdquo; as defined
 in section <a href="#Primitive_003b-library_003b-and-optional-features">Primitive; library; and optional features</a>.
</p>
<p>If <var>category</var> is &ldquo;syntax&rdquo;, the entry describes an expression
type, and the template gives the syntax of the expression type.
Components of expressions are designated by syntactic variables, which
are written using angle brackets, for example, <span class="roman">&lt;expression&gt;</span>,
<span class="roman">&lt;variable&gt;</span>.  Syntactic variables should be understood to denote segments of
program text; for example, <span class="roman">&lt;expression&gt;</span> stands for any string of
characters which is a syntactically valid expression.  The notation
</p>
<table><tr><td>&nbsp;</td><td><pre class="format"> <span class="roman">&lt;thing1&gt;</span> &hellip;
</pre></td></tr></table>

<p>indicates zero or more occurrences of a <span class="roman">&lt;thing&gt;</span>, and
</p>
<table><tr><td>&nbsp;</td><td><pre class="format"> <span class="roman">&lt;thing1&gt;</span> <span class="roman">&lt;thing2&gt;</span> &hellip;
</pre></td></tr></table>

<p>indicates one or more occurrences of a <span class="roman">&lt;thing&gt;</span>.
</p>
<p>If <var>category</var> is &ldquo;procedure&rdquo;, then the entry describes a procedure, and
the header line gives a template for a call to the procedure.  Argument
names in the template are <var>italicized</var>.  Thus the header line
</p>

<table width="100%"><tr><td align="left"> <code>(</code><code><b>vector-ref</b></code><i> <var>vector</var> <var>k</var></i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>indicates that the built-in procedure <tt>vector-ref</tt> takes
two arguments, a vector <var>vector</var> and an exact non-negative integer
<var>k</var> (see below).  The header lines
</p>


<table width="100%"><tr><td align="left"> <code>(</code><code><b>make-vector</b></code><i> <var>k</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<table width="100%"><tr><td align="left"> <code>(</code><code><b>make-vector</b></code><i> <var>k</var> <var>fill</var></i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>indicate that the <tt>make-vector</tt> procedure must be defined to take
either one or two arguments.
</p>

<p>It is an error for an operation to be presented with an argument that it
is not specified to handle.  For succinctness, we follow the convention
that if an argument name is also the name of a type listed in
section <a href="#Disjointness-of-types">Disjointness of types</a>, then that argument must be of the named type.
For example, the header line for <tt>vector-ref</tt> given above dictates that the
first argument to <tt>vector-ref</tt> must be a vector.  The following naming
conventions also imply type restrictions:
</p>

 <blockquote><dl compact="compact">
<dt> <var>obj</var></dt>
</dl>
</blockquote>
<p>any object
</p> <var>list</var>, <var>list1</var>, &hellip; <var>listj</var>, &hellip;
<p>list (see section see section <a href="#Pairs-and-lists">Pairs and lists</a>)
</p> <var>z</var>, <var>z1</var>, &hellip; <var>zj</var>, &hellip;
<p>complex number
</p> <var>x</var>, <var>x1</var>, &hellip; <var>xj</var>, &hellip;
<p>real number
</p> <var>y</var>, <var>y1</var>, &hellip; <var>yj</var>, &hellip;
<p>real number
</p> <var>q</var>, <var>q1</var>, &hellip; <var>qj</var>, &hellip;
<p>rational number
</p> <var>n</var>, <var>n1</var>, &hellip; <var>nj</var>, &hellip;
<p>integer
</p> <var>k</var>, <var>k1</var>, &hellip; <var>kj</var>, &hellip;
<p>exact non-negative integer
</p> 







<a name="Evaluation-examples"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Entry-format" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3.3 Entry format" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Naming-conventions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 1.3.5 Naming conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Up section"><img src="button-up.png" border="0" alt="Up: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Evaluation-examples-1"></a>
<h3 class="subsection">1.3.4 Evaluation examples</h3>


<p>The symbol &ldquo;&rArr;&rdquo; used in program examples should be read
&ldquo;evaluates to.&rdquo;  For example,
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(* 5 8)                                ==&gt;  40
</pre></td></tr></table>


<p>means that the expression <tt>(* 5 8)</tt> evaluates to the object <tt>40</tt>.
Or, more precisely:  the expression given by the sequence of characters
&ldquo;<tt>(* 5 8)</tt>&rdquo; evaluates, in the initial environment, to an object
that may be represented externally by the sequence of characters &ldquo;<tt>40</tt>&rdquo;.  See section <a href="#External-representations">External representations</a> for a discussion of external
representations of objects.
</p>
<a name="Naming-conventions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Evaluation-examples" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3.4 Evaluation examples" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notation-and-terminology" title="Up section"><img src="button-up.png" border="0" alt="Up: 1.3 Notation and terminology" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Naming-conventions-1"></a>
<h3 class="subsection">1.3.5 Naming conventions</h3>


<p>By convention, the names of procedures that always return a boolean
value usually end
in &ldquo;<code>?</code>&rdquo;.  Such procedures are called predicates.
<a name="index-_003f"></a>
</p>
<p>By convention, the names of procedures that store values into previously
allocated locations (see section see section <a href="#Storage-model">Storage model</a>) usually end in
&ldquo;<code>!</code>&rdquo;.
<a name="index-_0021"></a>
Such procedures are called mutation procedures.
By convention, the value returned by a mutation procedure is unspecified.
</p>
<p>By convention, &ldquo;<code>-&gt;</code>&rdquo; appears within the names of procedures that
<a name="index-_002d_003e"></a>
take an object of one type and return an analogous object of another type.
For example, <samp>list-&gt;vector</samp> takes a list and returns a vector whose
elements are the same as those of the list.
</p>

        

  


<a name="Lexical-conventions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Naming-conventions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 1.3.5 Naming conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Identifiers" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 2.1 Identifiers" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Overview-of-Scheme" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 1. Overview of Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Lexical-conventions-1"></a>
<h1 class="chapter">2. Lexical conventions</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Identifiers">2.1 Identifiers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 
</td></tr>
<tr><td align="left" valign="top"><a href="#Whitespace-and-comments">2.2 Whitespace and comments</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-notations">2.3 Other notations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             
</td></tr>
</table>


<p>This section gives an informal account of some of the lexical
conventions used in writing Scheme programs.  For a formal syntax of
Scheme, see section <a href="#Formal-syntax">Formal syntax</a>.
</p>
<p>Upper and lower case forms of a letter are never distinguished
except within character and string constants.  For example, <samp>Foo</samp> is
the same identifier as <samp>FOO</samp>, and <tt>#x1AB</tt> is the same number as
<tt>#X1ab</tt>.
</p>
<a name="Identifiers"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Lexical-conventions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Whitespace-and-comments" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 2.2 Whitespace and comments" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Up section"><img src="button-up.png" border="0" alt="Up: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Identifiers-1"></a>
<h2 class="section">2.1 Identifiers</h2>



<p>Most identifiers allowed by other programming
<a name="index-identifier"></a>
languages are also acceptable to Scheme.  The precise rules for forming
identifiers vary among implementations of Scheme, but in all
implementations a sequence of letters, digits, and &ldquo;extended alphabetic
characters&rdquo; that begins with a character that cannot begin a number is
an identifier.  In addition, <code>+</code>, <code>-</code>, and <code>...</code> are identifiers. 
<a name="index-_002e_002e_002e"></a>
<a name="index-_002d"></a>
<a name="index-_002b"></a>
Here are some examples of identifiers:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
lambda                   q
list-&gt;vector             soup
+                        V17a
&lt;=?                      a34kTMNs
the-word-recursion-has-many-meanings
</pre></td></tr></table>


<p>Extended alphabetic characters may be used within identifiers as if
they were letters.  The following are extended alphabetic characters:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
! $ % &amp; * + - . / : &lt; = &gt; ? @ ^ _ ~ 
</pre></td></tr></table>


<p>See section <a href="#Lexical-structure">Lexical structure</a> for a formal syntax of identifiers.
</p>
<p>Identifiers have two uses within Scheme programs:
</p>

<ul>
<li>
Any identifier may be used as a variable
or as a syntactic keyword
(see sections see section <a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a> and see section <a href="#Macros">Macros</a>).

</li><li>
When an identifier appears as a literal or within a literal
(see section see section <a href="#Literal-expressions">Literal expressions</a>), it is being used to denote a <em>symbol</em>
(see section see section <a href="#Symbols">Symbols</a>).


</li></ul>

<a name="index-syntactic-keyword"></a>
<a name="index-variable"></a>





<a name="Whitespace-and-comments"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Identifiers" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 2.1 Identifiers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-notations" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 2.3 Other notations" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Up section"><img src="button-up.png" border="0" alt="Up: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Whitespace-and-comments-1"></a>
<h2 class="section">2.2 Whitespace and comments</h2>


<p><em>Whitespace</em> characters are spaces and newlines.
<a name="index-Whitespace"></a>
(Implementations typically provide additional whitespace characters such
as tab or page break.)  Whitespace is used for improved readability and
as necessary to separate tokens from each other, a token being an
indivisible lexical unit such as an identifier or number, but is
otherwise insignificant.  Whitespace may occur between any two tokens,
but not within a token.  Whitespace may also occur inside a string,
where it is significant.
</p>
<p>A semicolon (<tt>;</tt>) indicates the start of a
comment.  The comment continues to the
<a name="index-_003b"></a>
<a name="index-comment"></a>
end of the line on which the semicolon appears.  Comments are invisible
to Scheme, but the end of the line is visible as whitespace.  This
prevents a comment from appearing in the middle of an identifier or
number.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
;;; The FACT procedure computes the factorial
;;; of a non-negative integer.
(define fact
  (lambda (n)
    (if (= n 0)
        1        ;Base case: return 1
        (* n (fact (- n 1))))))
</pre></td></tr></table>



<a name="Other-notations"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Whitespace-and-comments" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 2.2 Whitespace and comments" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Up section"><img src="button-up.png" border="0" alt="Up: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Other-notations-1"></a>
<h2 class="section">2.3 Other notations</h2>




<p>For a description of the notations used for numbers, see
section <a href="#Numbers">Numbers</a>.
</p>

<dl compact="compact">
<dt> <tt>. + -</tt></dt>
<dd><p>These are used in numbers, and may also occur anywhere in an identifier
except as the first character.  A delimited plus or minus sign by itself
is also an identifier.
A delimited period (not occurring within a number or identifier) is used
in the notation for pairs (section see section <a href="#Pairs-and-lists">Pairs and lists</a>), and to indicate a
rest-parameter in a  formal parameter list (section see section <a href="#Procedures">Procedures</a>).
A delimited sequence of three successive periods is also an identifier.
</p>
</dd>
<dt> <tt>( )</tt></dt>
<dd><p>Parentheses are used for grouping and to notate lists
(section see section <a href="#Pairs-and-lists">Pairs and lists</a>).
</p>
</dd>
<dt> <tt>'</tt></dt>
<dd><p>The single quote character is used to indicate literal data (section see section <a href="#Literal-expressions">Literal expressions</a>).
</p>
</dd>
<dt> <tt>&lsquo;</tt></dt>
<dd><p>The backquote character is used to indicate almost-constant
data (section see section <a href="#Quasiquotation">Quasiquotation</a>).
</p>
</dd>
<dt> <tt>, ,@</tt></dt>
<dd><p>The character comma and the sequence comma at-sign are used in conjunction
with backquote (section see section <a href="#Quasiquotation">Quasiquotation</a>).
</p>
</dd>
<dt> <tt>&quot;</tt></dt>
<dd><p>The double quote character is used to delimit strings (section see section <a href="#Strings">Strings</a>).
</p>
</dd>
<dt> <tt>\</tt></dt>
<dd><p>Backslash is used in the syntax for character constants
(section see section <a href="#Characters">Characters</a>) and as an escape character within string
constants (section see section <a href="#Strings">Strings</a>).
</p>

</dd>
<dt> <tt>[ ] { } |</tt></dt>
<dd><p>Left and right square brackets and curly braces and vertical bar
are reserved for possible future extensions to the language.
</p>
</dd>
<dt> <tt>#</tt></dt>
<dd><p> Sharp sign is used for a variety of purposes depending on
the character that immediately follows it:
</p>
</dd>
<dt> <tt>#t</tt> <tt>#f</tt></dt>
<dd><p>These are the boolean constants (section see section <a href="#Booleans">Booleans</a>).
</p>
</dd>
<dt> <tt>#\</tt></dt>
<dd><p>This introduces a character constant (section see section <a href="#Characters">Characters</a>).
</p>
</dd>
<dt> <tt>#(</tt></dt>
<dd><p>This introduces a vector constant (section see section <a href="#Vectors">Vectors</a>).  Vector constants
are terminated by <tt>)</tt> .
</p>
</dd>
<dt> <tt>#e #i #b #o #d #x</tt></dt>
<dd><p>These are used in the notation for numbers (section see section <a href="#Syntax-of-numerical-constants">Syntax of numerical constants</a>).
</p>
</dd>
</dl>

       

<a name="Basic-concepts"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Other-notations" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 2.3 Other notations" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Variables_003b-syntactic-keywords_003b-and-regions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3.1 Variables; syntactic keywords; and regions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Lexical-conventions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 2. Lexical conventions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Basic-concepts-1"></a>
<h1 class="chapter">3. Basic concepts</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Disjointness-of-types">3.2 Disjointness of types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       
</td></tr>
<tr><td align="left" valign="top"><a href="#External-representations">3.3 External representations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    
</td></tr>
<tr><td align="left" valign="top"><a href="#Storage-model">3.4 Storage model</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               
</td></tr>
<tr><td align="left" valign="top"><a href="#Proper-tail-recursion">3.5 Proper tail recursion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       
</td></tr>
</table>



<a name="Variables_003b-syntactic-keywords_003b-and-regions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Basic-concepts" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Disjointness-of-types" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3.2 Disjointness of types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Up section"><img src="button-up.png" border="0" alt="Up: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Variables_003b-syntactic-keywords_003b-and-regions-1"></a>
<h2 class="section">3.1 Variables; syntactic keywords; and regions</h2>




<p>An identifier may name a type of syntax, or it may name
<a name="index-identifier-1"></a>
a location where a value can be stored.  An identifier that names a type
of syntax is called a <em>syntactic keyword</em>
<a name="index-syntactic-keyword-1"></a>
and is said to be <em>bound</em> to that syntax.  An identifier that names a
location is called a <em>variable</em> and is said to be
<a name="index-variable-1"></a>
<em>bound</em> to that location.  The set of all visible
bindings in effect at some point in a program is
<a name="index-binding"></a>
known as the <em>environment</em> in effect at that point.  The value
stored in the location to which a variable is bound is called the
variable's value.  By abuse of terminology, the variable is sometimes
said to name the value or to be bound to the value.  This is not quite
accurate, but confusion rarely results from this practice.
</p>




<p>Certain expression types are used to create new kinds of syntax
and bind syntactic keywords to those new syntaxes, while other
expression types create new locations and bind variables to those
locations.  These expression types are called <em>binding constructs</em>.
</p>
<a name="index-binding-construct"></a>
<p>Those that bind syntactic keywords are listed in section <a href="#Macros">Macros</a>.
The most fundamental of the variable binding constructs is the
<samp>lambda</samp> expression, because all other variable binding constructs
can be explained in terms of <samp>lambda</samp> expressions.  The other
variable binding constructs are <samp>let</samp>, <samp>let*</samp>, <samp>letrec</samp>,
and <samp>do</samp> expressions (see sections see section <a href="#Procedures">Procedures</a>, see section <a href="#Binding-constructs">Binding constructs</a>, and
see section <a href="#Iteration">Iteration</a>).
</p>

<p>Like Algol and Pascal, and unlike most other dialects of Lisp
except for Common Lisp, Scheme is a statically scoped language with
block structure.  To each place where an identifier is bound in a program
there corresponds a <em>region</em> of the program text within which
<a name="index-region"></a>
the binding is visible.  The region is determined by the particular
binding construct that establishes the binding; if the binding is
established by a <samp>lambda</samp> expression, for example, then its region
is the entire <samp>lambda</samp> expression.  Every mention of an identifier
refers to the binding of the identifier that established the
innermost of the regions containing the use.  If there is no binding of
the identifier whose region contains the use, then the use refers to the
binding for the variable in the top level environment, if any
(chapters see section <a href="#Expressions">Expressions</a> and see section <a href="#Standard-procedures">Standard procedures</a>); if there is no
binding for the identifier,
it is said to be <em>unbound</em>.
<a name="index-top-level-environment"></a>
<a name="index-bound"></a>
<a name="index-unbound"></a>
</p>






<a name="Disjointness-of-types"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Variables_003b-syntactic-keywords_003b-and-regions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3.1 Variables; syntactic keywords; and regions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#External-representations" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3.3 External representations" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Up section"><img src="button-up.png" border="0" alt="Up: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Disjointness-of-types-1"></a>
<h2 class="section">3.2 Disjointness of types</h2>



<p>No object satisfies more than one of the following predicates:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
boolean?          pair?
symbol?           number?
char?             string?
vector?           port?
procedure?
</pre></td></tr></table>


<p>These predicates define the types <em>boolean</em>, <em>pair</em>, <em>symbol</em>, <em>number</em>, <em>char</em> (or <em>character</em>), <em>string</em>, <em>vector</em>, <em>port</em>, and <em>procedure</em>.  The empty list is a special
object of its own type; it satisfies none of the above predicates.
</p>
<a name="index-symbol_003f"></a>
<a name="index-pair_003f"></a>
<a name="index-boolean_003f"></a>
<a name="index-type"></a>

<a name="index-vector_003f"></a>
<a name="index-string_003f"></a>
<a name="index-char_003f"></a>
<a name="index-number_003f"></a>

<a name="index-empty-list"></a>
<a name="index-procedure_003f"></a>
<a name="index-port_003f"></a>

<p>Although there is a separate boolean type,
any Scheme value can be used as a boolean value for the purpose of a
conditional test.  As explained in section <a href="#Booleans">Booleans</a>, all
values count as true in such a test except for <tt>#f</tt>.
This report uses the word &ldquo;true&rdquo; to refer to any
Scheme value except <tt>#f</tt>, and the word &ldquo;false&rdquo; to refer to
<tt>#f</tt>.  
<a name="index-false"></a>
<a name="index-true"></a>
</p>
<a name="External-representations"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Disjointness-of-types" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3.2 Disjointness of types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Storage-model" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3.4 Storage model" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Up section"><img src="button-up.png" border="0" alt="Up: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="External-representations-2"></a>
<h2 class="section">3.3 External representations</h2>



<p>An important concept in Scheme (and Lisp) is that of the <em>external
representation</em> of an object as a sequence of characters.  For example,
an external representation of the integer 28 is the sequence of
characters &ldquo;<tt>28</tt>&rdquo;, and an external representation of a list consisting
of the integers 8 and 13 is the sequence of characters &ldquo;<tt>(8 13)</tt>&rdquo;.
</p>
<p>The external representation of an object is not necessarily unique.  The
integer 28 also has representations &ldquo;<tt>#e28.000</tt>&rdquo; and &ldquo;<tt>#x1c</tt>&rdquo;, and the
list in the previous paragraph also has the representations &ldquo;<tt>( 08 13
)</tt>&rdquo; and &ldquo;<tt>(8 . (13 . ()))</tt>&rdquo; (see section see section <a href="#Pairs-and-lists">Pairs and lists</a>).
</p>
<p>Many objects have standard external representations, but some, such as
procedures, do not have standard representations (although particular
implementations may define representations for them).
</p>
<p>An external representation may be written in a program to obtain the
corresponding object (see <samp>quote</samp>, section see section <a href="#Literal-expressions">Literal expressions</a>).
</p>
<p>External representations can also be used for input and output.  The
procedure <samp>read</samp> (section see section <a href="#Input">Input</a>) parses external
representations, and the procedure <samp>write</samp> (section see section <a href="#Output">Output</a>)
generates them.  Together, they provide an elegant and powerful
input/output facility.
</p>
<p>Note that the sequence of characters &ldquo;<tt>(+ 2 6)</tt>&rdquo; is <em>not</em> an
external representation of the integer 8, even though it <em>is</em> an
expression evaluating to the integer 8; rather, it is an external
representation of a three-element list, the elements of which are the symbol
<tt>+</tt> and the integers 2 and 6.  Scheme's syntax has the property that
any sequence of characters that is an expression is also the external
representation of some object.  This can lead to confusion, since it may
not be obvious out of context whether a given sequence of characters is
intended to denote data or program, but it is also a source of power,
since it facilitates writing programs such as interpreters and
compilers that treat programs as data (or vice versa).
</p>
<p>The syntax of external representations of various kinds of objects
accompanies the description of the primitives for manipulating the
objects in the appropriate sections of chapter <a href="#Standard-procedures">Standard procedures</a>.
</p>
<a name="Storage-model"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#External-representations" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3.3 External representations" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Proper-tail-recursion" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 3.5 Proper tail recursion" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Up section"><img src="button-up.png" border="0" alt="Up: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Storage-model-1"></a>
<h2 class="section">3.4 Storage model</h2>



<p>Variables and objects such as pairs, vectors, and strings implicitly
denote locations or sequences of locations.  A string, for
<a name="index-location"></a>
example, denotes as many locations as there are characters in the string. 
(These locations need not correspond to a full machine word.) A new value may be
stored into one of these locations using the <tt>string-set!</tt> procedure, but
the string continues to denote the same locations as before.
</p>
<p>An object fetched from a location, by a variable reference or by
a procedure such as <samp>car</samp>, <samp>vector-ref</samp>, or <samp>string-ref</samp>, is
equivalent in the sense of <code>eqv?</code> 
(section see section <a href="#Equivalence-predicates">Equivalence predicates</a>)
<a name="index-eqv_003f"></a>
to the object last stored in the location before the fetch.
</p>
<p>Every location is marked to show whether it is in use.
No variable or object ever refers to a location that is not in use.
Whenever this report speaks of storage being allocated for a variable
or object, what is meant is that an appropriate number of locations are
chosen from the set of locations that are not in use, and the chosen
locations are marked to indicate that they are now in use before the variable
or object is made to denote them.
</p>
<p>In many systems it is desirable for constants (i.e. the values of
<a name="index-constant"></a>
literal expressions) to reside in read-only-memory.  To express this, it is
convenient to imagine that every object that denotes locations is associated
with a flag telling whether that object is mutable or
<a name="index-mutable"></a>
immutable.  In such systems literal constants and the strings
<a name="index-immutable"></a>
returned by <code>symbol-&gt;string</code> are immutable objects, while all objects
<a name="index-symbol_002d_003estring"></a>
created by the other procedures listed in this report are mutable.  It is an
error to attempt to store a new value into a location that is denoted by an
immutable object.
</p>
<a name="Proper-tail-recursion"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Storage-model" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3.4 Storage model" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Up section"><img src="button-up.png" border="0" alt="Up: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Proper-tail-recursion-1"></a>
<h2 class="section">3.5 Proper tail recursion</h2>



<p>Implementations of Scheme are required to be
<em>properly tail-recursive</em>.
<a name="index-proper-tail-recursion"></a>
Procedure calls that occur in certain syntactic
contexts defined below are &lsquo;tail calls'.  A Scheme implementation is
properly tail-recursive if it supports an unbounded number of active
tail calls.  A call is <em>active</em> if the called procedure may still
return.  Note that this includes calls that may be returned from either
by the current continuation or by continuations captured earlier by
<samp>call-with-current-continuation</samp> that are later invoked.
In the absence of captured continuations, calls could
return at most once and the active calls would be those that had not
yet returned.
A formal definition of proper tail recursion can be found
in [propertailrecursion].
</p>

<blockquote><p><em>Rationale:</em>
</p>
<p>Intuitively, no space is needed for an active tail call because the
continuation that is used in the tail call has the same semantics as the
continuation passed to the procedure containing the call.  Although an improper
implementation might use a new continuation in the call, a return
to this new continuation would be followed immediately by a return
to the continuation passed to the procedure.  A properly tail-recursive
implementation returns to that continuation directly.
</p>
<p>Proper tail recursion was one of the central ideas in Steele and
Sussman's original version of Scheme.  Their first Scheme interpreter
implemented both functions and actors.  Control flow was expressed using
actors, which differed from functions in that they passed their results
on to another actor instead of returning to a caller.  In the terminology
of this section, each actor finished with a tail call to another actor.
</p>
<p>Steele and Sussman later observed that in their interpreter the code
for dealing with actors was identical to that for functions and thus
there was no need to include both in the language.
</p>
</blockquote>


<p>A <em>tail call</em> is a procedure call that occurs
<a name="index-tail-call"></a>
in a <em>tail context</em>.  Tail contexts are defined inductively.  Note
that a tail context is always determined with respect to a particular lambda
expression.
</p>


<ul>
<li>
The last expression within the body of a lambda expression,
shown as <span class="roman">&lt;tail expression&gt;</span> below, occurs in a tail context.

<table><tr><td>&nbsp;</td><td><pre class="format">(lambda &lt;formals&gt;
  &lt;definition&gt;* &lt;expression&gt;* &lt;tail expression&gt;)
</pre></td></tr></table>



</li><li>
If one of the following expressions is in a tail context,
then the subexpressions shown as &lt;tail expression&gt; are in a tail context.
These were derived from rules in the grammar given in
chapter <a href="#Formal-syntax-and-semantics">Formal syntax and semantics</a> by replacing some occurrences of &lt;expression&gt;
with &lt;tail expression&gt;.  Only those rules that contain tail contexts
are shown here.


<table><tr><td>&nbsp;</td><td><pre class="format">(if &lt;expression&gt; &lt;tail expression&gt; &lt;tail expression&gt;)
(if &lt;expression&gt; &lt;tail expression&gt;)

(cond &lt;cond clause&gt;+)
(cond &lt;cond clause&gt;* (else &lt;tail sequence&gt;))

(case &lt;expression&gt;
  &lt;case clause&gt;+)
(case &lt;expression&gt;
  &lt;case clause&gt;*
  (else &lt;tail sequence&gt;))

(and &lt;expression&gt;* &lt;tail expression&gt;)
(or &lt;expression&gt;* &lt;tail expression&gt;)

(let (&lt;binding spec&gt;*) &lt;tail body&gt;)
(let &lt;variable&gt; (&lt;binding spec&gt;*) &lt;tail body&gt;)
(let* (&lt;binding spec&gt;*) &lt;tail body&gt;)
(letrec (&lt;binding spec&gt;*) &lt;tail body&gt;)

(let-syntax (&lt;syntax spec&gt;*) &lt;tail body&gt;)
(letrec-syntax (&lt;syntax spec&gt;*) &lt;tail body&gt;)

(begin &lt;tail sequence&gt;)

(do (&lt;iteration spec&gt;*)
    (&lt;test&gt; &lt;tail sequence&gt;)
  &lt;expression&gt;*)

<span class="roman">where</span>

&lt;cond clause&gt; &ndash;&gt; (&lt;test&gt; &lt;tail sequence&gt;)
&lt;case clause&gt; &ndash;&gt; ((&lt;datum&gt;*) &lt;tail sequence&gt;)

&lt;tail body&gt; &ndash;&gt; &lt;definition&gt;* &lt;tail sequence&gt;
&lt;tail sequence&gt; &ndash;&gt; &lt;expression&gt;* &lt;tail expression&gt;
</pre></td></tr></table>



</li><li> 
If a <samp>cond</samp> expression is in a tail context, and has a clause of
the form <samp>(<span class="roman">&lt;expression1&gt;</span> =&gt; <span class="roman">&lt;expression2&gt;</span>)</samp>
then the (implied) call to
the procedure that results from the evaluation of <span class="roman">&lt;expression2&gt;</span> is in a
tail context.  <span class="roman">&lt;expression2&gt;</span> itself is not in a tail context.


</li></ul>


<p>Certain built-in procedures are also required to perform tail calls.
The first argument passed to <code>apply</code> and to
<a name="index-apply"></a>
<code>call-with-current-continuation</code>, and the second argument passed to
<a name="index-call_002dwith_002dcurrent_002dcontinuation"></a>
<code>call-with-values</code>, must be called via a tail call.
<a name="index-call_002dwith_002dvalues"></a>
Similarly, <code>eval</code> must evaluate its argument as if it
<a name="index-eval"></a>
were in tail position within the <code>eval</code> procedure.
<a name="index-eval-1"></a>
</p>
<p>In the following example the only tail call is the call to <samp>f</samp>.
None of the calls to <samp>g</samp> or <samp>h</samp> are tail calls.  The reference to
<samp>x</samp> is in a tail context, but it is not a call and thus is not a
tail call.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(lambda ()
  (if (g)
      (let ((x (h)))
        x)
      (and (g) (f))))
</pre></td></tr></table>



<blockquote><p><em>Note:</em>
Implementations are allowed, but not required, to
recognize that some non-tail calls, such as the call to <samp>h</samp>
above, can be evaluated as though they were tail calls.
In the example above, the <samp>let</samp> expression could be compiled
as a tail call to <samp>h</samp>. (The possibility of <samp>h</samp> returning
an unexpected number of values can be ignored, because in that
case the effect of the <samp>let</samp> is explicitly unspecified and
implementation-dependent.)
</p></blockquote>


       

<a name="Expressions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Proper-tail-recursion" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 3.5 Proper tail recursion" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Basic-concepts" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 3. Basic concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Expressions-2"></a>
<h1 class="chapter">4. Expressions</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Primitive-expression-types">4.1 Primitive expression types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Derived-expression-types">4.2 Derived expression types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    
</td></tr>
<tr><td align="left" valign="top"><a href="#Macros">4.3 Macros</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                      
</td></tr>
</table>





<p>Expression types are categorized as <em>primitive</em> or <em>derived</em>.
Primitive expression types include variables and procedure calls.
Derived expression types are not semantically primitive, but can instead
be defined as macros.
With the exception of <samp>quasiquote</samp>, whose macro definition is complex,
the derived expressions are classified as library features.
Suitable definitions are given in section <a href="#Derived-expression-type">Derived expression types</a>.
</p>
<a name="Primitive-expression-types"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Expressions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Variable-references" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.1 Variable references" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Up section"><img src="button-up.png" border="0" alt="Up: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Primitive-expression-types-1"></a>
<h2 class="section">4.1 Primitive expression types</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variable-references">4.1.1 Variable references</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Literal-expressions">4.1.2 Literal expressions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         
</td></tr>
<tr><td align="left" valign="top"><a href="#Procedure-calls">4.1.3 Procedure calls</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             
</td></tr>
<tr><td align="left" valign="top"><a href="#Procedures">4.1.4 Procedures</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  
</td></tr>
<tr><td align="left" valign="top"><a href="#Conditionals">4.1.5 Conditionals</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                
</td></tr>
<tr><td align="left" valign="top"><a href="#Assignments">4.1.6 Assignments</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 
</td></tr>
</table>



<a name="Variable-references"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Primitive-expression-types" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Literal-expressions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.2 Literal expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Variable-references-1"></a>
<h3 class="subsection">4.1.1 Variable references</h3>



<table width="100%"><tr><td align="left"> <code><b><span class="roman">&lt;variable&gt;</span></b></code></td><td align="right">syntax</td></tr></table>


<p>An expression consisting of a variable
<a name="index-variable-2"></a>
(section see section <a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a>) is a variable reference.  The value of
the variable reference is the value stored in the location to which the
variable is bound.  It is an error to reference an
unbound variable.
<a name="index-unbound-1"></a>
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define x 28)
x                                      ==&gt;  28
</pre></td></tr></table>



<a name="Literal-expressions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Variable-references" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.1 Variable references" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Procedure-calls" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.3 Procedure calls" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Literal-expressions-1"></a>
<h3 class="subsection">4.1.2 Literal expressions</h3>




<a name="Definition_of_quote"></a><a name="Syntax_quote"></a><a name="index-quote"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_quote">quote</a></b></code><i>  <span class="roman">&lt;datum&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>
<a name="index-_0027"></a><table width="100%"><tr><td align="left"> <code><b><tt>'</tt></b></code><i><span class="roman">&lt;datum&gt;</span></i></td><td align="right">syntax</td></tr></table>
<table width="100%"><tr><td align="left"> <code><b><span class="roman">&lt;constant&gt;</span></b></code></td><td align="right">syntax</td></tr></table>


<p><samp>(quote <span class="roman">&lt;datum&gt;</span>)</samp> evaluates to <span class="roman">&lt;datum&gt;</span>.
<a name="index-_0027-1"></a>
<span class="roman">&lt;Datum&gt;</span>
may be any external representation of a Scheme object (see
section see section <a href="#External-representations">External representations</a>).  This notation is used to include literal
constants in Scheme code.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">
(quote a)                              ==&gt;  a
(quote #(a b c))                       ==&gt;  #(a b c)
(quote (+ 1 2))                        ==&gt;  (+ 1 2)
</pre></td></tr></table>


<p><samp>(quote <span class="roman">&lt;datum&gt;</span>)</samp> may be abbreviated as
<tt>'</tt><span class="roman">&lt;datum&gt;</span>.  The two notations are equivalent in all
respects.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">'a                                     ==&gt;  a
'#(a b c)                              ==&gt;  #(a b c)
'()                                    ==&gt;  ()
'(+ 1 2)                               ==&gt;  (+ 1 2)
'(quote a)                             ==&gt;  (quote a)
''a                                    ==&gt;  (quote a)
</pre></td></tr></table>


<p>Numerical constants, string constants, character constants, and boolean
constants evaluate &ldquo;to themselves&rdquo;; they need not be quoted.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">'&quot;abc&quot;                                 ==&gt;  &quot;abc&quot;
&quot;abc&quot;                                  ==&gt;  &quot;abc&quot;
'145932                                ==&gt;  145932
145932                                 ==&gt;  145932
'#t                                    ==&gt;  #t
#t                                     ==&gt;  #t
</pre></td></tr></table>


<p>As noted in section <a href="#Storage-model">Storage model</a>, it is an error to alter a constant
(i.e. the value of a literal expression) using a mutation procedure like
<samp>set-car!</samp> or <samp>string-set!</samp>.
</p>



<a name="Procedure-calls"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Literal-expressions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.2 Literal expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Procedures" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.4 Procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Procedure-calls-1"></a>
<h3 class="subsection">4.1.3 Procedure calls</h3>



<table width="100%"><tr><td align="left"> <code>(</code><code><b><span class="roman">&lt;operator&gt;</span></b></code><i> <span class="roman">&lt;operand1&gt;</span> &hellip;</i><code>)</code></td><td align="right">syntax</td></tr></table>


<p>A procedure call is written by simply enclosing in parentheses
expressions for the procedure to be called and the arguments to be
passed to it.  The operator and operand expressions are evaluated (in an
unspecified order) and the resulting procedure is passed the resulting
arguments.
<a name="index-procedure-call"></a>
<a name="index-call"></a>
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(+ 3 4)                                ==&gt;  7
((if #f + *) 3 4)                      ==&gt;  12
</pre></td></tr></table>


<p>A number of procedures are available as the values of variables in the
initial environment; for example, the addition and multiplication
procedures in the above examples are the values of the variables <samp>+</samp>
and <samp>*</samp>.  New procedures are created by evaluating lambda expressions
(see section see section <a href="#Procedures">Procedures</a>).
</p>

<p>Procedure calls may return any number of values (see <code>values</code> in
<a name="index-values"></a>
section see section <a href="#Control-features">Control features</a>).  With the exception of <samp>values</samp>
the procedures available in the initial environment return one
value or, for procedures such as <samp>apply</samp>, pass on the values returned
by a call to one of their arguments.
</p>
<p>Procedure calls are also called <em>combinations</em>.
</p>
<a name="index-combination"></a>


<blockquote><p><em>Note:</em> In contrast to other dialects of Lisp, the order of
evaluation is unspecified, and the operator expression and the operand
expressions are always evaluated with the same evaluation rules.
</p></blockquote>



<blockquote><p><em>Note:</em>
Although the order of evaluation is otherwise unspecified, the effect of
any concurrent evaluation of the operator and operand expressions is
constrained to be consistent with some sequential order of evaluation.
The order of evaluation may be chosen differently for each procedure call.
</p></blockquote>



<blockquote><p><em>Note:</em> In many dialects of Lisp, the empty combination, <tt>()</tt>, is a legitimate expression.  In Scheme, combinations must have at
least one subexpression, so <tt>()</tt> is not a syntactically valid
expression.  
</p>
</blockquote>







<a name="Procedures"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Procedure-calls" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.3 Procedure calls" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Conditionals" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.5 Conditionals" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Procedures-2"></a>
<h3 class="subsection">4.1.4 Procedures</h3>




<a name="Definition_of_lambda"></a><a name="Syntax_lambda"></a><a name="index-lambda"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_lambda">lambda</a></b></code><i>  <span class="roman">&lt;formals&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Formals&gt;</span> should be a formal arguments list as described below,
and <span class="roman">&lt;body&gt;</span> should be a sequence of one or more expressions.
</p>
<p><em>Semantics:</em>
A lambda expression evaluates to a procedure.  The environment in
effect when the lambda expression was evaluated is remembered as part of the
procedure.  When the procedure is later called with some actual
arguments, the environment in which the lambda expression was evaluated will
be extended by binding the variables in the formal argument list to
fresh locations, the corresponding actual argument values will be stored
in those locations, and the expressions in the body of the lambda expression
will be evaluated sequentially in the extended environment.
The result(s) of the last expression in the body will be returned as
the result(s) of the procedure call.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(lambda (x) (+ x x))                   ==&gt;  <em></em>a procedure
((lambda (x) (+ x x)) 4)               ==&gt;  8

(define reverse-subtract
  (lambda (x y) (- y x)))
(reverse-subtract 7 10)                ==&gt;  3

(define add4
  (let ((x 4))
    (lambda (y) (+ x y))))
(add4 6)                               ==&gt;  10
</pre></td></tr></table>


<p><span class="roman">&lt;Formals&gt;</span> should have one of the following forms:
</p>


<ul>
<li>
<tt>(<span class="roman">&lt;variable1&gt;</span> &hellip;)</tt>:
The procedure takes a fixed number of arguments; when the procedure is
called, the arguments will be stored in the bindings of the
corresponding variables.

</li><li>
<span class="roman">&lt;variable&gt;</span>:
The procedure takes any number of arguments; when the procedure is
called, the sequence of actual arguments is converted into a newly
allocated list, and the list is stored in the binding of the
<span class="roman">&lt;variable&gt;</span>.

</li><li>
<tt>(<span class="roman">&lt;variable1&gt;</span> &hellip; <span class="roman">&lt;variable_n&gt;</span> <b>.</b>
<span class="roman">&lt;variable_n+1&gt;</span>)</tt>:
If a space-delimited period precedes the last variable, then
the procedure takes n or more arguments, where n is the
number of formal arguments before the period (there must
be at least one).
The value stored in the binding of the last variable will be a
newly allocated
list of the actual arguments left over after all the other actual
arguments have been matched up against the other formal arguments.

</li></ul>


<p>It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in
<span class="roman">&lt;formals&gt;</span>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">((lambda x x) 3 4 5 6)                 ==&gt;  (3 4 5 6)
((lambda (x y . z) z)
 3 4 5 6)                              ==&gt;  (5 6)
</pre></td></tr></table>


<p>Each procedure created as the result of evaluating a lambda expression is
(conceptually) tagged
with a storage location, in order to make <code>eqv?</code> and
<a name="index-eqv_003f-1"></a>
<code>eq?</code> work on procedures (see section see section <a href="#Equivalence-predicates">Equivalence predicates</a>).
<a name="index-eq_003f"></a>
</p>



<a name="Conditionals"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Procedures" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.4 Procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Assignments" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.1.6 Assignments" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Conditionals-1"></a>
<h3 class="subsection">4.1.5 Conditionals</h3>



<a name="Definition_of_if"></a><a name="Syntax_if"></a><a name="index-if"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_if">if</a></b></code><i>  <span class="roman">&lt;test&gt;</span> <span class="roman">&lt;consequent&gt;</span> <span class="roman">&lt;alternate&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>
<a name="Definition_of_if"></a><a name="Syntax_if"></a><a name="index-if-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_if">if</a></b></code><i>  <span class="roman">&lt;test&gt;</span> <span class="roman">&lt;consequent&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Test&gt;</span>, <span class="roman">&lt;consequent&gt;</span>, and <span class="roman">&lt;alternate&gt;</span> may be arbitrary
expressions.
</p>
<p><em>Semantics:</em>
An <samp>if</samp> expression is evaluated as follows: first,
<span class="roman">&lt;test&gt;</span> is evaluated.  If it yields a true value (see
<a name="index-true-1"></a>
section see section <a href="#Booleans">Booleans</a>), then <span class="roman">&lt;consequent&gt;</span> is evaluated and
its value(s) is(are) returned.  Otherwise <span class="roman">&lt;alternate&gt;</span> is evaluated and its
value(s) is(are) returned.  If <span class="roman">&lt;test&gt;</span> yields a false value and no
<span class="roman">&lt;alternate&gt;</span> is specified, then the result of the expression is
unspecified.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(if (&gt; 3 2) 'yes 'no)                  ==&gt;  yes
(if (&gt; 2 3) 'yes 'no)                  ==&gt;  no
(if (&gt; 3 2)
    (- 3 2)
    (+ 3 2))                           ==&gt;  1
</pre></td></tr></table>





<a name="Assignments"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Conditionals" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.5 Conditionals" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Primitive-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.1 Primitive expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Assignments-1"></a>
<h3 class="subsection">4.1.6 Assignments</h3>




<a name="Definition_of_set!"></a><a name="Syntax_set!"></a><a name="index-set_0021"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_set!">set!</a></b></code><i>  <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>

<p><span class="roman">&lt;Expression&gt;</span> is evaluated, and the resulting value is stored in
the location to which <span class="roman">&lt;variable&gt;</span> is bound.  <span class="roman">&lt;Variable&gt;</span> must
be bound either in some region enclosing the <samp>set!</samp> expression
<a name="index-region-1"></a>
or at top level.  The result of the <samp>set!</samp> expression is
unspecified.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define x 2)
(+ x 1)                                ==&gt;  3
(set! x 4)                             ==&gt;  <em>unspecified</em>
(+ x 1)                                ==&gt;  5
</pre></td></tr></table>





<a name="Derived-expression-types"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Assignments" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.1.6 Assignments" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Conditional" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.1 Conditionals" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Up section"><img src="button-up.png" border="0" alt="Up: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Derived-expression-types-1"></a>
<h2 class="section">4.2 Derived expression types</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 
</td></tr>
<tr><td align="left" valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          
</td></tr>
<tr><td align="left" valign="top"><a href="#Sequencing">4.2.3 Sequencing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  
</td></tr>
<tr><td align="left" valign="top"><a href="#Iteration">4.2.4 Iteration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   
</td></tr>
<tr><td align="left" valign="top"><a href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          
</td></tr>
<tr><td align="left" valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              
</td></tr>
</table>



<p>The constructs in this section are hygienic, as discussed in
section <a href="#Macros">Macros</a>.
For reference purposes, section <a href="#Derived-expression-type">Derived expression types</a> gives macro definitions
that will convert most of the constructs described in this section 
into the primitive constructs described in the previous section.
</p>


<a name="Conditional"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Derived-expression-types" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Binding-constructs" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.2 Binding constructs" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Conditionals-2"></a>
<h3 class="subsection">4.2.1 Conditionals</h3>



<a name="Definition_of_cond"></a><a name="Library_syntax_cond"></a><a name="index-cond"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_cond">cond</a></b></code><i>  &lt;clause1&gt; &lt;clause2&gt; &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p><em>Syntax:</em>
Each <span class="roman">&lt;clause&gt;</span> should be of the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(<span class="roman">&lt;test&gt;</span> <span class="roman">&lt;expression1&gt;</span> &hellip;)
</pre></td></tr></table>

<p>where <span class="roman">&lt;test&gt;</span> is any expression.  Alternatively, a <span class="roman">&lt;clause&gt;</span> may be
of the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(<span class="roman">&lt;test&gt;</span> =&gt; <span class="roman">&lt;expression&gt;</span>)
</pre></td></tr></table>

<p>The last <span class="roman">&lt;clause&gt;</span> may be
an &ldquo;else clause,&rdquo; which has the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(else <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)<span class="roman">.</span>
</pre></td></tr></table>


<a name="index-else"></a>

<a name="index-_003d_003e"></a>

<p><em>Semantics:</em>
A <samp>cond</samp> expression is evaluated by evaluating the <span class="roman">&lt;test&gt;</span>
expressions of successive <span class="roman">&lt;clause&gt;</span>s in order until one of them
evaluates to a true value (see
<a name="index-true-2"></a>
section see section <a href="#Booleans">Booleans</a>).  When a <span class="roman">&lt;test&gt;</span> evaluates to a true
value, then the remaining <span class="roman">&lt;expression&gt;</span>s in its <span class="roman">&lt;clause&gt;</span> are
evaluated in order, and the result(s) of the last <span class="roman">&lt;expression&gt;</span> in the
<span class="roman">&lt;clause&gt;</span> is(are) returned as the result(s) of the entire <samp>cond</samp>
expression.  If the selected <span class="roman">&lt;clause&gt;</span> contains only the
<span class="roman">&lt;test&gt;</span> and no <span class="roman">&lt;expression&gt;</span>s, then the value of the
<span class="roman">&lt;test&gt;</span> is returned as the result.  If the selected <span class="roman">&lt;clause&gt;</span> uses the
<code>=&gt;</code> alternate form, then the <span class="roman">&lt;expression&gt;</span> is evaluated.
<a name="index-_003d_003e-1"></a>
Its value must be a procedure that accepts one argument; this procedure is then
called on the value of the <span class="roman">&lt;test&gt;</span> and the value(s) returned by this
procedure is(are) returned by the <samp>cond</samp> expression.
If all <span class="roman">&lt;test&gt;</span>s evaluate
to false values, and there is no else clause, then the result of
the conditional expression is unspecified; if there is an else
clause, then its <span class="roman">&lt;expression&gt;</span>s are evaluated, and the value(s) of
the last one is(are) returned.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(cond ((&gt; 3 2) 'greater)
      ((&lt; 3 2) 'less))                 ==&gt;  greater

(cond ((&gt; 3 3) 'greater)
      ((&lt; 3 3) 'less)
      (else 'equal))                   ==&gt;  equal

(cond ((assv 'b '((a 1) (b 2))) =&gt; cadr)
      (else #f))                       ==&gt;  2
</pre></td></tr></table>







<a name="Definition_of_case"></a><a name="Library_syntax_case"></a><a name="index-case"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_case">case</a></b></code><i>  <span class="roman">&lt;key&gt;</span> &lt;clause1&gt; &lt;clause2&gt; &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Key&gt;</span> may be any expression.  Each <span class="roman">&lt;clause&gt;</span> should have
the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">((<span class="roman">&lt;datum1&gt;</span> &hellip;) <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)<span class="roman">,</span>
</pre></td></tr></table>

<p>where each <span class="roman">&lt;datum&gt;</span> is an external representation of some object.
All the <span class="roman">&lt;datum&gt;</span>s must be distinct.
The last <span class="roman">&lt;clause&gt;</span> may be an &ldquo;else clause,&rdquo; which has the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(else <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)<span class="roman">.</span>
</pre></td></tr></table>


<a name="index-else-1"></a>

<p><em>Semantics:</em>
A <samp>case</samp> expression is evaluated as follows.  <span class="roman">&lt;Key&gt;</span> is
evaluated and its result is compared against each <span class="roman">&lt;datum&gt;</span>.  If the
result of evaluating <span class="roman">&lt;key&gt;</span> is equivalent (in the sense of
<samp>eqv?</samp>; see section see section <a href="#Equivalence-predicates">Equivalence predicates</a>) to a <span class="roman">&lt;datum&gt;</span>, then the
expressions in the corresponding <span class="roman">&lt;clause&gt;</span> are evaluated from left
to right and the result(s) of the last expression in the <span class="roman">&lt;clause&gt;</span> is(are)
returned as the result(s) of the <samp>case</samp> expression.  If the result of
evaluating <span class="roman">&lt;key&gt;</span> is different from every <span class="roman">&lt;datum&gt;</span>, then if
there is an else clause its expressions are evaluated and the
result(s) of the last is(are) the result(s) of the <samp>case</samp> expression;
otherwise the result of the <samp>case</samp> expression is unspecified.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(case (* 2 3)
  ((2 3 5 7) 'prime)
  ((1 4 6 8 9) 'composite))            ==&gt;  composite
(case (car '(c d))
  ((a) 'a)
  ((b) 'b))                            ==&gt;  <em>unspecified</em>
(case (car '(c d))
  ((a e i o u) 'vowel)
  ((w y) 'semivowel)
  (else 'consonant))                   ==&gt;  consonant
</pre></td></tr></table>






<a name="Definition_of_and"></a><a name="Library_syntax_and"></a><a name="index-and"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_and">and</a></b></code><i>  &lt;test1&gt; &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p>The <span class="roman">&lt;test&gt;</span> expressions are evaluated from left to right, and the
value of the first expression that evaluates to a false value (see
section see section <a href="#Booleans">Booleans</a>) is returned.  Any remaining expressions
are not evaluated.  If all the expressions evaluate to true values, the
value of the last expression is returned.  If there are no expressions
then <tt>#t</tt> is returned.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(and (= 2 2) (&gt; 2 1))                  ==&gt;  #t
(and (= 2 2) (&lt; 2 1))                  ==&gt;  #f
(and 1 2 'c '(f g))                    ==&gt;  (f g)
(and)                                  ==&gt;  #t
</pre></td></tr></table>






<a name="Definition_of_or"></a><a name="Library_syntax_or"></a><a name="index-or"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_or">or</a></b></code><i>  &lt;test1&gt; &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p>The <span class="roman">&lt;test&gt;</span> expressions are evaluated from left to right, and the value of the
first expression that evaluates to a true value (see
section see section <a href="#Booleans">Booleans</a>) is returned.  Any remaining expressions
are not evaluated.  If all expressions evaluate to false values, the
value of the last expression is returned.  If there are no
expressions then <tt>#f</tt> is returned.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(or (= 2 2) (&gt; 2 1))                   ==&gt;  #t
(or (= 2 2) (&lt; 2 1))                   ==&gt;  #t
(or #f #f #f)                          ==&gt;  #f
(or (memq 'b '(a b c)) 
    (/ 3 0))                           ==&gt;  (b c)
</pre></td></tr></table>





<a name="Binding-constructs"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Conditional" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.1 Conditionals" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Sequencing" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.3 Sequencing" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Binding-constructs-1"></a>
<h3 class="subsection">4.2.2 Binding constructs</h3>


<p>The three binding constructs <samp>let</samp>, <samp>let*</samp>, and <samp>letrec</samp>
give Scheme a block structure, like Algol 60.  The syntax of the three
constructs is identical, but they differ in the regions they establish
<a name="index-region-2"></a>
for their variable bindings.  In a <samp>let</samp> expression, the initial
values are computed before any of the variables become bound; in a
<samp>let*</samp> expression, the bindings and evaluations are performed
sequentially; while in a <samp>letrec</samp> expression, all the bindings are in
effect while their initial values are being computed, thus allowing
mutually recursive definitions.
</p>

<a name="Definition_of_let"></a><a name="Library_syntax_let"></a><a name="index-let"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_let">let</a></b></code><i>  <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> should have the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</pre></td></tr></table>

<p>where each <span class="roman">&lt;init&gt;</span> is an expression, and <span class="roman">&lt;body&gt;</span> should be a
sequence of one or more expressions.  It is
an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in the list of variables
being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;init&gt;</span>s are evaluated in the current environment (in some
unspecified order), the <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations
holding the results, the <span class="roman">&lt;body&gt;</span> is evaluated in the extended
environment, and the value(s) of the last expression of <span class="roman">&lt;body&gt;</span>
is(are) returned.  Each binding of a <span class="roman">&lt;variable&gt;</span> has <span class="roman">&lt;body&gt;</span> as its
region.
<a name="index-region-3"></a>
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((x 2) (y 3))
  (* x y))                             ==&gt;  6

(let ((x 2) (y 3))
  (let ((x 7)
        (z (+ x y)))
    (* z x)))                          ==&gt;  35
</pre></td></tr></table>


<p>See also named <samp>let</samp>, section <a href="#Iteration">Iteration</a>.
</p>




<a name="Definition_of_let%2A"></a><a name="Library_syntax_let%2A"></a><a name="index-let_002a"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_let%2A">let*</a></b></code><i>  <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">library syntax</td></tr></table>


<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> should have the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</pre></td></tr></table>

<p>and <span class="roman">&lt;body&gt;</span> should be a sequence of
one or more expressions.
</p>
<p><em>Semantics:</em>
<samp>Let*</samp> is similar to <samp>let</samp>, but the bindings are performed
sequentially from left to right, and the region of a binding indicated
<a name="index-region-4"></a>
by <samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span>)</samp> is that part of the <samp>let*</samp>
expression to the right of the binding.  Thus the second binding is done
in an environment in which the first binding is visible, and so on.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((x 2) (y 3))
  (let* ((x 7)
         (z (+ x y)))
    (* z x)))                          ==&gt;  70
</pre></td></tr></table>






<a name="Definition_of_letrec"></a><a name="Library_syntax_letrec"></a><a name="index-letrec"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_letrec">letrec</a></b></code><i>  <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> should have the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</pre></td></tr></table>

<p>and <span class="roman">&lt;body&gt;</span> should be a sequence of
one or more expressions. It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more
than once in the list of variables being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations holding undefined
values, the <span class="roman">&lt;init&gt;</span>s are evaluated in the resulting environment (in
some unspecified order), each <span class="roman">&lt;variable&gt;</span> is assigned to the result
of the corresponding <span class="roman">&lt;init&gt;</span>, the <span class="roman">&lt;body&gt;</span> is evaluated in the
resulting environment, and the value(s) of the last expression in
<span class="roman">&lt;body&gt;</span> is(are) returned.  Each binding of a <span class="roman">&lt;variable&gt;</span> has the
entire <samp>letrec</samp> expression as its region, making it possible to
<a name="index-region-5"></a>
define mutually recursive procedures.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(letrec ((even?
          (lambda (n)
            (if (zero? n)
                #t
                (odd? (- n 1)))))
         (odd?
          (lambda (n)
            (if (zero? n)
                #f
                (even? (- n 1))))))
  (even? 88))   
                                       ==&gt;  #t
</pre></td></tr></table>


<p>One restriction on <samp>letrec</samp> is very important: it must be possible
to evaluate each <span class="roman">&lt;init&gt;</span> without assigning or referring to the value of any
<span class="roman">&lt;variable&gt;</span>.  If this restriction is violated, then it is an error.  The
restriction is necessary because Scheme passes arguments by value rather than by
name.  In the most common uses of <samp>letrec</samp>, all the <span class="roman">&lt;init&gt;</span>s are
lambda expressions and the restriction is satisfied automatically.
</p>




<a name="Sequencing"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Binding-constructs" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.2 Binding constructs" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Iteration" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.4 Iteration" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Sequencing-1"></a>
<h3 class="subsection">4.2.3 Sequencing</h3>



<a name="Definition_of_begin"></a><a name="Library_syntax_begin"></a><a name="index-begin"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_begin">begin</a></b></code><i>  &lt;expression1&gt; &lt;expression2&gt; &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>

<p>The <span class="roman">&lt;expression&gt;</span>s are evaluated sequentially from left to right,
and the value(s) of the last <span class="roman">&lt;expression&gt;</span> is(are) returned.  This
expression type is used to sequence side effects such as input and
output.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define x 0)

(begin (set! x 5)
       (+ x 1))                        ==&gt;  6

(begin (display &quot;4 plus 1 equals &quot;)
       (display (+ 4 1)))              ==&gt;  <em>unspecified</em>
          <em>and prints</em>  4 plus 1 equals 5
</pre></td></tr></table>





<a name="Iteration"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Sequencing" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.3 Sequencing" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Delayed-evaluation" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.5 Delayed evaluation" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Iteration-1"></a>
<h3 class="subsection">4.2.4 Iteration</h3>




<a name="Definition_of_do"></a><a name="Library_syntax_do"></a><a name="index-do"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_do">do</a></b></code><i> ((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span> <span class="roman">&lt;step1&gt;</span>) &hellip;) (<span class="roman">&lt;test&gt;</span> <span class="roman">&lt;expression&gt;</span> &hellip;) <span class="roman">&lt;command&gt;</span> &hellip;</i><code>)</code></td><td align="right">library syntax</td></tr></table>
<a name="index-do-1"></a>

<p><samp>Do</samp> is an iteration construct.  It specifies a set of variables to
be bound, how they are to be initialized at the start, and how they are
to be updated on each iteration.  When a termination condition is met,
the loop exits after evaluating the <span class="roman">&lt;expression&gt;</span>s.
</p>
<p><samp>Do</samp> expressions are evaluated as follows:
The <span class="roman">&lt;init&gt;</span> expressions are evaluated (in some unspecified order),
the <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations, the results of the
<span class="roman">&lt;init&gt;</span> expressions are stored in the bindings of the
<span class="roman">&lt;variable&gt;</span>s, and then the iteration phase begins.
</p>
<p>Each iteration begins by evaluating <span class="roman">&lt;test&gt;</span>; if the result is
false (see section see section <a href="#Booleans">Booleans</a>), then the <span class="roman">&lt;command&gt;</span>
expressions are evaluated in order for effect, the <span class="roman">&lt;step&gt;</span>
expressions are evaluated in some unspecified order, the
<span class="roman">&lt;variable&gt;</span>s are bound to fresh locations, the results of the
<span class="roman">&lt;step&gt;</span>s are stored in the bindings of the
<span class="roman">&lt;variable&gt;</span>s, and the next iteration begins.
</p>
<p>If <span class="roman">&lt;test&gt;</span> evaluates to a true value, then the
<span class="roman">&lt;expression&gt;</span>s are evaluated from left to right and the value(s) of
the last <span class="roman">&lt;expression&gt;</span> is(are) returned.  If no <span class="roman">&lt;expression&gt;</span>s
are present, then the value of the <samp>do</samp> expression is unspecified.
</p>
<p>The region of the binding of a <span class="roman">&lt;variable&gt;</span>
<a name="index-region-6"></a>
consists of the entire <samp>do</samp> expression except for the <span class="roman">&lt;init&gt;</span>s.
It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in the
list of <samp>do</samp> variables.
</p>
<p>A <span class="roman">&lt;step&gt;</span> may be omitted, in which case the effect is the
same as if <samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span> <span class="roman">&lt;variable&gt;</span>)</samp> had
been written instead of <samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span>)</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(do ((vec (make-vector 5))
     (i 0 (+ i 1)))
    ((= i 5) vec)
  (vector-set! vec i i))               ==&gt;  #(0 1 2 3 4)

(let ((x '(1 3 5 7 9)))
  (do ((x x (cdr x))
       (sum 0 (+ sum (car x))))
      ((null? x) sum)))                ==&gt;  25
</pre></td></tr></table>





<a name="Definition_of_let"></a><a name="Library_syntax_let"></a><a name="index-let-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_let">let</a></b></code><i>  <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">library syntax</td></tr></table>


<p>&ldquo;Named <samp>let</samp>&rdquo; is a variant on the syntax of <code>let</code> which provides
<a name="index-let-2"></a>
a more general looping construct than <samp>do</samp> and may also be used to express
recursions.
It has the same syntax and semantics as ordinary <samp>let</samp>
except that <span class="roman">&lt;variable&gt;</span> is bound within <span class="roman">&lt;body&gt;</span> to a procedure
whose formal arguments are the bound variables and whose body is
<span class="roman">&lt;body&gt;</span>.  Thus the execution of <span class="roman">&lt;body&gt;</span> may be repeated by
invoking the procedure named by <span class="roman">&lt;variable&gt;</span>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let loop ((numbers '(3 -2 1 6 -5))
           (nonneg '())
           (neg '()))
  (cond ((null? numbers) (list nonneg neg))
        ((&gt;= (car numbers) 0)
         (loop (cdr numbers)
               (cons (car numbers) nonneg)
               neg))
        ((&lt; (car numbers) 0)
         (loop (cdr numbers)
               nonneg
               (cons (car numbers) neg)))))   
          ==&gt;  ((6 1 3) (-5 -2))
</pre></td></tr></table>





<a name="Delayed-evaluation"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Iteration" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.4 Iteration" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Quasiquotation" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.2.6 Quasiquotation" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Delayed-evaluation-1"></a>
<h3 class="subsection">4.2.5 Delayed evaluation</h3>



<a name="Definition_of_delay"></a><a name="Library_syntax_delay"></a><a name="index-delay"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_syntax_delay">delay</a></b></code><i>  <span class="roman">&lt;expression&gt;</span></i><code>)</code></td><td align="right">library syntax</td></tr></table>



<p>The <samp>delay</samp> construct is used together with the procedure <code>force</code> to
<a name="index-force"></a>
implement <em>lazy evaluation</em> or <em>call by need</em>.
<a name="index-call-by-need"></a>
<a name="index-lazy-evaluation"></a>
<tt>(delay <span class="roman">&lt;expression&gt;</span>)</tt> returns an object called a
<em>promise</em> which at some point in the future may be asked (by
<a name="index-promise"></a>
the <samp>force</samp> procedure) 
 to evaluate
<span class="roman">&lt;expression&gt;</span>, and deliver the resulting value.
The effect of <span class="roman">&lt;expression&gt;</span> returning multiple values
is unspecified.
</p>
<p>See the description of <samp>force</samp> (section see section <a href="#Control-features">Control features</a>) for a
more complete description of <samp>delay</samp>.
</p>



<a name="Quasiquotation"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Delayed-evaluation" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.5 Delayed evaluation" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Macros" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.3 Macros" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.2 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Quasiquotation-1"></a>
<h3 class="subsection">4.2.6 Quasiquotation</h3>




<a name="Definition_of_quasiquote"></a><a name="Syntax_quasiquote"></a><a name="index-quasiquote"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_quasiquote">quasiquote</a></b></code><i>  <span class="roman">&lt;qq template&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>
<a name="index-_0060"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><tt>`</tt></b></code><i><span class="roman">&lt;qq template&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>


<p>&ldquo;Backquote&rdquo; or &ldquo;quasiquote&rdquo; expressions are useful
<a name="index-backquote"></a>
for constructing a list or vector structure when most but not all of the
desired structure is known in advance.  If no
commas appear within the <span class="roman">&lt;qq template&gt;</span>, the result of
<a name="index-comma"></a>
evaluating
<tt>&lsquo;</tt><span class="roman">&lt;qq template&gt;</span> is equivalent to the result of evaluating
<tt>'</tt><span class="roman">&lt;qq template&gt;</span>.  If a comma appears within the
<a name="index-_002c"></a>
<span class="roman">&lt;qq template&gt;</span>, however, the expression following the comma is
evaluated (&ldquo;unquoted&rdquo;) and its result is inserted into the structure
instead of the comma and the expression.  If a comma appears followed
immediately by an at-sign (@), then the following
<a name="index-_002c_0040"></a>
expression must evaluate to a list; the opening and closing parentheses
of the list are then &ldquo;stripped away&rdquo; and the elements of the list are
inserted in place of the comma at-sign expression sequence.  A comma
at-sign should only appear within a list or vector <span class="roman">&lt;qq template&gt;</span>.
</p>


<table><tr><td>&nbsp;</td><td><pre class="format">&lsquo;(list ,(+ 1 2) 4)                     ==&gt;  (list 3 4)
(let ((name 'a)) &lsquo;(list ,name ',name))           
          ==&gt;  (list a (quote a))
&lsquo;(a ,(+ 1 2) ,@(map abs '(4 -5 6)) b)           
          ==&gt;  (a 3 4 5 6 b)
&lsquo;((<samp>foo</samp> ,(- 10 3)) ,@(cdr '(c)) . ,(car '(cons)))           
          ==&gt;  ((foo 7) . cons)
&lsquo;#(10 5 ,(sqrt 4) ,@(map sqrt '(16 9)) 8)           
          ==&gt;  #(10 5 2 4 3 8)
</pre></td></tr></table>


<p>Quasiquote forms may be nested.  Substitutions are made only for
unquoted components appearing at the same nesting level
as the outermost backquote.  The nesting level increases by one inside
each successive quasiquotation, and decreases by one inside each
unquotation.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">&lsquo;(a &lsquo;(b ,(+ 1 2) ,(foo ,(+ 1 3) d) e) f)           
          ==&gt;  (a &lsquo;(b ,(+ 1 2) ,(foo 4 d) e) f)
(let ((name1 'x)
      (name2 'y))
  &lsquo;(a &lsquo;(b ,,name1 ,',name2 d) e))           
          ==&gt;  (a &lsquo;(b ,x ,'y d) e)
</pre></td></tr></table>


<p>The two notations
 <tt>&lsquo;</tt><span class="roman">&lt;qq template&gt;</span> and <tt>(quasiquote <span class="roman">&lt;qq template&gt;</span>)</tt>
 are identical in all respects.
 <samp>,<span class="roman">&lt;expression&gt;</span></samp> is identical to <samp>(unquote <span class="roman">&lt;expression&gt;</span>)</samp>,
 and
 <samp>,@<span class="roman">&lt;expression&gt;</span></samp> is identical to <samp>(unquote-splicing <span class="roman">&lt;expression&gt;</span>)</samp>.
The external syntax generated by <code>write</code> for two-element lists whose
<a name="index-write"></a>
car is one of these symbols may vary between implementations.
</p>
<a name="index-_0060-1"></a>


<table><tr><td>&nbsp;</td><td><pre class="format">(quasiquote (list (unquote (+ 1 2)) 4))           
          ==&gt;  (list 3 4)
'(quasiquote (list (unquote (+ 1 2)) 4))           
          ==&gt;  &lsquo;(list ,(+ 1 2) 4)
     <em></em>i.e., (quasiquote (list (unquote (+ 1 2)) 4))
</pre></td></tr></table>


<p>Unpredictable behavior can result if any of the symbols
<code>quasiquote</code>, <code>unquote</code>, or <code>unquote-splicing</code> appear in
<a name="index-unquote_002dsplicing"></a>
<a name="index-unquote"></a>
<a name="index-quasiquote-1"></a>
positions within a <span class="roman">&lt;qq template&gt;</span> otherwise than as described above.
</p>


<a name="Macros"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Quasiquotation" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.2.6 Quasiquotation" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Binding-constructs-for-syntactic-keywords" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.3.1 Binding constructs for syntactic keywords" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expressions" title="Up section"><img src="button-up.png" border="0" alt="Up: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Macros-1"></a>
<h2 class="section">4.3 Macros</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Binding-constructs-for-syntactic-keywords">4.3.1 Binding constructs for syntactic keywords</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Pattern-language">4.3.2 Pattern language</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
</table>



<p>Scheme programs can define and use new derived expression types,
 called <em>macros</em>.
<a name="index-macro"></a>
Program-defined expression types have the syntax
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(<span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;datum&gt;</span> ...)
</pre></td></tr></table>

<p>where <span class="roman">&lt;keyword&gt;</span> is an identifier that uniquely determines the
expression type.  This identifier is called the <em>syntactic
keyword</em>, or simply <em>keyword</em>, of the macro.  The
<a name="index-macro-keyword"></a>
<a name="index-keyword"></a>
<a name="index-syntactic-keyword-2"></a>
number of the <span class="roman">&lt;datum&gt;</span>s, and their syntax, depends on the
expression type.
</p>
<p>Each instance of a macro is called a <em>use</em>
<a name="index-macro-use"></a>
of the macro.
The set of rules that specifies
how a use of a macro is transcribed into a more primitive expression
is called the <em>transformer</em>
<a name="index-macro-transformer"></a>
of the macro.
</p>
<p>The macro definition facility consists of two parts:
</p>


<ul>
<li>
A set of expressions used to establish that certain identifiers
are macro keywords, associate them with macro transformers, and control
the scope within which a macro is defined, and

</li><li>
a pattern language for specifying macro transformers.

</li></ul>


<p>The syntactic keyword of a macro may shadow variable bindings, and local
variable bindings may shadow keyword bindings.    All macros
<a name="index-keyword-1"></a>
defined using the pattern language  are &ldquo;hygienic&rdquo; and &ldquo;referentially
transparent&rdquo; and thus preserve Scheme's lexical scoping [Kohlbecker86], [
hygienic], [Bawden88], [macrosthatwork], [syntacticabstraction]:
</p>
<a name="index-hygienic"></a>

<a name="index-referentially-transparent"></a>




<ul>
<li>
If a macro transformer inserts a binding for an identifier
(variable or keyword), the identifier will in effect be renamed
throughout its scope to avoid conflicts with other identifiers.
Note that a <code>define</code> at top level may or may not introduce a binding;
see section <a href="#Definitions">Definitions</a>.

</li><li>
If a macro transformer inserts a free reference to an
identifier, the reference refers to the binding that was visible
where the transformer was specified, regardless of any local
bindings that may surround the use of the macro.


</li></ul>

<a name="index-define"></a>



<a name="Binding-constructs-for-syntactic-keywords"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Macros" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.3 Macros" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Pattern-language" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 4.3.2 Pattern language" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Macros" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.3 Macros" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Binding-constructs-for-syntactic-keywords-1"></a>
<h3 class="subsection">4.3.1 Binding constructs for syntactic keywords</h3>



<p><samp>Let-syntax</samp> and <samp>letrec-syntax</samp> are
analogous to <samp>let</samp> and <samp>letrec</samp>, but they bind
syntactic keywords to macro transformers instead of binding variables
to locations that contain values.  Syntactic keywords may also be
bound at top level; see section <a href="#Syntax-definitions">Syntax definitions</a>.
</p>

<a name="Definition_of_let-syntax"></a><a name="Syntax_let-syntax"></a><a name="index-let_002dsyntax"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_let-syntax">let-syntax</a></b></code><i>  <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> should have the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">((<span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;transformer spec&gt;</span>) &hellip;)
</pre></td></tr></table>

<p>Each <span class="roman">&lt;keyword&gt;</span> is an identifier,
each <span class="roman">&lt;transformer spec&gt;</span> is an instance of <samp>syntax-rules</samp>, and
<span class="roman">&lt;body&gt;</span> should be a sequence of one or more expressions.  It is an error
for a <span class="roman">&lt;keyword&gt;</span> to appear more than once in the list of keywords
being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;body&gt;</span> is expanded in the syntactic environment
obtained by extending the syntactic environment of the
<samp>let-syntax</samp> expression with macros whose keywords are
the <span class="roman">&lt;keyword&gt;</span>s, bound to the specified transformers.
Each binding of a <span class="roman">&lt;keyword&gt;</span> has <span class="roman">&lt;body&gt;</span> as its region.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let-syntax ((when (syntax-rules ()
                     ((when test stmt1 stmt2 ...)
                      (if test
                          (begin stmt1
                                 stmt2 ...))))))
  (let ((if #t))
    (when if (set! if 'now))
    if))                               ==&gt;  now

(let ((x 'outer))
  (let-syntax ((m (syntax-rules () ((m) x))))
    (let ((x 'inner))
      (m))))                           ==&gt;  outer
</pre></td></tr></table>





<a name="Definition_of_letrec-syntax"></a><a name="Syntax_letrec-syntax"></a><a name="index-letrec_002dsyntax"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Syntax_letrec-syntax">letrec-syntax</a></b></code><i>  <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></i><code>)</code></td><td align="right">syntax</td></tr></table>

<p><em>Syntax:</em>
Same as for <samp>let-syntax</samp>.
</p>
<p><em>Semantics:</em>
 The <span class="roman">&lt;body&gt;</span> is expanded in the syntactic environment obtained by
extending the syntactic environment of the <samp>letrec-syntax</samp>
expression with macros whose keywords are the
<span class="roman">&lt;keyword&gt;</span>s, bound to the specified transformers.
Each binding of a <span class="roman">&lt;keyword&gt;</span> has the <span class="roman">&lt;bindings&gt;</span>
as well as the <span class="roman">&lt;body&gt;</span> within its region,
so the transformers can
transcribe expressions into uses of the macros
introduced by the <samp>letrec-syntax</samp> expression.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(letrec-syntax
  ((my-or (syntax-rules ()
            ((my-or) #f)
            ((my-or e) e)
            ((my-or e1 e2 ...)
             (let ((temp e1))
               (if temp
                   temp
                   (my-or e2 ...)))))))
  (let ((x #f)
        (y 7)
        (temp 8)
        (let odd?)
        (if even?))
    (my-or x
           (let temp)
           (if y)
           y)))                        ==&gt;  7
</pre></td></tr></table>




<a name="Pattern-language"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Binding-constructs-for-syntactic-keywords" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.3.1 Binding constructs for syntactic keywords" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Macros" title="Up section"><img src="button-up.png" border="0" alt="Up: 4.3 Macros" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Pattern-language-1"></a>
<h3 class="subsection">4.3.2 Pattern language</h3>



<p>A <span class="roman">&lt;transformer spec&gt;</span> has the following form:
</p>

<a name="Definition_of_syntax-rules"></a><a name="_syntax-rules"></a><a name="index-syntax_002drules"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:_syntax-rules">syntax-rules</a></b></code><i>  <span class="roman">&lt;literals&gt;</span> <span class="roman">&lt;syntax rule&gt;</span> &hellip;</i><code>)</code></td><td align="right"></td></tr></table>

<p><em>Syntax:</em>
<span class="roman">&lt;Literals&gt;</span> is a list of identifiers and each <span class="roman">&lt;syntax rule&gt;</span>
should be of the form
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(<span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;template&gt;</span>)
</pre></td></tr></table>

<p>The <span class="roman">&lt;pattern&gt;</span> in a <span class="roman">&lt;syntax rule&gt;</span> is a list <span class="roman">&lt;pattern&gt;</span>
that begins with the keyword for the macro.
</p>
<p>A <span class="roman">&lt;pattern&gt;</span> is either an identifier, a constant, or one of the
following
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(<span class="roman">&lt;pattern&gt;</span> &hellip;)
(<span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;pattern&gt;</span> &hellip; . <span class="roman">&lt;pattern&gt;</span>)
(<span class="roman">&lt;pattern&gt;</span> &hellip; <span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;ellipsis&gt;</span>)
#(<span class="roman">&lt;pattern&gt;</span> &hellip;)
#(<span class="roman">&lt;pattern&gt;</span> &hellip; <span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;ellipsis&gt;</span>)
</pre></td></tr></table>

<p>and a template is either an identifier, a constant, or one of the following
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(<span class="roman">&lt;element&gt;</span> &hellip;)
(<span class="roman">&lt;element&gt;</span> <span class="roman">&lt;element&gt;</span> &hellip; . <span class="roman">&lt;template&gt;</span>)
#(<span class="roman">&lt;element&gt;</span> &hellip;)
</pre></td></tr></table>

<p>where an <span class="roman">&lt;element&gt;</span> is a <span class="roman">&lt;template&gt;</span> optionally
followed by an <span class="roman">&lt;ellipsis&gt;</span> and
an <span class="roman">&lt;ellipsis&gt;</span> is the identifier &ldquo;<samp>...</samp>&rdquo; (which cannot be used as
an identifier in either a template or a pattern).
<a name="index-_002e_002e_002e-1"></a>
</p>
<p><em>Semantics:</em> An instance of <samp>syntax-rules</samp> produces a new macro
transformer by specifying a sequence of hygienic rewrite rules.  A use
of a macro whose keyword is associated with a transformer specified by
<samp>syntax-rules</samp> is matched against the patterns contained in the
<span class="roman">&lt;syntax rule&gt;</span>s, beginning with the leftmost <span class="roman">&lt;syntax rule&gt;</span>.
When a match is found, the macro use is transcribed hygienically
according to the template.
</p>
<p>An identifier that appears in the pattern of a <span class="roman">&lt;syntax rule&gt;</span> is
a <em>pattern variable</em>, unless it is the keyword that begins the pattern,
is listed in <span class="roman">&lt;literals&gt;</span>, or is the identifier &ldquo;<samp>...</samp>&rdquo;.
Pattern variables match arbitrary input elements and
are used to refer to elements of the input in the template.  It is an
error for the same pattern variable to appear more than once in a
<span class="roman">&lt;pattern&gt;</span>.
</p>
<p>The keyword at the beginning of the pattern in a
<span class="roman">&lt;syntax rule&gt;</span> is not involved in the matching and
is not considered a pattern variable or literal identifier.
</p>

<blockquote><p><em>Rationale:</em>
The scope of the keyword is determined by the expression or syntax
definition that binds it to the associated macro transformer.
If the keyword were a pattern variable or literal
identifier, then
the template that follows the pattern would be within its scope
regardless of whether the keyword were bound by <samp>let-syntax</samp>
or by <samp>letrec-syntax</samp>.
</p></blockquote>


<p>Identifiers that appear in <span class="roman">&lt;literals&gt;</span> are interpreted as literal
identifiers to be matched against corresponding subforms of the input.
A subform
in the input matches a literal identifier if and only if it is an
identifier
and either both its occurrence in the macro expression and its
occurrence in the macro definition have the same lexical binding, or
the two identifiers are equal and both have no lexical binding.
</p>

<p>A subpattern followed by <samp>...</samp> can match zero or more elements of the
input.  It is an error for <samp>...</samp> to appear in <span class="roman">&lt;literals&gt;</span>.
Within a pattern the identifier <samp>...</samp> must follow the last element of
a nonempty sequence of subpatterns.
</p>
<p>More formally, an input form F matches a pattern P if and only if:
</p>


<ul>
<li>
P is a non-literal identifier; or

</li><li>
P is a literal identifier and F is an identifier with the same
binding; or

</li><li>
P is a list <samp>(P_1 &hellip; P_n)</samp> and F is a
list of n
forms that match P_1 through P_n, respectively; or

</li><li>
P is an improper list
<samp>(P_1 P_2 &hellip; P_n . P_n+1)</samp>
and F is a list or
improper list of n or more forms that match P_1 through P_n,
respectively, and whose nth &ldquo;cdr&rdquo; matches P_n+1; or

</li><li>
P is of the form
<samp>(P_1 &hellip; P_n P_n+1 &lt;ellipsis&gt;)</samp>
where &lt;ellipsis&gt; is the identifier <samp>...</samp>
and F is
a proper list of at least n forms, the first n of which match
P_1 through P_n, respectively, and each remaining element of F
matches P_n+1; or

</li><li>
P is a vector of the form <samp>#(P_1 &hellip; P_n)</samp>
and F is a vector
of n forms that match P_1 through P_n; or

</li><li>
P is of the form
<samp>#(P_1 &hellip; P_n P_n+1 &lt;ellipsis&gt;)</samp>
where &lt;ellipsis&gt; is the identifier <samp>...</samp>
and F is a vector of n
or more forms the first n of which match
P_1 through P_n, respectively, and each remaining element of F
matches P_n+1; or

</li><li>
P is a datum and F is equal to P in the sense of
the <samp>equal?</samp> procedure.

</li></ul>


<p>It is an error to use a macro keyword, within the scope of its
binding, in an expression that does not match any of the patterns.
</p>
<p>When a macro use is transcribed according to the template of the
matching <span class="roman">&lt;syntax rule&gt;</span>, pattern variables that occur in the
template are replaced by the subforms they match in the input.
Pattern variables that occur in subpatterns followed by one or more
instances of the identifier
<samp>...</samp> are allowed only in subtemplates that are
followed by as many instances of <samp>...</samp>.
They are replaced in the
output by all of the subforms they match in the input, distributed as
indicated.  It is an error if the output cannot be built up as
specified.
</p>

<p>Identifiers that appear in the template but are not pattern variables
or the identifier
<samp>...</samp> are inserted into the output as literal identifiers.  If a
literal identifier is inserted as a free identifier then it refers to the
binding of that identifier within whose scope the instance of
<samp>syntax-rules</samp> appears.
If a literal identifier is inserted as a bound identifier then it is
in effect renamed to prevent inadvertent captures of free identifiers.
</p>
<p>As an example, if <code>let</code> and <code>cond</code> are defined as in
<a name="index-cond-1"></a>
<a name="index-let-3"></a>
section <a href="#Derived-expression-type">Derived expression types</a> then they are hygienic (as required) and
the following is not an error.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((=&gt; #f))
  (cond (#t =&gt; 'ok)))                  ==&gt; ok
</pre></td></tr></table>


<p>The macro transformer for <samp>cond</samp> recognizes <samp>=&gt;</samp>
as a local variable, and hence an expression, and not as the
top-level identifier <samp>=&gt;</samp>, which the macro transformer treats
as a syntactic keyword.  Thus the example expands into
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((=&gt; #f))
  (if #t (begin =&gt; 'ok)))
</pre></td></tr></table>


<p>instead of
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((=&gt; #f))
  (let ((temp #t))
    (if temp ('ok temp))))
</pre></td></tr></table>


<p>which would result in an invalid procedure call.
</p>


         


<a name="Program-structure"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Pattern-language" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 4.3.2 Pattern language" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Programs" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5.1 Programs" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Expressions" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 4. Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Program-structure-1"></a>
<h1 class="chapter">5. Program structure</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Programs">5.1 Programs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    
</td></tr>
<tr><td align="left" valign="top"><a href="#Definitions">5.2 Definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 
</td></tr>
<tr><td align="left" valign="top"><a href="#Syntax-definitions">5.3 Syntax definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          
</td></tr>
</table>



<a name="Programs"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Program-structure" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Definitions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5.2 Definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Up section"><img src="button-up.png" border="0" alt="Up: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Programs-1"></a>
<h2 class="section">5.1 Programs</h2>


<p>A Scheme program consists of a sequence of expressions, definitions,
and syntax definitions.
Expressions are described in chapter <a href="#Expressions">Expressions</a>;
definitions and syntax definitions are the subject of the rest of the
present chapter.
</p>
<p>Programs are typically stored in files or entered interactively to a
running Scheme system, although other paradigms are possible;
questions of user interface lie outside the scope of this report.
(Indeed, Scheme would still be useful as a notation for expressing
computational methods even in the absence of a mechanical
implementation.)
</p>
<p>Definitions and syntax definitions occurring at the top level of a program
can be interpreted
declaratively.
They cause bindings to be created in the top level
environment or modify the value of existing top-level bindings.
Expressions occurring at the top level of a program are
interpreted imperatively; they are executed in order when the program is
invoked or loaded, and typically perform some kind of initialization.
</p>
<p>At the top level of a program <tt>(begin <span class="roman">&lt;form1&gt;</span> &hellip;)</tt> is
equivalent to the sequence of expressions, definitions, and syntax definitions
that form the body of the <code>begin</code>.
<a name="index-begin-1"></a>
</p>


<a name="Definitions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Programs" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5.1 Programs" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top-level-definitions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5.2.1 Top level definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Up section"><img src="button-up.png" border="0" alt="Up: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Definitions-1"></a>
<h2 class="section">5.2 Definitions</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Top-level-definitions">5.2.1 Top level definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       
</td></tr>
<tr><td align="left" valign="top"><a href="#Internal-definitions">5.2.2 Internal definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        
</td></tr>
</table>



<p>Definitions are valid in some, but not all, contexts where expressions
are allowed.  They are valid only at the top level of a <span class="roman">&lt;program&gt;</span>
and at the beginning of a <span class="roman">&lt;body&gt;</span>.
</p>
<a name="index-definition"></a>

<p>A definition should have one of the following forms:
<a name="index-define-1"></a>
</p>


<ul>
<li> <tt>(define <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)</tt>

</li><li> <tt>(define (<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;formals&gt;</span>) <span class="roman">&lt;body&gt;</span>)</tt>

<p><span class="roman">&lt;Formals&gt;</span> should be either a
sequence of zero or more variables, or a sequence of one or more
variables followed by a space-delimited period and another variable (as
in a lambda expression).  This form is equivalent to
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(define <span class="roman">&lt;variable&gt;</span>
  (lambda (<span class="roman">&lt;formals&gt;</span>) <span class="roman">&lt;body&gt;</span>))<span class="roman">.</span>
</pre></td></tr></table>


</li><li> <tt>(define (<span class="roman">&lt;variable&gt;</span> . <span class="roman">&lt;formal&gt;</span>) <span class="roman">&lt;body&gt;</span>)</tt>

<p><span class="roman">&lt;Formal&gt;</span> should be a single
variable.  This form is equivalent to
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(define <span class="roman">&lt;variable&gt;</span>
  (lambda <span class="roman">&lt;formal&gt;</span> <span class="roman">&lt;body&gt;</span>))<span class="roman">.</span>
</pre></td></tr></table>



</li></ul>


<a name="Top-level-definitions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Definitions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5.2 Definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Internal-definitions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5.2.2 Internal definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Definitions" title="Up section"><img src="button-up.png" border="0" alt="Up: 5.2 Definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Top-level-definitions-1"></a>
<h3 class="subsection">5.2.1 Top level definitions</h3>


<p>At the top level of a program, a definition
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(define <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)
</pre></td></tr></table>

<p>has essentially the same effect as the assignment expression
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">
(set! <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)
</pre></td></tr></table>

<p>if <span class="roman">&lt;variable&gt;</span> is bound.  If <span class="roman">&lt;variable&gt;</span> is not bound,
however, then the definition will bind <span class="roman">&lt;variable&gt;</span> to a new
location before performing the assignment, whereas it would be an error
to perform a <samp>set!</samp> on an unbound variable.
<a name="index-unbound-2"></a>
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define add3
  (lambda (x) (+ x 3)))
(add3 3)                               ==&gt;  6
(define first car)
(first '(1 2))                         ==&gt;  1
</pre></td></tr></table>


<p>Some implementations of Scheme use an initial environment in
which all possible variables are bound to locations, most of
which contain undefined values.  Top level definitions in
such an implementation are truly equivalent to assignments.
</p>



<a name="Internal-definitions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Top-level-definitions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5.2.1 Top level definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Syntax-definitions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 5.3 Syntax definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Definitions" title="Up section"><img src="button-up.png" border="0" alt="Up: 5.2 Definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Internal-definitions-1"></a>
<h3 class="subsection">5.2.2 Internal definitions</h3>



<p>Definitions may occur at the
beginning of a <span class="roman">&lt;body&gt;</span> (that is, the body of a <code>lambda</code>,
<a name="index-lambda-1"></a>
<code>let</code>, <code>let*</code>, <code>letrec</code>, <code>let-syntax</code>, or <code>letrec-syntax</code>
<a name="index-letrec_002dsyntax-1"></a>
<a name="index-let_002dsyntax-1"></a>
<a name="index-letrec-1"></a>
<a name="index-let_002a-1"></a>
<a name="index-let-4"></a>
expression or that of a definition of an appropriate form).
Such definitions are known as <em>internal definitions</em>  as opposed to the top level definitions described above.
<a name="index-internal-definition"></a>
The variable defined by an internal definition is local to the
<span class="roman">&lt;body&gt;</span>.  That is, <span class="roman">&lt;variable&gt;</span> is bound rather than assigned,
and the region of the binding is the entire <span class="roman">&lt;body&gt;</span>.  For example,
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(let ((x 5))
  (define foo (lambda (y) (bar x y)))
  (define bar (lambda (a b) (+ (* a b) a)))
  (foo (+ x 3)))                       ==&gt;  45
</pre></td></tr></table>


<p>A <span class="roman">&lt;body&gt;</span> containing internal definitions can always be converted
into a completely equivalent <samp>letrec</samp> expression.  For example, the
<samp>let</samp> expression in the above example is equivalent to
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(let ((x 5))
  (letrec ((foo (lambda (y) (bar x y)))
           (bar (lambda (a b) (+ (* a b) a))))
    (foo (+ x 3))))
</pre></td></tr></table>


<p>Just as for the equivalent <samp>letrec</samp> expression, it must be
possible to evaluate each <span class="roman">&lt;expression&gt;</span> of every internal
definition in a <span class="roman">&lt;body&gt;</span> without assigning or referring to
the value of any <span class="roman">&lt;variable&gt;</span> being defined.
</p>
<p>Wherever an internal definition may occur
<tt>(begin <span class="roman">&lt;definition1&gt;</span> &hellip;)</tt>
is equivalent to the sequence of definitions
that form the body of the <code>begin</code>.
<a name="index-begin-2"></a>
</p>
<a name="Syntax-definitions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Internal-definitions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5.2.2 Internal definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Program-structure" title="Up section"><img src="button-up.png" border="0" alt="Up: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Syntax-definitions-1"></a>
<h2 class="section">5.3 Syntax definitions</h2>


<p>Syntax definitions are valid only at the top level of a <span class="roman">&lt;program&gt;</span>.
</p>
<a name="index-syntax-definition"></a>
<p>They have the following form:
<a name="index-define_002dsyntax"></a>
</p>
<p><tt>(define-syntax <span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;transformer spec&gt;</span>)</tt>
</p>
<p><span class="roman">&lt;Keyword&gt;</span> is an identifier, and
the <span class="roman">&lt;transformer spec&gt;</span> should be an instance of <code>syntax-rules</code>.
<a name="index-syntax_002drules-1"></a>
The top-level syntactic environment is extended by binding the
<span class="roman">&lt;keyword&gt;</span> to the specified transformer.
</p>
<p>There is no <samp>define-syntax</samp> analogue of internal definitions.
</p>



<p>Although macros may expand into definitions and syntax definitions in
any context that permits them, it is an error for a definition or syntax
definition to shadow a syntactic keyword whose meaning is needed to
determine whether some form in the group of forms that contains the
shadowing definition is in fact a definition, or, for internal definitions,
is needed to determine the boundary between the group and the expressions
that follow the group.  For example, the following are errors:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define define 3)

(begin (define begin list))

(let-syntax
  ((foo (syntax-rules ()
          ((foo (proc args ...) body ...)
           (define proc
             (lambda (args ...)
               body ...))))))
  (let ((x 3))
    (foo (plus x y) (+ x y))
    (define foo x)
    (plus foo x)))
</pre></td></tr></table>



       


<a name="Standard-procedures"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Syntax-definitions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 5.3 Syntax definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Equivalence-predicates" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.1 Equivalence predicates" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Program-structure" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 5. Program structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Standard-procedures-1"></a>
<h1 class="chapter">6. Standard procedures</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      
</td></tr>
<tr><td align="left" valign="top"><a href="#Numbers">6.2 Numbers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-data-types">6.3 Other data types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
<tr><td align="left" valign="top"><a href="#Control-features">6.4 Control features</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
<tr><td align="left" valign="top"><a href="#Eval">6.5 Eval</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                        
</td></tr>
<tr><td align="left" valign="top"><a href="#Input-and-output">6.6 Input and output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
</table>





<a name="index-initial-environment"></a>

<a name="index-top-level-environment-1"></a>

<a name="index-library-procedure"></a>

<p>This chapter describes Scheme's built-in procedures.  The initial (or
&ldquo;top level&rdquo;) Scheme environment starts out with a number of variables
bound to locations containing useful values, most of which are primitive
procedures that manipulate data.  For example, the variable <samp>abs</samp> is
bound to (a location initially containing) a procedure of one argument
that computes the absolute value of a number, and the variable <samp>+</samp>
is bound to a procedure that computes sums.  Built-in procedures that
can easily be written in terms of other built-in procedures are identified as
&ldquo;library procedures&rdquo;.
</p>
<p>A program may use a top-level definition to bind any variable.  It may
subsequently alter any such binding by an assignment (see see section <a href="#Assignments">Assignments</a>).
These operations do not modify the behavior of Scheme's built-in
procedures.  Altering any top-level binding that has not been introduced by a
definition has an unspecified effect on the behavior of the built-in procedures.
</p>
<a name="Equivalence-predicates"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Standard-procedures" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Equivalence-predicates-1"></a>
<h2 class="section">6.1 Equivalence predicates</h2>



<p>A <em>predicate</em> is a procedure that always returns a boolean
<a name="index-predicate"></a>
value (<tt>#t</tt> or <tt>#f</tt>).  An <em>equivalence predicate</em> is
<a name="index-equivalence-predicate"></a>
the computational analogue of a mathematical equivalence relation (it is
symmetric, reflexive, and transitive).  Of the equivalence predicates
described in this section, <samp>eq?</samp> is the finest or most
discriminating, and <samp>equal?</samp> is the coarsest.  <samp>Eqv?</samp> is
slightly less discriminating than <samp>eq?</samp>.  
</p>



<a name="Definition_of_eqv?"></a><a name="Procedure_eqv?"></a><a name="index-eqv_003f-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_eqv?">eqv?</a></b></code><i>  obj1 obj2</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>The <samp>eqv?</samp> procedure defines a useful equivalence relation on objects.
Briefly, it returns <tt>#t</tt> if <var>obj1</var> and <var>obj2</var> should
normally be regarded as the same object.  This relation is left slightly
open to interpretation, but the following partial specification of
<samp>eqv?</samp> holds for all implementations of Scheme.
</p>
<p>The <samp>eqv?</samp> procedure returns <tt>#t</tt> if:
</p>


<ul>
<li>
<var>obj1</var> and <var>obj2</var> are both <tt>#t</tt> or both <tt>#f</tt>.

</li><li>
<var>obj1</var> and <var>obj2</var> are both symbols and


<table><tr><td>&nbsp;</td><td><pre class="format">(string=? (symbol-&gt;string obj1)
          (symbol-&gt;string obj2))
                                  ==&gt;  #t
</pre></td></tr></table>



<blockquote><p><em>Note:</em> 
This assumes that neither <var>obj1</var> nor <var>obj2</var> is an &ldquo;uninterned
symbol&rdquo; as alluded to in section <a href="#Symbols">Symbols</a>.  This report does
not presume to specify the behavior of <samp>eqv?</samp> on implementation-dependent
extensions.
</p></blockquote>


</li><li>
<var>obj1</var> and <var>obj2</var> are both numbers, are numerically
equal (see <samp>=</samp>, section see section <a href="#Numbers">Numbers</a>), and are either both
exact or both inexact.

</li><li>
<var>obj1</var> and <var>obj2</var> are both characters and are the same
character according to the <samp>char=?</samp> procedure
(section see section <a href="#Characters">Characters</a>).

</li><li>
both <var>obj1</var> and <var>obj2</var> are the empty list.

</li><li>
<var>obj1</var> and <var>obj2</var> are pairs, vectors, or strings that denote the
same locations in the store (section see section <a href="#Storage-model">Storage model</a>).

</li><li>
<var>obj1</var> and <var>obj2</var> are procedures whose location tags are
equal (section see section <a href="#Procedures">Procedures</a>).

</li></ul>

<a name="index-inexact"></a>
<a name="index-exact"></a>

<p>The <samp>eqv?</samp> procedure returns <tt>#f</tt> if:
</p>


<ul>
<li>
<var>obj1</var> and <var>obj2</var> are of different types
(section see section <a href="#Disjointness-of-types">Disjointness of types</a>).

</li><li>
one of <var>obj1</var> and <var>obj2</var> is <tt>#t</tt> but the other is
<tt>#f</tt>.

</li><li>
<var>obj1</var> and <var>obj2</var> are symbols but


<table><tr><td>&nbsp;</td><td><pre class="format">(string=? (symbol-&gt;string <var>obj1</var>)
          (symbol-&gt;string <var>obj2</var>))
                                  ==&gt;  #f
</pre></td></tr></table>


</li><li>
one of <var>obj1</var> and <var>obj2</var> is an exact number but the other
is an inexact number.

</li><li>
<var>obj1</var> and <var>obj2</var> are numbers for which the <samp>=</samp>
procedure returns <tt>#f</tt>.

</li><li>
<var>obj1</var> and <var>obj2</var> are characters for which the <samp>char=?</samp>
procedure returns <tt>#f</tt>.

</li><li>
one of <var>obj1</var> and <var>obj2</var> is the empty list but the other
is not.

</li><li>
<var>obj1</var> and <var>obj2</var> are pairs, vectors, or strings that denote
distinct locations.

</li><li>
<var>obj1</var> and <var>obj2</var> are procedures that would behave differently
(return different value(s) or have different side effects) for some arguments.


</li></ul>



<table><tr><td>&nbsp;</td><td><pre class="format">(eqv? 'a 'a)                           ==&gt;  #t
(eqv? 'a 'b)                           ==&gt;  #f
(eqv? 2 2)                             ==&gt;  #t
(eqv? '() '())                         ==&gt;  #t
(eqv? 100000000 100000000)             ==&gt;  #t
(eqv? (cons 1 2) (cons 1 2))           ==&gt;  #f
(eqv? (lambda () 1)
      (lambda () 2))                   ==&gt;  #f
(eqv? #f 'nil)                         ==&gt;  #f
(let ((p (lambda (x) x)))
  (eqv? p p))                          ==&gt;  #t
</pre></td></tr></table>


<p>The following examples illustrate cases in which the above rules do
not fully specify the behavior of <samp>eqv?</samp>.  All that can be said
about such cases is that the value returned by <samp>eqv?</samp> must be a
boolean.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(eqv? &quot;&quot; &quot;&quot;)                           ==&gt;  <em>unspecified</em>
(eqv? '#() '#())                       ==&gt;  <em>unspecified</em>
(eqv? (lambda (x) x)
      (lambda (x) x))                  ==&gt;  <em>unspecified</em>
(eqv? (lambda (x) x)
      (lambda (y) y))                  ==&gt;  <em>unspecified</em>
</pre></td></tr></table>


<p>The next set of examples shows the use of <samp>eqv?</samp> with procedures
that have local state.  <samp>Gen-counter</samp> must return a distinct
procedure every time, since each procedure has its own internal counter.
<samp>Gen-loser</samp>, however, returns equivalent procedures each time, since
the local state does not affect the value or side effects of the
procedures.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define gen-counter
  (lambda ()
    (let ((n 0))
      (lambda () (set! n (+ n 1)) n))))
(let ((g (gen-counter)))
  (eqv? g g))                          ==&gt;  #t
(eqv? (gen-counter) (gen-counter))
                                       ==&gt;  #f
(define gen-loser
  (lambda ()
    (let ((n 0))
      (lambda () (set! n (+ n 1)) 27))))
(let ((g (gen-loser)))
  (eqv? g g))                          ==&gt;  #t
(eqv? (gen-loser) (gen-loser))
                                       ==&gt;  <em>unspecified</em>

(letrec ((f (lambda () (if (eqv? f g) 'both 'f)))
         (g (lambda () (if (eqv? f g) 'both 'g))))
  (eqv? f g))
                                       ==&gt;  <em>unspecified</em>

(letrec ((f (lambda () (if (eqv? f g) 'f 'both)))
         (g (lambda () (if (eqv? f g) 'g 'both))))
  (eqv? f g))
                                       ==&gt;  #f
</pre></td></tr></table>




<p>Since it is an error to modify constant objects (those returned by
literal expressions), implementations are permitted, though not
required, to share structure between constants where appropriate.  Thus
the value of <samp>eqv?</samp> on constants is sometimes
implementation-dependent.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(eqv? '(a) '(a))                       ==&gt;  <em>unspecified</em>
(eqv? &quot;a&quot; &quot;a&quot;)                         ==&gt;  <em>unspecified</em>
(eqv? '(b) (cdr '(a b)))               ==&gt;  <em>unspecified</em>
(let ((x '(a)))
  (eqv? x x))                          ==&gt;  #t
</pre></td></tr></table>



<blockquote><p><em>Rationale:</em> 
The above definition of <samp>eqv?</samp> allows implementations latitude in
their treatment of procedures and literals:  implementations are free
either to detect or to fail to detect that two procedures or two literals
are equivalent to each other, and can decide whether or not to
merge representations of equivalent objects by using the same pointer or
bit pattern to represent both.
</p></blockquote>






<a name="Definition_of_eq?"></a><a name="Procedure_eq?"></a><a name="index-eq_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_eq?">eq?</a></b></code><i>  obj1 obj2</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><samp>Eq?</samp> is similar to <samp>eqv?</samp> except that in some cases it is
capable of discerning distinctions finer than those detectable by
<samp>eqv?</samp>.
</p>
<p><samp>Eq?</samp> and <samp>eqv?</samp> are guaranteed to have the same
behavior on symbols, booleans, the empty list, pairs, procedures,
and non-empty
strings and vectors.  <samp>Eq?</samp>'s behavior on numbers and characters is
implementation-dependent, but it will always return either true or
false, and will return true only when <samp>eqv?</samp> would also return
true.  <samp>Eq?</samp> may also behave differently from <samp>eqv?</samp> on empty
vectors and empty strings.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(eq? 'a 'a)                            ==&gt;  #t
(eq? '(a) '(a))                        ==&gt;  <em>unspecified</em>
(eq? (list 'a) (list 'a))              ==&gt;  #f
(eq? &quot;a&quot; &quot;a&quot;)                          ==&gt;  <em>unspecified</em>
(eq? &quot;&quot; &quot;&quot;)                            ==&gt;  <em>unspecified</em>
(eq? '() '())                          ==&gt;  #t
(eq? 2 2)                              ==&gt;  <em>unspecified</em>
(eq? #\A #\A)                          ==&gt;  <em>unspecified</em>
(eq? car car)                          ==&gt;  #t
(let ((n (+ 2 3)))
  (eq? n n))                           ==&gt;  <em>unspecified</em>
(let ((x '(a)))
  (eq? x x))                           ==&gt;  #t
(let ((x '#()))
  (eq? x x))                           ==&gt;  #t
(let ((p (lambda (x) x)))
  (eq? p p))                           ==&gt;  #t
</pre></td></tr></table>





<blockquote><p><em>Rationale:</em> It will usually be possible to implement <samp>eq?</samp> much
more efficiently than <samp>eqv?</samp>, for example, as a simple pointer
comparison instead of as some more complicated operation.  One reason is
that it may not be possible to compute <samp>eqv?</samp> of two numbers in
constant time, whereas <samp>eq?</samp> implemented as pointer comparison will
always finish in constant time.  <samp>Eq?</samp> may be used like <samp>eqv?</samp>
in applications using procedures to implement objects with state since
it obeys the same constraints as <samp>eqv?</samp>.
</p></blockquote>






<a name="Definition_of_equal?"></a><a name="Library_procedure_equal?"></a><a name="index-equal_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_equal?">equal?</a></b></code><i>  obj1 obj2</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Equal?</samp> recursively compares the contents of pairs, vectors, and
strings, applying <samp>eqv?</samp> on other objects such as numbers and symbols.
A rule of thumb is that objects are generally <samp>equal?</samp> if they print
the same.  <samp>Equal?</samp> may fail to terminate if its arguments are
circular data structures.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(equal? 'a 'a)                         ==&gt;  #t
(equal? '(a) '(a))                     ==&gt;  #t
(equal? '(a (b) c)
        '(a (b) c))                    ==&gt;  #t
(equal? &quot;abc&quot; &quot;abc&quot;)                   ==&gt;  #t
(equal? 2 2)                           ==&gt;  #t
(equal? (make-vector 5 'a)
        (make-vector 5 'a))            ==&gt;  #t
(equal? (lambda (x) x)
        (lambda (y) y))                ==&gt;  <em>unspecified</em>
</pre></td></tr></table>





<a name="Numbers"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Equivalence-predicates" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.1 Equivalence predicates" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numerical-types" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.1 Numerical types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Numbers-1"></a>
<h2 class="section">6.2 Numbers</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Numerical-types">6.2.1 Numerical types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             
</td></tr>
<tr><td align="left" valign="top"><a href="#Exactness">6.2.2 Exactness</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   
</td></tr>
<tr><td align="left" valign="top"><a href="#Implementation-restrictions">6.2.3 Implementation restrictions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Syntax-of-numerical-constants">6.2.4 Syntax of numerical constants</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
<tr><td align="left" valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        
</td></tr>
<tr><td align="left" valign="top"><a href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  
</td></tr>
</table>



<a name="index-number"></a>



<p>Numerical computation has traditionally been neglected by the Lisp
community.  Until Common Lisp there was no carefully thought out
strategy for organizing numerical computation, and with the exception of
the MacLisp system [Pitman83] little effort was made to
execute numerical code efficiently.  This report recognizes the excellent work
of the Common Lisp committee and accepts many of their recommendations.
In some ways this report simplifies and generalizes their proposals in a manner
consistent with the purposes of Scheme.
</p>
<p>It is important to distinguish between the mathematical numbers, the
Scheme numbers that attempt to model them, the machine representations
used to implement the Scheme numbers, and notations used to write numbers.
This report uses the types <i>number</i>, <i>complex</i>, <i>real</i>,
<i>rational</i>, and <i>integer</i> to refer to both mathematical numbers
and Scheme numbers.  Machine representations such as fixed point and
floating point are referred to by names such as <i>fixnum</i> and
<i>flonum</i>.
</p>

<a name="Numerical-types"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Numbers" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Exactness" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.2 Exactness" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Numerical-types-1"></a>
<h3 class="subsection">6.2.1 Numerical types</h3>



<a name="index-numerical-types"></a>



<p>Mathematically, numbers may be arranged into a tower of subtypes
in which each level is a subset of the level above it:
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">         <span class="roman">number</span> 
          <span class="roman">complex</span> 
          <span class="roman">real</span> 
          <span class="roman">rational</span> 
          <span class="roman">integer</span> 
</pre></td></tr></table>


<p>For example, 3 is an integer.  Therefore 3 is also a rational,
a real, and a complex.  The same is true of the Scheme numbers
that model 3.  For Scheme numbers, these types are defined by the
predicates <code>number?</code>, <code>complex?</code>, <code>real?</code>, <code>rational?</code>,
<a name="index-rational_003f"></a>
<a name="index-real_003f"></a>
<a name="index-complex_003f"></a>
<a name="index-number_003f-1"></a>
and <code>integer?</code>.
<a name="index-integer_003f"></a>
</p>
<p>There is no simple relationship between a number's type and its
representation inside a computer.  Although most implementations of
Scheme will offer at least two different representations of 3, these
different representations denote the same integer.
</p>

<p>Scheme's numerical operations treat numbers as abstract data, as
independent of their representation as possible.  Although an implementation
of Scheme may use fixnum, flonum, and perhaps other representations for
numbers, this should not be apparent to a casual programmer writing
simple programs.
</p>
<p>It is necessary, however, to distinguish between numbers that are
represented exactly and those that may not be.  For example, indexes
into data structures must be known exactly, as must some polynomial
coefficients in a symbolic algebra system.  On the other hand, the
results of measurements are inherently inexact, and irrational numbers
may be approximated by rational and therefore inexact approximations.
In order to catch uses of inexact numbers where exact numbers are
required, Scheme explicitly distinguishes exact from inexact numbers.
This distinction is orthogonal to the dimension of type.
</p>
<a name="Exactness"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Numerical-types" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.1 Numerical types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Implementation-restrictions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.3 Implementation restrictions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Exactness-1"></a>
<h3 class="subsection">6.2.2 Exactness</h3>



 
<a name="index-exactness"></a>
<p>Scheme numbers are either <i>exact</i> or <i>inexact</i>.  A number is
<span class="roman">exact</span> if it was written as an exact constant or was derived from
<span class="roman">exact</span> numbers using only <span class="roman">exact</span> operations.  A number is
<span class="roman">inexact</span> if it was written as an inexact constant,
if it was
derived using <span class="roman">inexact</span> ingredients, or if it was derived using
<span class="roman">inexact</span> operations. Thus <span class="roman">inexact</span>ness is a contagious
property of a number.
</p>
<p>If two implementations produce <span class="roman">exact</span> results for a
computation that did not involve <span class="roman">inexact</span> intermediate results,
the two ultimate results will be mathematically equivalent.  This is
generally not true of computations involving <span class="roman">inexact</span> numbers
since approximate methods such as floating point arithmetic may be used,
but it is the duty of each implementation to make the result as close as
practical to the mathematically ideal result.
</p>
<p>Rational operations such as <samp>+</samp> should always produce
<span class="roman">exact</span> results when given <span class="roman">exact</span> arguments.
If the operation is unable to produce an <span class="roman">exact</span> result,
then it may either report the violation of an implementation restriction
or it may silently coerce its
result to an <span class="roman">inexact</span> value.
See section <a href="#Implementation-restrictions">Implementation restrictions</a>.
</p>
<p>With the exception of <code>inexact-&gt;exact</code>, the operations described in
<a name="index-inexact_002d_003eexact"></a>
this section must generally return inexact results when given any inexact
arguments.  An operation may, however, return an <span class="roman">exact</span> result if it can
prove that the value of the result is unaffected by the inexactness of its
arguments.  For example, multiplication of any number by an <span class="roman">exact</span> zero
may produce an <span class="roman">exact</span> zero result, even if the other argument is
<span class="roman">inexact</span>.
</p>
<a name="Implementation-restrictions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Exactness" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.2 Exactness" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Syntax-of-numerical-constants" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.4 Syntax of numerical constants" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Implementation-restrictions-1"></a>
<h3 class="subsection">6.2.3 Implementation restrictions</h3>



<a name="index-implementation-restriction-1"></a>

<p>Implementations of Scheme are not required to implement the whole
tower of subtypes given in section <a href="#Numerical-types">Numerical types</a>,
but they must implement a coherent subset consistent with both the
purposes of the implementation and the spirit of the Scheme language.
For example, an implementation in which all numbers are <span class="roman">real</span>
may still be quite useful.
</p>
<p>Implementations may also support only a limited range of numbers of
any type, subject to the requirements of this section.  The supported
range for <span class="roman">exact</span> numbers of any type may be different from the
supported range for <span class="roman">inexact</span> numbers of that type.  For example,
an implementation that uses flonums to represent all its
<span class="roman">inexact</span> <span class="roman">real</span> numbers may
support a practically unbounded range of <span class="roman">exact</span> <span class="roman">integer</span>s
and <span class="roman">rational</span>s
while limiting the range of <span class="roman">inexact</span> <span class="roman">real</span>s (and therefore
the range of <span class="roman">inexact</span> <span class="roman">integer</span>s and <span class="roman">rational</span>s)
to the dynamic range of the flonum format.
Furthermore
the gaps between the representable <span class="roman">inexact</span> <span class="roman">integer</span>s and
<span class="roman">rational</span>s are
likely to be very large in such an implementation as the limits of this
range are approached.
</p>
<p>An implementation of Scheme must support exact integers
throughout the range of numbers that may be used for indexes of
lists, vectors, and strings or that may result from computing the length of a
list, vector, or string.  The <code>length</code>, <code>vector-length</code>,
<a name="index-vector_002dlength"></a>
<a name="index-length"></a>
and <code>string-length</code> procedures must return an exact
<a name="index-string_002dlength"></a>
integer, and it is an error to use anything but an exact integer as an
index.  Furthermore any integer constant within the index range, if
expressed by an exact integer syntax, will indeed be read as an exact
integer, regardless of any implementation restrictions that may apply
outside this range.  Finally, the procedures listed below will always
return an exact integer result provided all their arguments are exact integers
and the mathematically expected result is representable as an exact integer
within the implementation:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
+            -             *
quotient     remainder     modulo
max          min           abs
numerator    denominator   gcd
lcm          floor         ceiling
truncate     round         rationalize
expt
</pre></td></tr></table>


<p>Implementations are encouraged, but not required, to support
<span class="roman">exact</span> <span class="roman">integer</span>s and <span class="roman">exact</span> <span class="roman">rational</span>s of
practically unlimited size and precision, and to implement the
above procedures and the <samp>/</samp> procedure in
such a way that they always return <span class="roman">exact</span> results when given <span class="roman">exact</span>
arguments.  If one of these procedures is unable to deliver an <span class="roman">exact</span>
result when given <span class="roman">exact</span> arguments, then it may either report a
violation of an
implementation restriction or it may silently coerce its result to an
<span class="roman">inexact</span> number.  Such a coercion may cause an error later.
</p>


<p>An implementation may use floating point and other approximate 
representation strategies for <span class="roman">inexact</span> numbers.
</p>

<p>This report recommends, but does not require, that the IEEE 32-bit
and 64-bit floating point standards be followed by implementations that use
flonum representations, and that implementations using
other representations should match or exceed the precision achievable
using these floating point standards [IEEE].
</p>
<p>In particular, implementations that use flonum representations
must follow these rules: A <span class="roman">flonum</span> result
must be represented with at least as much precision as is used to express any of
the inexact arguments to that operation.  It is desirable (but not required) for
potentially inexact operations such as <samp>sqrt</samp>, when applied to <span class="roman">exact</span>
arguments, to produce <span class="roman">exact</span> answers whenever possible (for example the
square root of an <span class="roman">exact</span> 4 ought to be an <span class="roman">exact</span> 2).
If, however, an
<span class="roman">exact</span> number is operated upon so as to produce an <span class="roman">inexact</span> result
(as by <samp>sqrt</samp>), and if the result is represented as a <span class="roman">flonum</span>, then
the most precise <span class="roman">flonum</span> format available must be used; but if the result
is represented in some other way then the representation must have at least as
much precision as the most precise <span class="roman">flonum</span> format available.
</p>
<p>Although Scheme allows a variety of written
notations for
numbers, any particular implementation may support only some of them.
For example, an implementation in which all numbers are <span class="roman">real</span>
need not support the rectangular and polar notations for complex
numbers.  If an implementation encounters an <span class="roman">exact</span> numerical constant that
it cannot represent as an <span class="roman">exact</span> number, then it may either report a
violation of an implementation restriction or it may silently represent the
constant by an <span class="roman">inexact</span> number.
</p>

<a name="Syntax-of-numerical-constants"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Implementation-restrictions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.3 Implementation restrictions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numerical-operations" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.5 Numerical operations" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Syntax-of-numerical-constants-1"></a>
<h3 class="subsection">6.2.4 Syntax of numerical constants</h3>






<p>The syntax of the written representations for numbers is described formally in
section <a href="#Lexical-structure">Lexical structure</a>.  Note that case is not significant in numerical
constants.
</p>

<p>A number may be written in binary, octal, decimal, or
hexadecimal by the use of a radix prefix.  The radix prefixes are <samp>#b</samp> (binary), <samp>#o</samp> (octal), <samp>#d</samp> (decimal), and <samp>#x</samp> (hexadecimal).  With
<a name="index-_0023x"></a>
<a name="index-_0023d"></a>
<a name="index-_0023o"></a>
<a name="index-_0023b"></a>
no radix prefix, a number is assumed to be expressed in decimal.
</p>
<p>A
numerical constant may be specified to be either <span class="roman">exact</span> or
<span class="roman">inexact</span> by a prefix.  The prefixes are <samp>#e</samp>
<a name="index-_0023e"></a>
for <span class="roman">exact</span>, and <samp>#i</samp> for <span class="roman">inexact</span>.  An exactness
<a name="index-_0023i"></a>
prefix may appear before or after any radix prefix that is used.  If
the written representation of a number has no exactness prefix, the
constant may be either <span class="roman">inexact</span> or <span class="roman">exact</span>.  It is
<span class="roman">inexact</span> if it contains a decimal point, an
exponent, or a &ldquo;#&rdquo; character in the place of a digit,
otherwise it is <span class="roman">exact</span>.
</p>

<p>In systems with <span class="roman">inexact</span> numbers
of varying precisions it may be useful to specify
the precision of a constant.  For this purpose, numerical constants
may be written with an exponent marker that indicates the
desired precision of the <span class="roman">inexact</span>
representation.  The letters <samp>s</samp>, <samp>f</samp>,
<samp>d</samp>, and <samp>l</samp> specify the use of <var>short</var>, <var>single</var>,
<var>double</var>, and <var>long</var> precision, respectively.  (When fewer
than four internal
<span class="roman">inexact</span>
representations exist, the four size
specifications are mapped onto those available.  For example, an
implementation with two internal representations may map short and
single together and long and double together.)  In addition, the
exponent marker <samp>e</samp> specifies the default precision for the
implementation.  The default precision has at least as much precision
as <var>double</var>, but
implementations may wish to allow this default to be set by the user.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
3.14159265358979F0
       <span class="roman">Round to single ---</span> 3.141593
0.6L0
       <span class="roman">Extend to long ---</span> .600000000000000
</pre></td></tr></table>



<a name="Numerical-operations"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Syntax-of-numerical-constants" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.4 Syntax of numerical constants" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numerical-input-and-output" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.2.6 Numerical input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Numerical-operations-1"></a>
<h3 class="subsection">6.2.5 Numerical operations</h3>


<p>The reader is referred to section <a href="#Entry-format">Entry format</a> for a summary
of the naming conventions used to specify restrictions on the types of
arguments to numerical routines.
</p>
<p>The examples used in this section assume that any numerical constant written
using an <span class="roman">exact</span> notation is indeed represented as an <span class="roman">exact</span>
number.  Some examples also assume that certain numerical constants written
using an <span class="roman">inexact</span> notation can be represented without loss of
accuracy; the <span class="roman">inexact</span> constants were chosen so that this is
likely to be true in implementations that use flonums to represent
inexact numbers.
</p>



<a name="Definition_of_number?"></a><a name="Procedure_number?"></a><a name="index-number_003f-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_number?">number?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_complex?"></a><a name="Procedure_complex?"></a><a name="index-complex_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_complex?">complex?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_real?"></a><a name="Procedure_real?"></a><a name="index-real_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_real?">real?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_rational?"></a><a name="Procedure_rational?"></a><a name="index-rational_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_rational?">rational?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_integer?"></a><a name="Procedure_integer?"></a><a name="index-integer_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_integer?">integer?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These numerical type predicates can be applied to any kind of
argument, including non-numbers.  They return <tt>#t</tt> if the object is
of the named type, and otherwise they return <tt>#f</tt>.
In general, if a type predicate is true of a number then all higher
type predicates are also true of that number.  Consequently, if a type
predicate is false of a number, then all lower type predicates are
also false of that number.
</p>
<p>If <var>z</var> is an inexact complex number, then <samp>(real? <var>z</var>)</samp> is true if
and only if <samp>(zero? (imag-part <var>z</var>))</samp> is true.  If <var>x</var> is an inexact
real number, then <samp>(integer? <var>x</var>)</samp> is true if and only if
<samp>(= <var>x</var> (round <var>x</var>))</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(complex? 3+4i)                        ==&gt;  #t
(complex? 3)                           ==&gt;  #t
(real? 3)                              ==&gt;  #t
(real? -2.5+0.0i)                      ==&gt;  #t
(real? #e1e10)                         ==&gt;  #t
(rational? 6/10)                       ==&gt;  #t
(rational? 6/3)                        ==&gt;  #t
(integer? 3+0i)                        ==&gt;  #t
(integer? 3.0)                         ==&gt;  #t
(integer? 8/4)                         ==&gt;  #t
</pre></td></tr></table>



<blockquote><p><em>Note:</em>
The behavior of these type predicates on <span class="roman">inexact</span> numbers
is unreliable, since any inaccuracy may affect the result.
</p></blockquote>



<blockquote><p><em>Note:</em>
In many implementations the <code>rational?</code> procedure will be the same
<a name="index-rational_003f-2"></a>
as <code>real?</code>, and the <code>complex?</code> procedure will be the same as
<a name="index-complex_003f-2"></a>
<a name="index-real_003f-2"></a>
<code>number?</code>, but unusual implementations may be able to represent
<a name="index-number_003f-3"></a>
some irrational numbers exactly or may extend the number system to
support some kind of non-complex numbers.
</p></blockquote>





<a name="Definition_of_exact?"></a><a name="Procedure_exact?"></a><a name="index-exact_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_exact?">exact?</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_inexact?"></a><a name="Procedure_inexact?"></a><a name="index-inexact_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_inexact?">inexact?</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These numerical predicates provide tests for the exactness of a
quantity.  For any Scheme number, precisely one of these predicates
is true.
</p>




<a name="Definition_of_="></a><a name="Procedure_="></a><a name="index-_003d"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_=">=</a></b></code><i>  z1 z2 z3 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_%3C"></a><a name="Procedure_%3C"></a><a name="index-_003c"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%3C">&lt;</a></b></code><i>  x1 x2 x3 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_%3E"></a><a name="Procedure_%3E"></a><a name="index-_003e"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%3E">&gt;</a></b></code><i>  x1 x2 x3 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_%3C="></a><a name="Procedure_%3C="></a><a name="index-_003c_003d"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%3C=">&lt;=</a></b></code><i>  x1 x2 x3 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_%3E="></a><a name="Procedure_%3E="></a><a name="index-_003e_003d"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%3E=">&gt;=</a></b></code><i>  x1 x2 x3 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures return <tt>#t</tt> if their arguments are (respectively):
equal, monotonically increasing, monotonically decreasing,
monotonically nondecreasing, or monotonically nonincreasing.
</p>
<p>These predicates are required to be transitive.
</p>

<blockquote><p><em>Note:</em>
The traditional implementations of these predicates in Lisp-like
languages are not transitive.
</p></blockquote>



<blockquote><p><em>Note:</em>
While it is not an error to compare <span class="roman">inexact</span> numbers using these
predicates, the results may be unreliable because a small inaccuracy
may affect the result; this is especially true of <code>=</code> and <code>zero?</code>.
<a name="index-zero_003f"></a>
<a name="index-_003d-1"></a>
When in doubt, consult a numerical analyst.
</p></blockquote>





<a name="Definition_of_zero?"></a><a name="Library_procedure_zero?"></a><a name="index-zero_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_zero?">zero?</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_positive?"></a><a name="Library_procedure_positive?"></a><a name="index-positive_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_positive?">positive?</a></b></code><i>  <var>x</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_negative?"></a><a name="Library_procedure_negative?"></a><a name="index-negative_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_negative?">negative?</a></b></code><i>  <var>x</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_odd?"></a><a name="Library_procedure_odd?"></a><a name="index-odd_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_odd?">odd?</a></b></code><i>  <var>n</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_even?"></a><a name="Library_procedure_even?"></a><a name="index-even_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_even?">even?</a></b></code><i>  <var>n</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These numerical predicates test a number for a particular property,
returning <tt>#t</tt> or <tt>#f</tt>.  See note above.
</p>



<a name="Definition_of_max"></a><a name="Library_procedure_max"></a><a name="index-max"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_max">max</a></b></code><i>  x1 x2 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_min"></a><a name="Library_procedure_min"></a><a name="index-min"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_min">min</a></b></code><i>  x1 x2 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures return the maximum or minimum of their arguments.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(max 3 4)                              ==&gt;  4    ; exact
(max 3.9 4)                            ==&gt;  4.0  ; inexact
</pre></td></tr></table>



<blockquote><p><em>Note:</em>
If any argument is inexact, then the result will also be inexact (unless
the procedure can prove that the inaccuracy is not large enough to affect the
result, which is possible only in unusual implementations).  If <samp>min</samp> or
<samp>max</samp> is used to compare numbers of mixed exactness, and the numerical
value of the result cannot be represented as an inexact number without loss of
accuracy, then the procedure may report a violation of an implementation
restriction.
</p></blockquote>






<a name="Definition_of_%2B"></a><a name="Procedure_%2B"></a><a name="index-_002b-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%2B">+</a></b></code><i>  z1 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_%2A"></a><a name="Procedure_%2A"></a><a name="index-_002a"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_%2A">*</a></b></code><i>  z1 &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures return the sum or product of their arguments.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(+ 3 4)                                ==&gt;  7
(+ 3)                                  ==&gt;  3
(+)                                    ==&gt;  0
(* 4)                                  ==&gt;  4
(*)                                    ==&gt;  1
</pre></td></tr></table>
 
 




<a name="Definition_of_-"></a><a name="Procedure_-"></a><a name="index-_002d-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_-">-</a></b></code><i>  z1 z2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_-"></a><a name="Procedure_-"></a><a name="index-_002d-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_-">-</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_-"></a><a name="Optional_procedure_-"></a><a name="index-_002d-3"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_-">-</a></b></code><i>  z1 z2 &hellip;</i><code>)</code></td><td align="right">optional procedure</td></tr></table>
<a name="Definition_of_/"></a><a name="Procedure_/"></a><a name="index-_002f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_/">/</a></b></code><i>  z1 z2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_/"></a><a name="Procedure_/"></a><a name="index-_002f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_/">/</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_/"></a><a name="Optional_procedure_/"></a><a name="index-_002f-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_/">/</a></b></code><i>  z1 z2 &hellip;</i><code>)</code></td><td align="right">optional procedure</td></tr></table>

<p>With two or more arguments, these procedures return the difference or
quotient of their arguments, associating to the left.  With one argument,
however, they return the additive or multiplicative inverse of their argument.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(- 3 4)                                ==&gt;  -1
(- 3 4 5)                              ==&gt;  -6
(- 3)                                  ==&gt;  -3
(/ 3 4 5)                              ==&gt;  3/20
(/ 3)                                  ==&gt;  1/3
</pre></td></tr></table>






<a name="Definition_of_abs"></a><a name="Library_procedure_abs"></a><a name="index-abs"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_abs">abs</a></b></code><i>  x</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Abs</samp> returns the absolute value of its argument.  
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(abs -7)                               ==&gt;  7
</pre></td></tr></table>





<a name="Definition_of_quotient"></a><a name="Procedure_quotient"></a><a name="index-quotient"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_quotient">quotient</a></b></code><i>  n1 n2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_remainder"></a><a name="Procedure_remainder"></a><a name="index-remainder"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_remainder">remainder</a></b></code><i>  n1 n2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_modulo"></a><a name="Procedure_modulo"></a><a name="index-modulo"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_modulo">modulo</a></b></code><i>  n1 n2</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures implement number-theoretic (integer)
division.  <var>n2</var> should be non-zero.  All three procedures
return integers.  If <var>n1</var>/<var>n2</var> is an integer:
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">    (quotient <var>n1</var> <var>n2</var>)                   ==&gt; <var>n1</var>/<var>n2</var>
    (remainder <var>n1</var> <var>n2</var>)                  ==&gt; 0
    (modulo <var>n1</var> <var>n2</var>)                     ==&gt; 0
</pre></td></tr></table>

<p>If <var>n1</var>/<var>n2</var> is not an integer:
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">    (quotient <var>n1</var> <var>n2</var>)                   ==&gt; <var>n_q</var>
    (remainder <var>n1</var> <var>n2</var>)                  ==&gt; <var>n_r</var>
    (modulo <var>n1</var> <var>n2</var>)                     ==&gt; <var>n_m</var>
</pre></td></tr></table>

<p>where <var>n_q</var> is <var>n1</var>/<var>n2</var> rounded towards zero,
0 &lt; |<var>n_r</var>| &lt; |<var>n2</var>|, 0 &lt; |<var>n_m</var>| &lt; |<var>n2</var>|,
<var>n_r</var> and <var>n_m</var> differ from <var>n1</var> by a multiple of <var>n2</var>,
<var>n_r</var> has the same sign as <var>n1</var>, and
<var>n_m</var> has the same sign as <var>n2</var>.
</p>
<p>From this we can conclude that for integers <var>n1</var> and <var>n2</var> with
<var>n2</var> not equal to 0,
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">     (= <var>n1</var> (+ (* <var>n2</var> (quotient <var>n1</var> <var>n2</var>))
           (remainder <var>n1</var> <var>n2</var>)))
                                       ==&gt;  #t
</pre></td></tr></table>

<p>provided all numbers involved in that computation are exact.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(modulo 13 4)                          ==&gt;  1
(remainder 13 4)                       ==&gt;  1

(modulo -13 4)                         ==&gt;  3
(remainder -13 4)                      ==&gt;  -1

(modulo 13 -4)                         ==&gt;  -3
(remainder 13 -4)                      ==&gt;  1

(modulo -13 -4)                        ==&gt;  -1
(remainder -13 -4)                     ==&gt;  -1

(remainder -13 -4.0)                   ==&gt;  -1.0  ; inexact
</pre></td></tr></table>




<a name="Definition_of_gcd"></a><a name="Library_procedure_gcd"></a><a name="index-gcd"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_gcd">gcd</a></b></code><i>  n1 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_lcm"></a><a name="Library_procedure_lcm"></a><a name="index-lcm"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_lcm">lcm</a></b></code><i>  n1 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures return the greatest common divisor or least common
multiple of their arguments.  The result is always non-negative.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(gcd 32 -36)                           ==&gt;  4
(gcd)                                  ==&gt;  0
(lcm 32 -36)                           ==&gt;  288
(lcm 32.0 -36)                         ==&gt;  288.0  ; inexact
(lcm)                                  ==&gt;  1
</pre></td></tr></table>






<a name="Definition_of_numerator"></a><a name="Procedure_numerator"></a><a name="index-numerator"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_numerator">numerator</a></b></code><i>  <var>q</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_denominator"></a><a name="Procedure_denominator"></a><a name="index-denominator"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_denominator">denominator</a></b></code><i>  <var>q</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures return the numerator or denominator of their
argument; the result is computed as if the argument was represented as
a fraction in lowest terms.  The denominator is always positive.  The
denominator of 0 is defined to be 1.
</p>


<table><tr><td>&nbsp;</td><td><pre class="format">(numerator (/ 6 4))                    ==&gt;  3
(denominator (/ 6 4))                  ==&gt;  2
(denominator
  (exact-&gt;inexact (/ 6 4)))            ==&gt; 2.0
</pre></td></tr></table>






<a name="Definition_of_floor"></a><a name="Procedure_floor"></a><a name="index-floor"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_floor">floor</a></b></code><i>  x</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_ceiling"></a><a name="Procedure_ceiling"></a><a name="index-ceiling"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_ceiling">ceiling</a></b></code><i>  x</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_truncate"></a><a name="Procedure_truncate"></a><a name="index-truncate"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_truncate">truncate</a></b></code><i>  x</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_round"></a><a name="Procedure_round"></a><a name="index-round"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_round">round</a></b></code><i>  x</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>These procedures return integers.
<samp>Floor</samp> returns the largest integer not larger than <var>x</var>.
<samp>Ceiling</samp> returns the smallest integer not smaller than <var>x</var>.
<samp>Truncate</samp> returns the integer closest to <var>x</var> whose absolute
value is not larger than the absolute value of <var>x</var>.  <samp>Round</samp> returns the
closest integer to <var>x</var>, rounding to even when <var>x</var> is halfway between two
integers.
</p>

<blockquote><p><em>Rationale:</em>
<samp>Round</samp> rounds to even for consistency with the default rounding
mode specified by the IEEE floating point standard.
</p></blockquote>



<blockquote><p><em>Note:</em>
If the argument to one of these procedures is inexact, then the result
will also be inexact.  If an exact value is needed, the
result should be passed to the <samp>inexact-&gt;exact</samp> procedure.
</p></blockquote>



<table><tr><td>&nbsp;</td><td><pre class="format">(floor -4.3)                           ==&gt;  -5.0
(ceiling -4.3)                         ==&gt;  -4.0
(truncate -4.3)                        ==&gt;  -4.0
(round -4.3)                           ==&gt;  -4.0

(floor 3.5)                            ==&gt;  3.0
(ceiling 3.5)                          ==&gt;  4.0
(truncate 3.5)                         ==&gt;  3.0
(round 3.5)                            ==&gt;  4.0  ; inexact

(round 7/2)                            ==&gt;  4    ; exact
(round 7)                              ==&gt;  7
</pre></td></tr></table>





<a name="Definition_of_rationalize"></a><a name="Library_procedure_rationalize"></a><a name="index-rationalize"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_rationalize">rationalize</a></b></code><i>  x y</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p><samp>Rationalize</samp> returns the <em>simplest</em> rational number
differing from <var>x</var> by no more than <var>y</var>.  A rational number r_1 is
<em>simpler</em>  than another rational number
<a name="index-simplest-rational"></a>
r_2 if r_1 = p_1/q_1 and r_2 = p_2/q_2 (in lowest terms) and |p_1|&lt;= |p_2| and |q_1| &lt;= |q_2|.  Thus 3/5 is simpler than 4/7.
Although not all rationals are comparable in this ordering (consider 2/7
and 3/5) any interval contains a rational number that is simpler than
every other rational number in that interval (the simpler 2/5 lies
between 2/7 and 3/5).  Note that 0 = 0/1 is the simplest rational of
all.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(rationalize
  (inexact-&gt;exact .3) 1/10)            ==&gt; 1/3    ; exact
(rationalize .3 1/10)                  ==&gt; #i1/3  ; inexact
</pre></td></tr></table>





<a name="Definition_of_exp"></a><a name="Procedure_exp"></a><a name="index-exp"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_exp">exp</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_log"></a><a name="Procedure_log"></a><a name="index-log"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_log">log</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_sin"></a><a name="Procedure_sin"></a><a name="index-sin"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_sin">sin</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_cos"></a><a name="Procedure_cos"></a><a name="index-cos"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_cos">cos</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_tan"></a><a name="Procedure_tan"></a><a name="index-tan"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_tan">tan</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_asin"></a><a name="Procedure_asin"></a><a name="index-asin"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_asin">asin</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_acos"></a><a name="Procedure_acos"></a><a name="index-acos"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_acos">acos</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_atan"></a><a name="Procedure_atan"></a><a name="index-atan"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_atan">atan</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_atan"></a><a name="Procedure_atan"></a><a name="index-atan-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_atan">atan</a></b></code><i>  <var>y</var> <var>x</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures are part of every implementation that supports
general
real numbers; they compute the usual transcendental functions.  <samp>log</samp>
computes the natural logarithm of <var>z</var> (not the base ten logarithm).
<samp>asin</samp>, <samp>acos</samp>, and <samp>atan</samp> compute arcsine (sin^-1),
arccosine (cos^-1), and arctangent (tan^-1), respectively.
The two-argument variant of <samp>atan</samp> computes <tt>(angle
(make-rectangular <var>x</var> <var>y</var>))</tt> (see below), even in implementations
that don't support general complex numbers.
</p>
<p>In general, the mathematical functions log, arcsine, arccosine, and
arctangent are multiply defined.
The value of log z is defined to be the one whose imaginary
part lies in the range from -pi (exclusive) to pi (inclusive).
log 0 is undefined.
With log defined this way, the values of sin^-1 z, cos^-1 z,
and tan^-1 z are according to the following formulae:
</p>

<p align="center"> sin^-1 z = -i log (i z + sqrt(1 - z^2))
</p>


<p align="center"> cos^-1 z = pi / 2 - sin^-1 z
</p>


<p align="center"> tan^-1 z = (log (1 + i z) - log (1 - i z)) / (2 i)
</p>

<p>The above specification follows [CLtL], which in turn
cites [Penfield81]; refer to these sources for more detailed
discussion of branch cuts, boundary conditions, and implementation of
these functions.  When it is possible these procedures produce a real
result from a real argument.
</p>







<a name="Definition_of_sqrt"></a><a name="Procedure_sqrt"></a><a name="index-sqrt"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_sqrt">sqrt</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the principal square root of <var>z</var>.  The result will have
either positive real part, or zero real part and non-negative imaginary
part.
</p>



<a name="Definition_of_expt"></a><a name="Procedure_expt"></a><a name="index-expt"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_expt">expt</a></b></code><i>  z1 z2</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <var>z1</var> raised to the power <var>z2</var>.  For z_1 ~= 0
</p>

<p align="center"> z_1^z_2 = e^z_2 log z_1
</p>
<p>0^z is 1 if z = 0 and 0 otherwise.
</p>





<a name="Definition_of_make-rectangular"></a><a name="Procedure_make-rectangular"></a><a name="index-make_002drectangular"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-rectangular">make-rectangular</a></b></code><i>  x1 x2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_make-polar"></a><a name="Procedure_make-polar"></a><a name="index-make_002dpolar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-polar">make-polar</a></b></code><i>  x3 x4</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_real-part"></a><a name="Procedure_real-part"></a><a name="index-real_002dpart"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_real-part">real-part</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_imag-part"></a><a name="Procedure_imag-part"></a><a name="index-imag_002dpart"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_imag-part">imag-part</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_magnitude"></a><a name="Procedure_magnitude"></a><a name="index-magnitude"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_magnitude">magnitude</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_angle"></a><a name="Procedure_angle"></a><a name="index-angle"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_angle">angle</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>These procedures are part of every implementation that supports
general
complex numbers.  Suppose <var>x1</var>, <var>x2</var>, <var>x3</var>, and <var>x4</var> are
real numbers and <var>z</var> is a complex number such that
</p> 

<p align="center">  <var>z</var> = <var>x1</var> + <var>x2</var>i = <var>x3</var> . e^i <var>x4</var>
</p>
<p>Then
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(make-rectangular <var>x1</var> <var>x2</var>)               ==&gt; <var>z</var>
(make-polar <var>x3</var> <var>x4</var>)                     ==&gt; <var>z</var>
(real-part <var>z</var>)                          ==&gt; <var>x1</var>
(imag-part <var>z</var>)                          ==&gt; <var>x2</var>
(magnitude <var>z</var>)                          ==&gt; |<var>x3</var>|
(angle <var>z</var>)                              ==&gt; x_angle
</pre></td></tr></table>

<p>where -pi &lt; x_angle &lt;= pi with x_angle = <var>x4</var> + 2pi n
for some integer n.
</p>

<blockquote><p><em>Rationale:</em>
<samp>Magnitude</samp> is the same as <code>abs</code> for a real argument,
<a name="index-abs-1"></a>
but <samp>abs</samp> must be present in all implementations, whereas
<samp>magnitude</samp> need only be present in implementations that support
general complex numbers.
</p></blockquote>






<a name="Definition_of_exact-%3Einexact"></a><a name="Procedure_exact-%3Einexact"></a><a name="index-exact_002d_003einexact"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_exact-%3Einexact">exact-&gt;inexact</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_inexact-%3Eexact"></a><a name="Procedure_inexact-%3Eexact"></a><a name="index-inexact_002d_003eexact-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_inexact-%3Eexact">inexact-&gt;exact</a></b></code><i>  <var>z</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><samp>Exact-&gt;inexact</samp> returns an <span class="roman">inexact</span> representation of <var>z</var>.
The value returned is the
<span class="roman">inexact</span> number that is numerically closest to the argument.  
If an <span class="roman">exact</span> argument has no reasonably close <span class="roman">inexact</span> equivalent,
then a violation of an implementation restriction may be reported.
</p>
<p><samp>Inexact-&gt;exact</samp> returns an <span class="roman">exact</span> representation of
<var>z</var>.  The value returned is the <span class="roman">exact</span> number that is numerically
closest to the argument.
If an <span class="roman">inexact</span> argument has no reasonably close <span class="roman">exact</span> equivalent,
then a violation of an implementation restriction may be reported.
</p>

<p>These procedures implement the natural one-to-one correspondence between
<span class="roman">exact</span> and <span class="roman">inexact</span> integers throughout an
implementation-dependent range.  See section <a href="#Implementation-restrictions">Implementation restrictions</a>.
</p>


<br>
<br>
<br>

<a name="Numerical-input-and-output"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Numerical-operations" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.5 Numerical operations" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Numbers" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.2 Numbers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Numerical-input-and-output-1"></a>
<h3 class="subsection">6.2.6 Numerical input and output</h3>



<a name="Definition_of_number-%3Estring"></a><a name="Procedure_number-%3Estring"></a><a name="index-number_002d_003estring"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_number-%3Estring">number-&gt;string</a></b></code><i>  z</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_number-%3Estring"></a><a name="Procedure_number-%3Estring"></a><a name="index-number_002d_003estring-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_number-%3Estring">number-&gt;string</a></b></code><i>  z radix</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>Radix</var> must be an exact integer, either 2, 8, 10, or 16.  If omitted,
<var>radix</var> defaults to 10.
The procedure <samp>number-&gt;string</samp> takes a
number and a radix and returns as a string an external representation of
the given number in the given radix such that
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(let ((number <var>number</var>)
      (radix <var>radix</var>))
  (eqv? number
        (string-&gt;number (number-&gt;string number
                                        radix)
                        radix)))
</pre></td></tr></table>

<p>is true.  It is an error if no possible result makes this expression true.
</p>
<p>If <var>z</var> is inexact, the radix is 10, and the above expression
can be satisfied by a result that contains a decimal point,
then the result contains a decimal point and is expressed using the
minimum number of digits (exclusive of exponent and trailing
zeroes) needed to make the above expression
true [howtoprint], [howtoread];
otherwise the format of the result is unspecified.
</p>
<p>The result returned by <samp>number-&gt;string</samp>
never contains an explicit radix prefix.
</p>

<blockquote><p><em>Note:</em>
The error case can occur only when <var>z</var> is not a complex number
or is a complex number with a non-rational real or imaginary part.
</p></blockquote>



<blockquote><p><em>Rationale:</em>
If <var>z</var> is an inexact number represented using flonums, and
the radix is 10, then the above expression is normally satisfied by
a result containing a decimal point.  The unspecified case
allows for infinities, NaNs, and non-flonum representations.
</p></blockquote>






<a name="Definition_of_string-%3Enumber"></a><a name="Procedure_string-%3Enumber"></a><a name="index-string_002d_003enumber"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-%3Enumber">string-&gt;number</a></b></code><i>  string</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_string-%3Enumber"></a><a name="Procedure_string-%3Enumber"></a><a name="index-string_002d_003enumber-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-%3Enumber">string-&gt;number</a></b></code><i>  string radix</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>Returns a number of the maximally precise representation expressed by the
given <var>string</var>.  <var>Radix</var> must be an exact integer, either 2, 8, 10,
or 16.  If supplied, <var>radix</var> is a default radix that may be overridden
by an explicit radix prefix in <var>string</var> (e.g. <tt>&quot;#o177&quot;</tt>).  If <var>radix</var>
is not supplied, then the default radix is 10.  If <var>string</var> is not
a syntactically valid notation for a number, then <samp>string-&gt;number</samp>
returns <tt>#f</tt>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(string-&gt;number &quot;100&quot;)                 ==&gt;  100
(string-&gt;number &quot;100&quot; 16)              ==&gt;  256
(string-&gt;number &quot;1e2&quot;)                 ==&gt;  100.0
(string-&gt;number &quot;15##&quot;)                ==&gt;  1500.0
</pre></td></tr></table>



<blockquote><p><em>Note:</em>
The domain of <samp>string-&gt;number</samp> may be restricted by implementations
in the following ways.  <samp>String-&gt;number</samp> is permitted to return
<tt>#f</tt> whenever <var>string</var> contains an explicit radix prefix.
If all numbers supported by an implementation are real, then
<samp>string-&gt;number</samp> is permitted to return <tt>#f</tt> whenever
<var>string</var> uses the polar or rectangular notations for complex
numbers.  If all numbers are integers, then
<samp>string-&gt;number</samp> may return <tt>#f</tt> whenever
the fractional notation is used.  If all numbers are exact, then
<samp>string-&gt;number</samp> may return <tt>#f</tt> whenever
an exponent marker or explicit exactness prefix is used, or if
a <tt>#</tt> appears in place of a digit.  If all inexact
numbers are integers, then
<samp>string-&gt;number</samp> may return <tt>#f</tt> whenever
a decimal point is used.
</p></blockquote>




<a name="Other-data-types"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Numerical-input-and-output" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.2.6 Numerical input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Booleans" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.1 Booleans" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Other-data-types-1"></a>
<h2 class="section">6.3 Other data types</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Booleans">6.3.1 Booleans</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    
</td></tr>
<tr><td align="left" valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             
</td></tr>
<tr><td align="left" valign="top"><a href="#Symbols">6.3.3 Symbols</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     
</td></tr>
<tr><td align="left" valign="top"><a href="#Characters">6.3.4 Characters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  
</td></tr>
<tr><td align="left" valign="top"><a href="#Strings">6.3.5 Strings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     
</td></tr>
<tr><td align="left" valign="top"><a href="#Vectors">6.3.6 Vectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     
</td></tr>
</table>


<p>This section describes operations on some of Scheme's non-numeric data types:
booleans, pairs, lists, symbols, characters, strings and vectors.
</p>
<a name="Booleans"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Other-data-types" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Pairs-and-lists" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.2 Pairs and lists" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Booleans-1"></a>
<h3 class="subsection">6.3.1 Booleans</h3>



<p>The standard boolean objects for true and false are written as
<tt>#t</tt> and <tt>#f</tt>.  What really
<a name="index-_0023f"></a>
<a name="index-_0023t"></a>
matters, though, are the objects that the Scheme conditional expressions
(<samp>if</samp>, <samp>cond</samp>, <samp>and</samp>, <samp>or</samp>, <samp>do</samp>) treat as
true or false.  The phrase &ldquo;a true value&rdquo;
<a name="index-false-1"></a>
<a name="index-true-3"></a>
(or sometimes just &ldquo;true&rdquo;) means any object treated as true by the
conditional expressions, and the phrase &ldquo;a false value&rdquo; (or
<a name="index-false-2"></a>
&ldquo;false&rdquo;) means any object treated as false by the conditional expressions.
</p>
<p>Of all the standard Scheme values, only <tt>#f</tt>
counts as false in conditional expressions.
Except for <tt>#f</tt>,
all standard Scheme values, including <tt>#t</tt>,
pairs, the empty list, symbols, numbers, strings, vectors, and procedures,
count as true.
</p>



<blockquote><p><em>Note:</em>
Programmers accustomed to other dialects of Lisp should be aware that
Scheme distinguishes both <tt>#f</tt> and the empty list 
<a name="index-empty-list-1"></a>
from the symbol <code>nil</code>.
<a name="index-nil"></a>
</p></blockquote>


<p>Boolean constants evaluate to themselves, so they do not need to be quoted
in programs.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
#t                                     ==&gt;  #t
#f                                     ==&gt;  #f
'#f                                    ==&gt;  #f
</pre></td></tr></table>




<a name="Definition_of_not"></a><a name="Library_procedure_not"></a><a name="index-not"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_not">not</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Not</samp> returns <tt>#t</tt> if <var>obj</var> is false, and returns
<tt>#f</tt> otherwise.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(not #t)                               ==&gt;  #f
(not 3)                                ==&gt;  #f
(not (list 3))                         ==&gt;  #f
(not #f)                               ==&gt;  #t
(not '())                              ==&gt;  #f
(not (list))                           ==&gt;  #f
(not 'nil)                             ==&gt;  #f
</pre></td></tr></table>






<a name="Definition_of_boolean?"></a><a name="Library_procedure_boolean?"></a><a name="index-boolean_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_boolean?">boolean?</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Boolean?</samp> returns <tt>#t</tt> if <var>obj</var> is either <tt>#t</tt> or
<tt>#f</tt> and returns <tt>#f</tt> otherwise.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(boolean? #f)                          ==&gt;  #t
(boolean? 0)                           ==&gt;  #f
(boolean? '())                         ==&gt;  #f
</pre></td></tr></table>




 
<a name="Pairs-and-lists"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Booleans" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.1 Booleans" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Symbols" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.3 Symbols" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Pairs-and-lists-1"></a>
<h3 class="subsection">6.3.2 Pairs and lists</h3>



<p>A <em>pair</em> (sometimes called a <em>dotted pair</em>) is a
<a name="index-dotted-pair"></a>
<a name="index-pair"></a>
record structure with two fields called the car and cdr fields (for
historical reasons).  Pairs are created by the procedure <samp>cons</samp>.
The car and cdr fields are accessed by the procedures <samp>car</samp> and
<samp>cdr</samp>.  The car and cdr fields are assigned by the procedures
<samp>set-car!</samp> and <samp>set-cdr!</samp>.
</p>
<p>Pairs are used primarily to represent lists.  A list can
be defined recursively as either the empty list or a pair whose
<a name="index-empty-list-2"></a>
cdr is a list.  More precisely, the set of lists is defined as the smallest
set <var>X</var> such that
</p>


<ul>
<li>
The empty list is in <var>X</var>.
</li><li>
If <var>list</var> is in <var>X</var>, then any pair whose cdr field contains
<var>list</var> is also in <var>X</var>.

</li></ul>


<p>The objects in the car fields of successive pairs of a list are the
elements of the list.  For example, a two-element list is a pair whose car
is the first element and whose cdr is a pair whose car is the second element
and whose cdr is the empty list.  The length of a list is the number of
elements, which is the same as the number of pairs.
</p>
<p>The empty list is a special object of its own type
<a name="index-empty-list-3"></a>
(it is not a pair); it has no elements and its length is zero.
</p>

<blockquote><p><em>Note:</em>
The above definitions imply that all lists have finite length and are
terminated by the empty list.
</p></blockquote>


<p>The most general notation (external representation) for Scheme pairs is
the &ldquo;dotted&rdquo; notation <samp>(<var>c1</var> . <var>c2</var>)</samp> where
<var>c1</var> is the value of the car field and <var>c2</var> is the value of the
cdr field.  For example <samp>(4 . 5)</samp> is a pair whose car is 4 and whose
cdr is 5.  Note that <samp>(4 . 5)</samp> is the external representation of a
pair, not an expression that evaluates to a pair.
</p>
<p>A more streamlined notation can be used for lists: the elements of the
list are simply enclosed in parentheses and separated by spaces.  The
empty list is written <tt>()</tt> .  For example,
<a name="index-empty-list-4"></a>
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(a b c d e)
</pre></td></tr></table>


<p>and
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(a . (b . (c . (d . (e . ())))))
</pre></td></tr></table>


<p>are equivalent notations for a list of symbols.
</p>
<p>A chain of pairs not ending in the empty list is called an
<em>improper list</em>.  Note that an improper list is not a list.
<a name="index-improper-list"></a>
The list and dotted notations can be combined to represent
improper lists:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(a b c . d)
</pre></td></tr></table>


<p>is equivalent to
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(a . (b . (c . d)))
</pre></td></tr></table>


<p>Whether a given pair is a list depends upon what is stored in the cdr
field.  When the <code>set-cdr!</code> procedure is used, an object can be a
<a name="index-set_002dcdr_0021"></a>
list one moment and not the next:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define x (list 'a 'b 'c))
(define y x)
y                                      ==&gt;  (a b c)
(list? y)                              ==&gt;  #t
(set-cdr! x 4)                         ==&gt;  <em>unspecified</em>
x                                      ==&gt;  (a . 4)
(eqv? x y)                             ==&gt;  #t
y                                      ==&gt;  (a . 4)
(list? y)                              ==&gt;  #f
(set-cdr! x x)                         ==&gt;  <em>unspecified</em>
(list? x)                              ==&gt;  #f
</pre></td></tr></table>




<p>Within literal expressions and representations of objects read by the
<code>read</code> procedure, the forms <tt>'</tt><span class="roman">&lt;datum&gt;</span>,
<a name="index-_0027-2"></a>
<a name="index-read"></a>
<tt>&lsquo;</tt><span class="roman">&lt;datum&gt;</span>, <tt>,</tt><span class="roman">&lt;datum&gt;</span>, and
<a name="index-_002c-1"></a>
<tt>,@</tt><span class="roman">&lt;datum&gt;</span> denote two-element lists whose first elements are
the symbols <code>quote</code>, <code>quasiquote</code>, <code>unquote</code>, and
<a name="index-unquote-1"></a>
<a name="index-quasiquote-2"></a>
<a name="index-quote-1"></a>
<code>unquote-splicing</code>, respectively.  The second element in each case
<a name="index-unquote_002dsplicing-1"></a>
is <span class="roman">&lt;datum&gt;</span>.  This convention is supported so that arbitrary Scheme
programs may be represented as lists.  
 That is, according to Scheme's grammar, every
&lt;expression&gt; is also a &lt;datum&gt; (see section see section <a href="#External-representation">External representations</a>).
Among other things, this permits the use of the <samp>read</samp> procedure to
parse Scheme programs.  See section <a href="#External-representations">External representations</a>. 
</p> 


<a name="Definition_of_pair?"></a><a name="Procedure_pair?"></a><a name="index-pair_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_pair?">pair?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><samp>Pair?</samp> returns <tt>#t</tt> if <var>obj</var> is a pair, and otherwise
returns <tt>#f</tt>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(pair? '(a . b))                       ==&gt;  #t
(pair? '(a b c))                       ==&gt;  #t
(pair? '())                            ==&gt;  #f
(pair? '#(a b))                        ==&gt;  #f
</pre></td></tr></table>





<a name="Definition_of_cons"></a><a name="Procedure_cons"></a><a name="index-cons"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_cons">cons</a></b></code><i>  obj1 obj2</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns a newly allocated pair whose car is <var>obj1</var> and whose cdr is
<var>obj2</var>.  The pair is guaranteed to be different (in the sense of
<samp>eqv?</samp>) from every existing object.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(cons 'a '())                          ==&gt;  (a)
(cons '(a) '(b c d))                   ==&gt;  ((a) b c d)
(cons &quot;a&quot; '(b c))                      ==&gt;  (&quot;a&quot; b c)
(cons 'a 3)                            ==&gt;  (a . 3)
(cons '(a b) 'c)                       ==&gt;  ((a b) . c)
</pre></td></tr></table>





<a name="Definition_of_car"></a><a name="Procedure_car"></a><a name="index-car"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_car">car</a></b></code><i>  pair</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>Returns the contents of the car field of <var>pair</var>.  Note that it is an
error to take the car of the empty list.
<a name="index-empty-list-5"></a>
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(car '(a b c))                         ==&gt;  a
(car '((a) b c d))                     ==&gt;  (a)
(car '(1 . 2))                         ==&gt;  1
(car '())                              ==&gt;  <em>error</em>
</pre></td></tr></table>

 




<a name="Definition_of_cdr"></a><a name="Procedure_cdr"></a><a name="index-cdr"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_cdr">cdr</a></b></code><i>  pair</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>Returns the contents of the cdr field of <var>pair</var>.
Note that it is an error to take the cdr of the empty list.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(cdr '((a) b c d))                     ==&gt;  (b c d)
(cdr '(1 . 2))                         ==&gt;  2
(cdr '())                              ==&gt;  <em>error</em>
</pre></td></tr></table>

 




<a name="Definition_of_set-car!"></a><a name="Procedure_set-car!"></a><a name="index-set_002dcar_0021"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_set-car!">set-car!</a></b></code><i>  pair obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

  
<p>Stores <var>obj</var> in the car field of <var>pair</var>.
The value returned by <samp>set-car!</samp> is unspecified.  
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define (f) (list 'not-a-constant-list))
(define (g) '(constant-list))
(set-car! (f) 3)                       ==&gt;  <em>unspecified</em>
(set-car! (g) 3)                       ==&gt;  <em>error</em>
</pre></td></tr></table>






<a name="Definition_of_set-cdr!"></a><a name="Procedure_set-cdr!"></a><a name="index-set_002dcdr_0021-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_set-cdr!">set-cdr!</a></b></code><i>  pair obj</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p>Stores <var>obj</var> in the cdr field of <var>pair</var>.
The value returned by <samp>set-cdr!</samp> is unspecified.  
</p>







<a name="Definition_of_caar"></a><a name="Library_procedure_caar"></a><a name="index-caar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_caar">caar</a></b></code><i>  pair</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_cadr"></a><a name="Library_procedure_cadr"></a><a name="index-cadr"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_cadr">cadr</a></b></code><i>  pair</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<table width="100%"><tr><td align="left"> <code><b>&hellip;</b></code></td><td align="right">&hellip;</td></tr></table>
<a name="Definition_of_cdddar"></a><a name="Library_procedure_cdddar"></a><a name="index-cdddar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_cdddar">cdddar</a></b></code><i>  pair</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_cddddr"></a><a name="Library_procedure_cddddr"></a><a name="index-cddddr"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_cddddr">cddddr</a></b></code><i>  pair</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures are compositions of <samp>car</samp> and <samp>cdr</samp>, where
for example <samp>caddr</samp> could be defined by
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define caddr (lambda (x) (car (cdr (cdr x)))))<span class="roman">.</span>
</pre></td></tr></table>


<p>Arbitrary compositions, up to four deep, are provided.  There are
twenty-eight of these procedures in all.
</p>




<a name="Definition_of_null?"></a><a name="Library_procedure_null?"></a><a name="index-null_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_null?">null?</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is the empty list,
<a name="index-empty-list-6"></a>
otherwise returns <tt>#f</tt>.
</p>
 



<a name="Definition_of_list?"></a><a name="Library_procedure_list?"></a><a name="index-list_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list?">list?</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is a list, otherwise returns <tt>#f</tt>.
By definition, all lists have finite length and are terminated by
the empty list.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">        (list? '(a b c))               ==&gt;  #t
        (list? '())                    ==&gt;  #t
        (list? '(a . b))               ==&gt;  #f
        (let ((x (list 'a)))
          (set-cdr! x x)
          (list? x))                   ==&gt;  #f
</pre></td></tr></table>





<a name="Definition_of_list"></a><a name="Library_procedure_list"></a><a name="index-list"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list">list</a></b></code><i>  <var>obj</var> &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns a newly allocated list of its arguments.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(list 'a (+ 3 4) 'c)                   ==&gt;  (a 7 c)
(list)                                 ==&gt;  ()
</pre></td></tr></table>





<a name="Definition_of_length"></a><a name="Library_procedure_length"></a><a name="index-length-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_length">length</a></b></code><i>  list</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p>Returns the length of <var>list</var>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(length '(a b c))                      ==&gt;  3
(length '(a (b) (c d e)))              ==&gt;  3
(length '())                           ==&gt;  0
</pre></td></tr></table>





<a name="Definition_of_append"></a><a name="Library_procedure_append"></a><a name="index-append"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_append">append</a></b></code><i>  list &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p>Returns a list consisting of the elements of the first <var>list</var>
followed by the elements of the other <var>list</var>s.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(append '(x) '(y))                     ==&gt;  (x y)
(append '(a) '(b c d))                 ==&gt;  (a b c d)
(append '(a (b)) '((c)))               ==&gt;  (a (b) (c))
</pre></td></tr></table>


<p>The resulting list is always newly allocated, except that it shares
structure with the last <var>list</var> argument.  The last argument may
actually be any object; an improper list results if the last argument is not a
proper list.  
</p>


<table><tr><td>&nbsp;</td><td><pre class="format">(append '(a b) '(c . d))               ==&gt;  (a b c . d)
(append '() 'a)                        ==&gt;  a
</pre></td></tr></table>





<a name="Definition_of_reverse"></a><a name="Library_procedure_reverse"></a><a name="index-reverse"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_reverse">reverse</a></b></code><i>  list</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p>Returns a newly allocated list consisting of the elements of <var>list</var>
in reverse order.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(reverse '(a b c))                     ==&gt;  (c b a)
(reverse '(a (b c) d (e (f))))  
          ==&gt;  ((e (f)) d (b c) a)
</pre></td></tr></table>





<a name="Definition_of_list-tail"></a><a name="Library_procedure_list-tail"></a><a name="index-list_002dtail"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list-tail">list-tail</a></b></code><i>  list <var>k</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns the sublist of <var>list</var> obtained by omitting the first <var>k</var>
elements.  It is an error if <var>list</var> has fewer than <var>k</var> elements.
<samp>List-tail</samp> could be defined by
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define list-tail
  (lambda (x k)
    (if (zero? k)
        x
        (list-tail (cdr x) (- k 1)))))
</pre></td></tr></table>
 




<a name="Definition_of_list-ref"></a><a name="Library_procedure_list-ref"></a><a name="index-list_002dref"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list-ref">list-ref</a></b></code><i>  list <var>k</var></i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns the <var>k</var>th element of <var>list</var>.  (This is the same
as the car of <tt>(list-tail <var>list</var> <var>k</var>)</tt>.)
It is an error if <var>list</var> has fewer than <var>k</var> elements.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(list-ref '(a b c d) 2)                 ==&gt;  c
(list-ref '(a b c d)
          (inexact-&gt;exact (round 1.8))) 
          ==&gt;  c
</pre></td></tr></table>










<a name="Definition_of_memq"></a><a name="Library_procedure_memq"></a><a name="index-memq"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_memq">memq</a></b></code><i>  obj list</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_memv"></a><a name="Library_procedure_memv"></a><a name="index-memv"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_memv">memv</a></b></code><i>  obj list</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_member"></a><a name="Library_procedure_member"></a><a name="index-member"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_member">member</a></b></code><i>  obj list</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures return the first sublist of <var>list</var> whose car is
<var>obj</var>, where the sublists of <var>list</var> are the non-empty lists
returned by <tt>(list-tail <var>list</var> <var>k</var>)</tt> for <var>k</var> less
than the length of <var>list</var>.  If
<var>obj</var> does not occur in <var>list</var>, then <tt>#f</tt> (not the empty list) is
returned.  <samp>Memq</samp> uses <samp>eq?</samp> to compare <var>obj</var> with the elements of
<var>list</var>, while <samp>memv</samp> uses <samp>eqv?</samp> and <samp>member</samp> uses <samp>equal?</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(memq 'a '(a b c))                     ==&gt;  (a b c)
(memq 'b '(a b c))                     ==&gt;  (b c)
(memq 'a '(b c d))                     ==&gt;  #f
(memq (list 'a) '(b (a) c))            ==&gt;  #f
(member (list 'a)
        '(b (a) c))                    ==&gt;  ((a) c)
(memq 101 '(100 101 102))              ==&gt;  <em>unspecified</em>
(memv 101 '(100 101 102))              ==&gt;  (101 102)
</pre></td></tr></table>
 
 




<a name="Definition_of_assq"></a><a name="Library_procedure_assq"></a><a name="index-assq"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_assq">assq</a></b></code><i>  obj alist</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_assv"></a><a name="Library_procedure_assv"></a><a name="index-assv"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_assv">assv</a></b></code><i>  obj alist</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_assoc"></a><a name="Library_procedure_assoc"></a><a name="index-assoc"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_assoc">assoc</a></b></code><i>  obj alist</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><var>Alist</var> (for &ldquo;association list&rdquo;) must be a list of
pairs.  These procedures find the first pair in <var>alist</var> whose car field is <var>obj</var>,
and returns that pair.  If no pair in <var>alist</var> has <var>obj</var> as its
car, then <tt>#f</tt> (not the empty list) is returned.  <samp>Assq</samp> uses
<samp>eq?</samp> to compare <var>obj</var> with the car fields of the pairs in <var>alist</var>,
while <samp>assv</samp> uses <samp>eqv?</samp> and <samp>assoc</samp> uses <samp>equal?</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define e '((a 1) (b 2) (c 3)))
(assq 'a e)                            ==&gt;  (a 1)
(assq 'b e)                            ==&gt;  (b 2)
(assq 'd e)                            ==&gt;  #f
(assq (list 'a) '(((a)) ((b)) ((c))))
                                       ==&gt;  #f
(assoc (list 'a) '(((a)) ((b)) ((c))))   
                                       ==&gt;  ((a))
(assq 5 '((2 3) (5 7) (11 13)))    
                                       ==&gt;  <em>unspecified</em>
(assv 5 '((2 3) (5 7) (11 13)))    
                                       ==&gt;  (5 7)
</pre></td></tr></table>




<blockquote><p><em>Rationale:</em>
Although they are ordinarily used as predicates,
<samp>memq</samp>, <samp>memv</samp>, <samp>member</samp>, <samp>assq</samp>, <samp>assv</samp>, and <samp>assoc</samp> do not
have question marks in their names because they return useful values rather
than just <tt>#t</tt> or <tt>#f</tt>.
</p></blockquote>




<a name="Symbols"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Pairs-and-lists" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.2 Pairs and lists" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Characters" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.4 Characters" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Symbols-1"></a>
<h3 class="subsection">6.3.3 Symbols</h3>



<p>Symbols are objects whose usefulness rests on the fact that two
symbols are identical (in the sense of <samp>eqv?</samp>) if and only if their
names are spelled the same way.  This is exactly the property needed to
represent identifiers in programs, and so most
<a name="index-identifier-2"></a>
implementations of Scheme use them internally for that purpose.  Symbols
are useful for many other applications; for instance, they may be used
the way enumerated values are used in Pascal.
</p>
<p>The rules for writing a symbol are exactly the same as the rules for
writing an identifier; see sections <a href="#Identifiers">Identifiers</a>
and <a href="#Lexical-structure">Lexical structure</a>.
</p>
<p>It is guaranteed that any symbol that has been returned as part of
a literal expression, or read using the <samp>read</samp> procedure, and
subsequently written out using the <samp>write</samp> procedure, will read back
in as the identical symbol (in the sense of <samp>eqv?</samp>).  The
<samp>string-&gt;symbol</samp> procedure, however, can create symbols for
which this write/read invariance may not hold because their names
contain special characters or letters in the non-standard case.
</p>

<blockquote><p><em>Note:</em>
Some implementations of Scheme have a feature known as &ldquo;slashification&rdquo;
in order to guarantee write/read invariance for all symbols, but
historically the most important use of this feature has been to
compensate for the lack of a string data type.
</p>
<p>Some implementations also have &ldquo;uninterned symbols&rdquo;, which
defeat write/read invariance even in implementations with slashification,
and also generate exceptions to the rule that two symbols are the same
if and only if their names are spelled the same.
</p></blockquote>




<a name="Definition_of_symbol?"></a><a name="Procedure_symbol?"></a><a name="index-symbol_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_symbol?">symbol?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is a symbol, otherwise returns <tt>#f</tt>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(symbol? 'foo)                         ==&gt;  #t
(symbol? (car '(a b)))                 ==&gt;  #t
(symbol? &quot;bar&quot;)                        ==&gt;  #f
(symbol? 'nil)                         ==&gt;  #t
(symbol? '())                          ==&gt;  #f
(symbol? #f)                           ==&gt;  #f
</pre></td></tr></table>





<a name="Definition_of_symbol-%3Estring"></a><a name="Procedure_symbol-%3Estring"></a><a name="index-symbol_002d_003estring-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_symbol-%3Estring">symbol-&gt;string</a></b></code><i>  symbol</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the name of <var>symbol</var> as a string.  If the symbol was part of
an object returned as the value of a literal expression
(section see section <a href="#Literal-expressions">Literal expressions</a>) or by a call to the <samp>read</samp> procedure,
and its name contains alphabetic characters, then the string returned
will contain characters in the implementation's preferred standard
case&mdash;some implementations will prefer upper case, others lower case.
If the symbol was returned by <samp>string-&gt;symbol</samp>, the case of
characters in the string returned will be the same as the case in the
string that was passed to <samp>string-&gt;symbol</samp>.  It is an error
to apply mutation procedures like <code>string-set!</code> to strings returned
<a name="index-string_002dset_0021"></a>
by this procedure.
</p>
<p>The following examples assume that the implementation's standard case is
lower case:
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(symbol-&gt;string 'flying-fish)     
                                       ==&gt;  &quot;flying-fish&quot;
(symbol-&gt;string 'Martin)               ==&gt;  &quot;martin&quot;
(symbol-&gt;string
   (string-&gt;symbol &quot;Malvina&quot;))     
                                       ==&gt;  &quot;Malvina&quot;
</pre></td></tr></table>





<a name="Definition_of_string-%3Esymbol"></a><a name="Procedure_string-%3Esymbol"></a><a name="index-string_002d_003esymbol"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-%3Esymbol">string-&gt;symbol</a></b></code><i>  string</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the symbol whose name is <var>string</var>.  This procedure can
create symbols with names containing special characters or letters in
the non-standard case, but it is usually a bad idea to create such
symbols because in some implementations of Scheme they cannot be read as
themselves.  See <samp>symbol-&gt;string</samp>.
</p>
<p>The following examples assume that the implementation's standard case is
lower case:
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(eq? 'mISSISSIppi 'mississippi)  
          ==&gt;  #t
(string-&gt;symbol &quot;mISSISSIppi&quot;)  
          ==&gt;
  <span class="roman"></span>the symbol with name &quot;mISSISSIppi&quot;
(eq? 'bitBlt (string-&gt;symbol &quot;bitBlt&quot;))     
          ==&gt;  #f
(eq? 'JollyWog
     (string-&gt;symbol
       (symbol-&gt;string 'JollyWog)))  
          ==&gt;  #t
(string=? &quot;K. Harper, M.D.&quot;
          (symbol-&gt;string
            (string-&gt;symbol &quot;K. Harper, M.D.&quot;)))  
          ==&gt;  #t
</pre></td></tr></table>





<a name="Characters"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Symbols" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.3 Symbols" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Strings" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.5 Strings" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Characters-1"></a>
<h3 class="subsection">6.3.4 Characters</h3>



<p>Characters are objects that represent printed characters such as
letters and digits.  
Characters are written using the notation #\<span class="roman">&lt;character&gt;</span>
or #\<span class="roman">&lt;character name&gt;</span>.
For example:
</p>


 <blockquote><dl compact="compact">
<dt> <tt>#\a</tt></dt>
</dl>
</blockquote>
<p>; lower case letter
</p> <tt>#\A</tt>
<p>; upper case letter
</p> <tt>#\(</tt>
<p>; left parenthesis
</p> <tt>#\ </tt>
<p>; the space character
</p> <tt>#\space</tt>
<p>; the preferred way to write a space
</p> <tt>#\newline</tt>
<p>; the newline character
</p> 




<p>Case is significant in #\<span class="roman">&lt;character&gt;</span>, but not in
#\<span class="roman">&lt;character name&gt;</span>.  
</p>                                                            
<p>If <span class="roman">&lt;character&gt;</span> in
#\<span class="roman">&lt;character&gt;</span> is alphabetic, then the character
following <span class="roman">&lt;character&gt;</span> must be a delimiter character such as a
space or parenthesis.  This rule resolves the ambiguous case where, for
example, the sequence of characters &ldquo;<tt>#\ space</tt>&rdquo;
could be taken to be either a representation of the space character or a
representation of the character &ldquo;<tt>#\ s</tt>&rdquo; followed
by a representation of the symbol &ldquo;<tt>pace</tt>.&rdquo;
</p>

<p>Characters written in the #\ notation are self-evaluating.
That is, they do not have to be quoted in programs.  
</p>
<p>Some of the procedures that operate on characters ignore the
difference between upper case and lower case.  The procedures that
ignore case have &ldquo;<tt>-ci</tt>&rdquo; (for &ldquo;case
insensitive&rdquo;) embedded in their names.
</p>


<a name="Definition_of_char?"></a><a name="Procedure_char?"></a><a name="index-char_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char?">char?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is a character, otherwise returns <tt>#f</tt>.
</p>




<a name="Definition_of_char=?"></a><a name="Procedure_char=?"></a><a name="index-char_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char=?">char=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_char%3C?"></a><a name="Procedure_char%3C?"></a><a name="index-char_003c_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char%3C?">char&lt;?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_char%3E?"></a><a name="Procedure_char%3E?"></a><a name="index-char_003e_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char%3E?">char&gt;?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_char%3C=?"></a><a name="Procedure_char%3C=?"></a><a name="index-char_003c_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char%3C=?">char&lt;=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_char%3E=?"></a><a name="Procedure_char%3E=?"></a><a name="index-char_003e_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char%3E=?">char&gt;=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">procedure</td></tr></table>



<p>These procedures impose a total ordering on the set of characters.  It
is guaranteed that under this ordering:
</p>


<ul>
<li>
The upper case characters are in order.  For example, <samp>(char&lt;? #\A #\B)</samp> returns <tt>#t</tt>.
</li><li>
The lower case characters are in order.  For example, <samp>(char&lt;? #\a #\b)</samp> returns <tt>#t</tt>.
</li><li>
The digits are in order.  For example, <samp>(char&lt;? #\0 #\9)</samp> returns <tt>#t</tt>.
</li><li>
Either all the digits precede all the upper case letters, or vice versa.
</li><li>
Either all the digits precede all the lower case letters, or vice versa.

</li></ul>


<p>Some implementations may generalize these procedures to take more than
two arguments, as with the corresponding numerical predicates.
</p>




<a name="Definition_of_char-ci=?"></a><a name="Library_procedure_char-ci=?"></a><a name="index-char_002dci_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-ci=?">char-ci=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-ci%3C?"></a><a name="Library_procedure_char-ci%3C?"></a><a name="index-char_002dci_003c_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-ci%3C?">char-ci&lt;?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-ci%3E?"></a><a name="Library_procedure_char-ci%3E?"></a><a name="index-char_002dci_003e_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-ci%3E?">char-ci&gt;?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-ci%3C=?"></a><a name="Library_procedure_char-ci%3C=?"></a><a name="index-char_002dci_003c_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-ci%3C=?">char-ci&lt;=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-ci%3E=?"></a><a name="Library_procedure_char-ci%3E=?"></a><a name="index-char_002dci_003e_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-ci%3E=?">char-ci&gt;=?</a></b></code><i>  char1 char2</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p>These procedures are similar to <samp>char=?</samp> et cetera, but they treat
upper case and lower case letters as the same.  For example, <samp>(char-ci=? #\A #\a)</samp> returns <tt>#t</tt>.  Some
implementations may generalize these procedures to take more than two
arguments, as with the corresponding numerical predicates.
</p>




<a name="Definition_of_char-alphabetic?"></a><a name="Library_procedure_char-alphabetic?"></a><a name="index-char_002dalphabetic_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-alphabetic?">char-alphabetic?</a></b></code><i>  char</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-numeric?"></a><a name="Library_procedure_char-numeric?"></a><a name="index-char_002dnumeric_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-numeric?">char-numeric?</a></b></code><i>  char</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-whitespace?"></a><a name="Library_procedure_char-whitespace?"></a><a name="index-char_002dwhitespace_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-whitespace?">char-whitespace?</a></b></code><i>  char</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-upper-case?"></a><a name="Library_procedure_char-upper-case?"></a><a name="index-char_002dupper_002dcase_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-upper-case?">char-upper-case?</a></b></code><i>  letter</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-lower-case?"></a><a name="Library_procedure_char-lower-case?"></a><a name="index-char_002dlower_002dcase_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-lower-case?">char-lower-case?</a></b></code><i>  letter</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures return <tt>#t</tt> if their arguments are alphabetic,
numeric, whitespace, upper case, or lower case characters, respectively,
otherwise they return <tt>#f</tt>.  The following remarks, which are specific to
the ASCII character set, are intended only as a guide:  The alphabetic characters
are the 52 upper and lower case letters.  The numeric characters are the
ten decimal digits.  The whitespace characters are space, tab, line
feed, form feed, and carriage return.
</p>






<a name="Definition_of_char-%3Einteger"></a><a name="Procedure_char-%3Einteger"></a><a name="index-char_002d_003einteger"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char-%3Einteger">char-&gt;integer</a></b></code><i>  char</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_integer-%3Echar"></a><a name="Procedure_integer-%3Echar"></a><a name="index-integer_002d_003echar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_integer-%3Echar">integer-&gt;char</a></b></code><i>  <var>n</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Given a character, <samp>char-&gt;integer</samp> returns an exact integer
representation of the character.  Given an exact integer that is the image of
a character under <samp>char-&gt;integer</samp>, <samp>integer-&gt;char</samp>
returns that character.  These procedures implement order-preserving isomorphisms
between the set of characters under the <code>char&lt;=?</code> ordering and some
<a name="index-char_003c_003d_003f-1"></a>
subset of the integers under the <samp>&lt;=</samp> ordering.  That is, if
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(char&lt;=? <var>a</var> <var>b</var>) &rArr; #t  <span class="roman"></span>and  (&lt;= <var>x</var> <var>y</var>) &rArr; #t
</pre></td></tr></table>



<p> and <var>x</var> and <var>y</var> are in the domain of
<samp>integer-&gt;char</samp>, then
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(&lt;= (char-&gt;integer <var>a</var>)
    (char-&gt;integer <var>b</var>))                 ==&gt;  #t

(char&lt;=? (integer-&gt;char <var>x</var>)
         (integer-&gt;char <var>y</var>))            ==&gt;  #t
</pre></td></tr></table>






<a name="Definition_of_char-upcase"></a><a name="Library_procedure_char-upcase"></a><a name="index-char_002dupcase"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-upcase">char-upcase</a></b></code><i>  char</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_char-downcase"></a><a name="Library_procedure_char-downcase"></a><a name="index-char_002ddowncase"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_char-downcase">char-downcase</a></b></code><i>  char</i><code>)</code></td><td align="right">library procedure</td></tr></table>


<p>These procedures return a character <var>char2</var> such that <samp>(char-ci=? <var>char</var> <var>char2</var>)</samp>.  In addition, if <var>char</var> is
alphabetic, then the result of <samp>char-upcase</samp> is upper case and the
result of <samp>char-downcase</samp> is lower case.
</p>



<a name="Strings"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Characters" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.4 Characters" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Vectors" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.3.6 Vectors" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Strings-1"></a>
<h3 class="subsection">6.3.5 Strings</h3>



<p>Strings are sequences of characters.  
Strings are written as sequences of characters enclosed within doublequotes
(<samp>&quot;</samp>).  A doublequote can be written inside a string only by escaping
it with a backslash (\), as in
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
&quot;The word \&quot;recursion\&quot; has many meanings.&quot;
</pre></td></tr></table>


<p>A backslash can be written inside a string only by escaping it with another
backslash.  Scheme does not specify the effect of a backslash within a
string that is not followed by a doublequote or backslash.
</p>
<p>A string constant may continue from one line to the next, but
the exact contents of such a string are unspecified.
</p>
<p>The <em>length</em> of a string is the number of characters that it
contains.  This number is an exact, non-negative integer that is fixed when the
string is created.  The <em>valid indexes</em> of a string are the
<a name="index-valid-indexes"></a>
exact non-negative integers less than the length of the string.  The first
character of a string has index 0, the second has index 1, and so on.
</p>
<p>In phrases such as &ldquo;the characters of <var>string</var> beginning with
index <var>start</var> and ending with index <var>end</var>,&rdquo; it is understood
that the index <var>start</var> is inclusive and the index <var>end</var> is
exclusive.  Thus if <var>start</var> and <var>end</var> are the same index, a null
substring is referred to, and if <var>start</var> is zero and <var>end</var> is
the length of <var>string</var>, then the entire string is referred to.
</p>
<p>Some of the procedures that operate on strings ignore the
difference between upper and lower case.  The versions that ignore case
have &ldquo;<samp>-ci</samp>&rdquo; (for &ldquo;case insensitive&rdquo;) embedded in their
names.
</p>


<a name="Definition_of_string?"></a><a name="Procedure_string?"></a><a name="index-string_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string?">string?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is a string, otherwise returns <tt>#f</tt>.
</p>



<a name="Definition_of_make-string"></a><a name="Procedure_make-string"></a><a name="index-make_002dstring"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-string">make-string</a></b></code><i>  <var>k</var></i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_make-string"></a><a name="Procedure_make-string"></a><a name="index-make_002dstring-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-string">make-string</a></b></code><i>  <var>k</var> char</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><samp>Make-string</samp> returns a newly allocated string of
length <var>k</var>.  If <var>char</var> is given, then all elements of the string
are initialized to <var>char</var>, otherwise the contents of the
<var>string</var> are unspecified.
</p>



<a name="Definition_of_string"></a><a name="Library_procedure_string"></a><a name="index-string"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string">string</a></b></code><i>  char &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns a newly allocated string composed of the arguments.
</p>



<a name="Definition_of_string-length"></a><a name="Procedure_string-length"></a><a name="index-string_002dlength-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-length">string-length</a></b></code><i>  string</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the number of characters in the given <var>string</var>.
</p>



<a name="Definition_of_string-ref"></a><a name="Procedure_string-ref"></a><a name="index-string_002dref"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-ref">string-ref</a></b></code><i>  string <var>k</var></i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>k</var> must be a valid index of <var>string</var>.
<samp>String-ref</samp> returns character <var>k</var> of <var>string</var> using zero-origin indexing.
</p>



<a name="Definition_of_string-set!"></a><a name="Procedure_string-set!"></a><a name="index-string_002dset_0021-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_string-set!">string-set!</a></b></code><i>  string k char</i><code>)</code></td><td align="right">procedure</td></tr></table>


<p><var>k</var> must be a valid index of <var>string</var>
.
<samp>String-set!</samp> stores <var>char</var> in element <var>k</var> of <var>string</var>
and returns an unspecified value.  
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define (f) (make-string 3 #\*))
(define (g) &quot;***&quot;)
(string-set! (f) 0 #\?)                ==&gt;  <em>unspecified</em>
(string-set! (g) 0 #\?)                ==&gt;  <em>error</em>
(string-set! (symbol-&gt;string 'immutable)
             0
             #\?)                      ==&gt;  <em>error</em>
</pre></td></tr></table>






<a name="Definition_of_string=?"></a><a name="Library_procedure_string=?"></a><a name="index-string_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string=?">string=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string-ci=?"></a><a name="Library_procedure_string-ci=?"></a><a name="index-string_002dci_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-ci=?">string-ci=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns <tt>#t</tt> if the two strings are the same length and contain the same
characters in the same positions, otherwise returns <tt>#f</tt>.
<samp>String-ci=?</samp> treats
upper and lower case letters as though they were the same character, but
<samp>string=?</samp> treats upper and lower case as distinct characters.
</p>




<a name="Definition_of_string%3C?"></a><a name="Library_procedure_string%3C?"></a><a name="index-string_003c_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string%3C?">string&lt;?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string%3E?"></a><a name="Library_procedure_string%3E?"></a><a name="index-string_003e_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string%3E?">string&gt;?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string%3C=?"></a><a name="Library_procedure_string%3C=?"></a><a name="index-string_003c_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string%3C=?">string&lt;=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string%3E=?"></a><a name="Library_procedure_string%3E=?"></a><a name="index-string_003e_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string%3E=?">string&gt;=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string-ci%3C?"></a><a name="Library_procedure_string-ci%3C?"></a><a name="index-string_002dci_003c_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-ci%3C?">string-ci&lt;?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string-ci%3E?"></a><a name="Library_procedure_string-ci%3E?"></a><a name="index-string_002dci_003e_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-ci%3E?">string-ci&gt;?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string-ci%3C=?"></a><a name="Library_procedure_string-ci%3C=?"></a><a name="index-string_002dci_003c_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-ci%3C=?">string-ci&lt;=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_string-ci%3E=?"></a><a name="Library_procedure_string-ci%3E=?"></a><a name="index-string_002dci_003e_003d_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-ci%3E=?">string-ci&gt;=?</a></b></code><i>  string1 string2</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>These procedures are the lexicographic extensions to strings of the
corresponding orderings on characters.  For example, <samp>string&lt;?</samp> is
the lexicographic ordering on strings induced by the ordering
<samp>char&lt;?</samp> on characters.  If two strings differ in length but
are the same up to the length of the shorter string, the shorter string
is considered to be lexicographically less than the longer string.
</p>
<p>Implementations may generalize these and the <samp>string=?</samp> and
<samp>string-ci=?</samp> procedures to take more than two arguments, as with
the corresponding numerical predicates.
</p>




<a name="Definition_of_substring"></a><a name="Library_procedure_substring"></a><a name="index-substring"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_substring">substring</a></b></code><i>  string start end</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><var>String</var> must be a string, and <var>start</var> and <var>end</var>
must be exact integers satisfying
</p>

<p align="center"> 0 &lt;= <var>start</var> &lt;= <var>end</var> &lt;= <tt>(string-length <var>string</var>)<span class="roman">.</span></tt>
</p>
<p><samp>Substring</samp> returns a newly allocated string formed from the characters of
<var>string</var> beginning with index <var>start</var> (inclusive) and ending with index
<var>end</var> (exclusive).
</p>



<a name="Definition_of_string-append"></a><a name="Library_procedure_string-append"></a><a name="index-string_002dappend"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-append">string-append</a></b></code><i>  <var>string</var> &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns a newly allocated string whose characters form the concatenation of the
given strings.
</p>




<a name="Definition_of_string-%3Elist"></a><a name="Library_procedure_string-%3Elist"></a><a name="index-string_002d_003elist"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-%3Elist">string-&gt;list</a></b></code><i>  string</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_list-%3Estring"></a><a name="Library_procedure_list-%3Estring"></a><a name="index-list_002d_003estring"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list-%3Estring">list-&gt;string</a></b></code><i>  list</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>String-&gt;list</samp> returns a newly allocated list of the
characters that make up the given string.  <samp>List-&gt;string</samp>
returns a newly allocated string formed from the characters in the list
<var>list</var>, which must be a list of characters. <samp>String-&gt;list</samp>
and <samp>list-&gt;string</samp> are
inverses so far as <samp>equal?</samp> is concerned.  
</p>




<a name="Definition_of_string-copy"></a><a name="Library_procedure_string-copy"></a><a name="index-string_002dcopy"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-copy">string-copy</a></b></code><i>  string</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns a newly allocated copy of the given <var>string</var>.
</p>




<a name="Definition_of_string-fill!"></a><a name="Library_procedure_string-fill!"></a><a name="index-string_002dfill_0021"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_string-fill!">string-fill!</a></b></code><i>  string char</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Stores <var>char</var> in every element of the given <var>string</var> and returns an
unspecified value.  
</p>



<a name="Vectors"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Strings" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.5 Strings" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Control-features" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.4 Control features" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Other-data-types" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.3 Other data types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Vectors-1"></a>
<h3 class="subsection">6.3.6 Vectors</h3>



<p>Vectors are heterogeneous structures whose elements are indexed
by integers.  A vector typically occupies less space than a list
of the same length, and the average time required to access a randomly
chosen element is typically less for the vector than for the list.
</p>
<p>The <em>length</em> of a vector is the number of elements that it
contains.  This number is a non-negative integer that is fixed when the
vector is created.  The <em>valid indexes</em> of a
<a name="index-valid-indexes-1"></a>
vector are the exact non-negative integers less than the length of the
vector.  The first element in a vector is indexed by zero, and the last
element is indexed by one less than the length of the vector.
</p>
<p>Vectors are written using the notation <tt>#(<var>obj</var> &hellip;)</tt>.
For example, a vector of length 3 containing the number zero in element
0, the list <samp>(2 2 2 2)</samp> in element 1, and the string <samp>&quot;Anna&quot;</samp> in
element 2 can be written as following:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
#(0 (2 2 2 2) &quot;Anna&quot;)
</pre></td></tr></table>


<p>Note that this is the external representation of a vector, not an
expression evaluating to a vector.  Like list constants, vector
constants must be quoted:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
'#(0 (2 2 2 2) &quot;Anna&quot;)  
          ==&gt;  #(0 (2 2 2 2) &quot;Anna&quot;)

</pre></td></tr></table>






<a name="Definition_of_vector?"></a><a name="Procedure_vector?"></a><a name="index-vector_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_vector?">vector?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
 
<p>Returns <tt>#t</tt> if <var>obj</var> is a vector, otherwise returns <tt>#f</tt>.
</p>



<a name="Definition_of_make-vector"></a><a name="Procedure_make-vector"></a><a name="index-make_002dvector-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-vector">make-vector</a></b></code><i>  k</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_make-vector"></a><a name="Procedure_make-vector"></a><a name="index-make_002dvector-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_make-vector">make-vector</a></b></code><i>  k fill</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns a newly allocated vector of <var>k</var> elements.  If a second
argument is given, then each element is initialized to <var>fill</var>.
Otherwise the initial contents of each element is unspecified.
</p>




<a name="Definition_of_vector"></a><a name="Library_procedure_vector"></a><a name="index-vector"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_vector">vector</a></b></code><i>  obj &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Returns a newly allocated vector whose elements contain the given
arguments.  Analogous to <samp>list</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(vector 'a 'b 'c)                      ==&gt;  #(a b c)
</pre></td></tr></table>





<a name="Definition_of_vector-length"></a><a name="Procedure_vector-length"></a><a name="index-vector_002dlength-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_vector-length">vector-length</a></b></code><i>  vector</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the number of elements in <var>vector</var> as an exact integer.
</p>



<a name="Definition_of_vector-ref"></a><a name="Procedure_vector-ref"></a><a name="index-vector_002dref-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_vector-ref">vector-ref</a></b></code><i>  vector k</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>k</var> must be a valid index of <var>vector</var>.
<samp>Vector-ref</samp> returns the contents of element <var>k</var> of
<var>vector</var>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(vector-ref '#(1 1 2 3 5 8 13 21)
            5)  
          ==&gt;  8
(vector-ref '#(1 1 2 3 5 8 13 21)
            (let ((i (round (* 2 (acos -1)))))
              (if (inexact? i)
                  (inexact-&gt;exact i)
                  i))) 
          ==&gt; 13
</pre></td></tr></table>





<a name="Definition_of_vector-set!"></a><a name="Procedure_vector-set!"></a><a name="index-vector_002dset_0021"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_vector-set!">vector-set!</a></b></code><i>  vector k obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>k</var> must be a valid index of <var>vector</var>.
<samp>Vector-set!</samp> stores <var>obj</var> in element <var>k</var> of <var>vector</var>.
The value returned by <samp>vector-set!</samp> is unspecified.  
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((vec (vector 0 '(2 2 2 2) &quot;Anna&quot;)))
  (vector-set! vec 1 '(&quot;Sue&quot; &quot;Sue&quot;))
  vec)      
          ==&gt;  #(0 (&quot;Sue&quot; &quot;Sue&quot;) &quot;Anna&quot;)

(vector-set! '#(0 1 2) 1 &quot;doe&quot;)  
          ==&gt;  <em>error</em>  ; constant vector
</pre></td></tr></table>





<a name="Definition_of_vector-%3Elist"></a><a name="Library_procedure_vector-%3Elist"></a><a name="index-vector_002d_003elist"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_vector-%3Elist">vector-&gt;list</a></b></code><i>  vector</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_list-%3Evector"></a><a name="Library_procedure_list-%3Evector"></a><a name="index-list_002d_003evector"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_list-%3Evector">list-&gt;vector</a></b></code><i>  list</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Vector-&gt;list</samp> returns a newly allocated list of the objects contained
in the elements of <var>vector</var>.  <samp>List-&gt;vector</samp> returns a newly
created vector initialized to the elements of the list <var>list</var>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(vector-&gt;list '#(dah dah didah))  
          ==&gt;  (dah dah didah)
(list-&gt;vector '(dididit dah))   
          ==&gt;  #(dididit dah)
</pre></td></tr></table>





<a name="Definition_of_vector-fill!"></a><a name="Library_procedure_vector-fill!"></a><a name="index-vector_002dfill_0021"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_vector-fill!">vector-fill!</a></b></code><i>  vector fill</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Stores <var>fill</var> in every element of <var>vector</var>.
The value returned by <samp>vector-fill!</samp> is unspecified.  
</p>



<a name="Control-features"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Vectors" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.3.6 Vectors" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Eval" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.5 Eval" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Control-features-1"></a>
<h2 class="section">6.4 Control features</h2>


 

<p>This chapter describes various primitive procedures which control the
flow of program execution in special ways.
The <samp>procedure?</samp> predicate is also described here.
</p>



<a name="Definition_of_procedure?"></a><a name="Procedure_procedure?"></a><a name="index-procedure_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_procedure?">procedure?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is a procedure, otherwise returns <tt>#f</tt>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(procedure? car)                       ==&gt;  #t
(procedure? 'car)                      ==&gt;  #f
(procedure? (lambda (x) (* x x)))   
                                       ==&gt;  #t
(procedure? '(lambda (x) (* x x)))  
                                       ==&gt;  #f
(call-with-current-continuation procedure?)
                                       ==&gt;  #t
</pre></td></tr></table>






<a name="Definition_of_apply"></a><a name="Procedure_apply"></a><a name="index-apply-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_apply">apply</a></b></code><i>  proc arg1 &hellip; args</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>Proc</var> must be a procedure and <var>args</var> must be a list.
Calls <var>proc</var> with the elements of the list
<samp>(append (list <var>arg1</var> &hellip;) <var>args</var>)</samp> as the actual
arguments.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(apply + (list 3 4))                   ==&gt;  7

(define compose
  (lambda (f g)
    (lambda args
      (f (apply g args)))))

((compose sqrt *) 12 75)               ==&gt;  30
</pre></td></tr></table>





<a name="Definition_of_map"></a><a name="Library_procedure_map"></a><a name="index-map"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_map">map</a></b></code><i>  proc list1 list2 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>The <var>list</var>s must be lists, and <var>proc</var> must be a
procedure taking as many arguments as there are <i>list</i>s
and returning a single value.  If more
than one <var>list</var> is given, then they must all be the same length.
<samp>Map</samp> applies <var>proc</var> element-wise to the elements of the
<var>list</var>s and returns a list of the results, in order.
The dynamic order in which <var>proc</var> is applied to the elements of the
<var>list</var>s is unspecified.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(map cadr '((a b) (d e) (g h)))   
          ==&gt;  (b e h)

(map (lambda (n) (expt n n))
     '(1 2 3 4 5))                
          ==&gt;  (1 4 27 256 3125)

(map + '(1 2 3) '(4 5 6))              ==&gt;  (5 7 9)

(let ((count 0))
  (map (lambda (ignored)
         (set! count (+ count 1))
         count)
       '(a b)))                        ==&gt;  (1 2) <var>or</var> (2 1)
</pre></td></tr></table>






<a name="Definition_of_for-each"></a><a name="Library_procedure_for-each"></a><a name="index-for_002deach"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_for-each">for-each</a></b></code><i>  proc list1 list2 &hellip;</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>The arguments to <samp>for-each</samp> are like the arguments to <samp>map</samp>, but
<samp>for-each</samp> calls <var>proc</var> for its side effects rather than for its
values.  Unlike <samp>map</samp>, <samp>for-each</samp> is guaranteed to call <var>proc</var> on
the elements of the <var>list</var>s in order from the first element(s) to the
last, and the value returned by <samp>for-each</samp> is unspecified.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((v (make-vector 5)))
  (for-each (lambda (i)
              (vector-set! v i (* i i)))
            '(0 1 2 3 4))
  v)                                   ==&gt;  #(0 1 4 9 16)
</pre></td></tr></table>






<a name="Definition_of_force"></a><a name="Library_procedure_force"></a><a name="index-force-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_force">force</a></b></code><i>  promise</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Forces the value of <var>promise</var> (see <code>delay</code>,
<a name="index-delay-1"></a>
section see section <a href="#Delayed-evaluation">Delayed evaluation</a>).  If no value has been computed for
<a name="index-promise-1"></a>
the promise, then a value is computed and returned.  The value of the
promise is cached (or &ldquo;memoized&rdquo;) so that if it is forced a second
time, the previously computed value is returned.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(force (delay (+ 1 2)))                ==&gt;  3
(let ((p (delay (+ 1 2))))
  (list (force p) (force p)))  
                                       ==&gt;  (3 3)

(define a-stream
  (letrec ((next
            (lambda (n)
              (cons n (delay (next (+ n 1)))))))
    (next 0)))
(define head car)
(define tail
  (lambda (stream) (force (cdr stream))))

(head (tail (tail a-stream)))  
                                       ==&gt;  2
</pre></td></tr></table>


<p><samp>Force</samp> and <samp>delay</samp> are mainly intended for programs written in
functional style.  The following examples should not be considered to
illustrate good programming style, but they illustrate the property that
only one value is computed for a promise, no matter how many times it is
forced.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define count 0)
(define p
  (delay (begin (set! count (+ count 1))
                (if (&gt; count x)
                    count
                    (force p)))))
(define x 5)
p                                      ==&gt;  <i></i>a promise
(force p)                              ==&gt;  6
p                                      ==&gt;  <i></i>a promise, still
(begin (set! x 10)
       (force p))                      ==&gt;  6
</pre></td></tr></table>


<p>Here is a possible implementation of <samp>delay</samp> and <samp>force</samp>.
Promises are implemented here as procedures of no arguments,
and <samp>force</samp> simply calls its argument:
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define force
  (lambda (object)
    (object)))
</pre></td></tr></table>


<p>We define the expression
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(delay <span class="roman">&lt;expression&gt;</span>)
</pre></td></tr></table>


<p>to have the same meaning as the procedure call
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(make-promise (lambda () <span class="roman">&lt;expression&gt;</span>))<span class="roman"></span>
</pre></td></tr></table>


<p>as follows
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(define-syntax delay
  (syntax-rules ()
    ((delay expression)
     (make-promise (lambda () expression))))),
</pre></td></tr></table>


<p>where <samp>make-promise</samp> is defined as follows:
</p>


<table><tr><td>&nbsp;</td><td><pre class="format">(define make-promise
  (lambda (proc)
    (let ((result-ready? #f)
          (result #f))
      (lambda ()
        (if result-ready?
            result
            (let ((x (proc)))
              (if result-ready?
                  result
                  (begin (set! result-ready? #t)
                         (set! result x)
                         result))))))))
</pre></td></tr></table>



<blockquote><p><em>Rationale:</em>
A promise may refer to its own value, as in the last example above.
Forcing such a promise may cause the promise to be forced a second time
before the value of the first force has been computed.
This complicates the definition of <samp>make-promise</samp>.
</p></blockquote>


<p>Various extensions to this semantics of <samp>delay</samp> and <samp>force</samp>
are supported in some implementations:
</p>


<ul>
<li>
Calling <samp>force</samp> on an object that is not a promise may simply
return the object.

</li><li>
It may be the case that there is no means by which a promise can be
operationally distinguished from its forced value.  That is, expressions
like the following may evaluate to either <tt>#t</tt> or to <tt>#f</tt>,
depending on the implementation:


<table><tr><td>&nbsp;</td><td><pre class="format">(eqv? (delay 1) 1)                ==&gt;  <em>unspecified</em>
(pair? (delay (cons 1 2)))        ==&gt;  <em>unspecified</em>
</pre></td></tr></table>


</li><li>
Some implementations may implement &ldquo;implicit forcing,&rdquo; where
the value of a promise is forced by primitive procedures like <samp>cdr</samp>
and <samp>+</samp>:


<table><tr><td>&nbsp;</td><td><pre class="format">(+ (delay (* 3 7)) 13)            ==&gt;  34
</pre></td></tr></table>


</li></ul>




<a name="Definition_of_call-with-current-continuation"></a><a name="Procedure_call-with-current-continuation"></a><a name="index-call_002dwith_002dcurrent_002dcontinuation-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_call-with-current-continuation">call-with-current-continuation</a></b></code><i>  proc</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p> <var>Proc</var> must be a procedure of one
argument. The procedure <samp>call-with-current-continuation</samp> packages
up the current continuation (see the rationale below) as an &ldquo;escape
procedure&rdquo; and passes it as an argument to
<a name="index-escape-procedure"></a>
<var>proc</var>.  The escape procedure is a Scheme procedure that, if it is
later called, will abandon whatever continuation is in effect at that later
time and will instead use the continuation that was in effect
when the escape procedure was created.  Calling the escape procedure
may cause the invocation of <var>before</var> and <var>after</var> thunks installed using
<code>dynamic-wind</code>.
<a name="index-dynamic_002dwind"></a>
</p>
<p>The escape procedure accepts the same number of arguments as the continuation to
the original call to <tt>call-with-current-continuation</tt>.
Except for continuations created by the <samp>call-with-values</samp>
procedure, all continuations take exactly one value.  The
effect of passing no value or more than one value to continuations
that were not created by <tt>call-with-values</tt> is unspecified.
</p>
<p>The escape procedure that is passed to <var>proc</var> has
unlimited extent just like any other procedure in Scheme.  It may be stored
in variables or data structures and may be called as many times as desired.
</p>
<p>The following examples show only the most common ways in which
<samp>call-with-current-continuation</samp> is used.  If all real uses were as
simple as these examples, there would be no need for a procedure with
the power of <samp>call-with-current-continuation</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(call-with-current-continuation
  (lambda (exit)
    (for-each (lambda (x)
                (if (negative? x)
                    (exit x)))
              '(54 0 37 -3 245 19))
    #t))                               ==&gt;  -3

(define list-length
  (lambda (obj)
    (call-with-current-continuation
      (lambda (return)
        (letrec ((r
                  (lambda (obj)
                    (cond ((null? obj) 0)
                          ((pair? obj)
                           (+ (r (cdr obj)) 1))
                          (else (return #f))))))
          (r obj))))))

(list-length '(1 2 3 4))               ==&gt;  4

(list-length '(a b . c))               ==&gt;  #f
</pre></td></tr></table>



<blockquote><p><em>Rationale:</em>
</p>
<p>A common use of <samp>call-with-current-continuation</samp> is for
structured, non-local exits from loops or procedure bodies, but in fact
<samp>call-with-current-continuation</samp> is extremely useful for implementing a
wide variety of advanced control structures.
</p>
<p>Whenever a Scheme expression is evaluated there is a
<em>continuation</em> wanting the result of the expression.  The continuation
<a name="index-continuation"></a>
represents an entire (default) future for the computation.  If the expression is
evaluated at top level, for example, then the continuation might take the
result, print it on the screen, prompt for the next input, evaluate it, and
so on forever.  Most of the time the continuation includes actions
specified by user code, as in a continuation that will take the result,
multiply it by the value stored in a local variable, add seven, and give
the answer to the top level continuation to be printed.  Normally these
ubiquitous continuations are hidden behind the scenes and programmers do not
think much about them.  On rare occasions, however, a programmer may
need to deal with continuations explicitly.
<samp>Call-with-current-continuation</samp> allows Scheme programmers to do
that by creating a procedure that acts just like the current
continuation.
</p>
<p>Most programming languages incorporate one or more special-purpose
escape constructs with names like <tt>exit</tt>, <samp>return</samp>, or
even <tt>goto</tt>.  In 1965, however, Peter Landin [Landin65]
invented a general purpose escape operator called the J-operator.  John
Reynolds [Reynolds72] described a simpler but equally powerful
construct in 1972.  The <samp>catch</samp> special form described by Sussman
and Steele in the 1975 report on Scheme is exactly the same as
Reynolds's construct, though its name came from a less general construct
in MacLisp.  Several Scheme implementors noticed that the full power of the
<code>catch</code> construct could be provided by a procedure instead of by a
<a name="index-catch"></a>
special syntactic construct, and the name
<samp>call-with-current-continuation</samp> was coined in 1982.  This name is
descriptive, but opinions differ on the merits of such a long name, and
some people use the name <code>call/cc</code> instead.
<a name="index-call_002fcc"></a>
</p></blockquote>





<a name="Definition_of_values"></a><a name="Procedure_values"></a><a name="index-values-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_values">values</a></b></code><i>  obj &hellip;</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Delivers all of its arguments to its continuation.
Except for continuations created by the <code>call-with-values</code>
<a name="index-call_002dwith_002dvalues-1"></a>
procedure, all continuations take exactly one value.
<tt>Values</tt> might be defined as follows:
</p>
<table><tr><td>&nbsp;</td><td><pre class="format">(define (values . things)
  (call-with-current-continuation 
    (lambda (cont) (apply cont things))))
</pre></td></tr></table>





<a name="Definition_of_call-with-values"></a><a name="Procedure_call-with-values"></a><a name="index-call_002dwith_002dvalues-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_call-with-values">call-with-values</a></b></code><i>  producer consumer</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Calls its <var>producer</var> argument with no values and
a continuation that, when passed some values, calls the
<var>consumer</var> procedure with those values as arguments.
The continuation for the call to <var>consumer</var> is the
continuation of the call to <tt>call-with-values</tt>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(call-with-values (lambda () (values 4 5))
                  (lambda (a b) b))
                                                   ==&gt;  5

(call-with-values * -)                             ==&gt;  -1
</pre></td></tr></table>





<a name="Definition_of_dynamic-wind"></a><a name="Procedure_dynamic-wind"></a><a name="index-dynamic_002dwind-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_dynamic-wind">dynamic-wind</a></b></code><i>  before thunk after</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Calls <var>thunk</var> without arguments, returning the result(s) of this call.
<var>Before</var> and <var>after</var> are called, also without arguments, as required
by the following rules (note that in the absence of calls to continuations
captured using <code>call-with-current-continuation</code> the three arguments are
<a name="index-call_002dwith_002dcurrent_002dcontinuation-2"></a>
called once each, in order).  <var>Before</var> is called whenever execution
enters the dynamic extent of the call to <var>thunk</var> and <var>after</var> is called
whenever it exits that dynamic extent.  The dynamic extent of a procedure
call is the period between when the call is initiated and when it
returns.  In Scheme, because of <samp>call-with-current-continuation</samp>, the
dynamic extent of a call may not be a single, connected time period.
It is defined as follows:
</p>

<ul>
<li>
The dynamic extent is entered when execution of the body of the
called procedure begins.

</li><li>
The dynamic extent is also entered when execution is not within
the dynamic extent and a continuation is invoked that was captured
(using <samp>call-with-current-continuation</samp>) during the dynamic extent.

</li><li>
It is exited when the called procedure returns.

</li><li>
It is also exited when execution is within the dynamic extent and
a continuation is invoked that was captured while not within the
dynamic extent.

</li></ul>


<p>If a second call to <samp>dynamic-wind</samp> occurs within the dynamic extent of the
call to <var>thunk</var> and then a continuation is invoked in such a way that the
<var>after</var>s from these two invocations of <samp>dynamic-wind</samp> are both to be
called, then the <var>after</var> associated with the second (inner) call to
<samp>dynamic-wind</samp> is called first.
</p>
<p>If a second call to <samp>dynamic-wind</samp> occurs within the dynamic extent of the
call to <var>thunk</var> and then a continuation is invoked in such a way that the
<var>before</var>s from these two invocations of <samp>dynamic-wind</samp> are both to be
called, then the <var>before</var> associated with the first (outer) call to
<samp>dynamic-wind</samp> is called first.
</p>
<p>If invoking a continuation requires calling the <var>before</var> from one call
to <samp>dynamic-wind</samp> and the <var>after</var> from another, then the <var>after</var>
is called first.
</p>
<p>The effect of using a captured continuation to enter or exit the dynamic
extent of a call to <var>before</var> or <var>after</var> is undefined.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(let ((path '())
      (c #f))
  (let ((add (lambda (s)
               (set! path (cons s path)))))
    (dynamic-wind
      (lambda () (add 'connect))
      (lambda ()
        (add (call-with-current-continuation
               (lambda (c0)
                 (set! c c0)
                 'talk1))))
      (lambda () (add 'disconnect)))
    (if (&lt; (length path) 4)
        (c 'talk2)
        (reverse path))))
    
          ==&gt; (connect talk1 disconnect
               connect talk2 disconnect)
</pre></td></tr></table>



<a name="Eval"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Control-features" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.4 Control features" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input-and-output" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Eval-1"></a>
<h2 class="section">6.5 Eval</h2>



<a name="Definition_of_eval"></a><a name="Procedure_eval"></a><a name="index-eval-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_eval">eval</a></b></code><i>  expression environment-specifier</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Evaluates <var>expression</var> in the specified environment and returns its value.
<var>Expression</var> must be a valid Scheme expression represented as data,
and <var>environment-specifier</var> must be a value returned by one of the
three procedures described below.
Implementations may extend <samp>eval</samp> to allow non-expression programs
(definitions) as the first argument and to allow other
values as environments, with the restriction that <samp>eval</samp> is not
allowed to create new bindings in the environments associated with
<samp>null-environment</samp> or <samp>scheme-report-environment</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">(eval '(* 7 3) (scheme-report-environment 5))
                                                   ==&gt;  21

(let ((f (eval '(lambda (f x) (f x x))
               (null-environment 5))))
  (f + 10))
                                                   ==&gt;  20
</pre></td></tr></table>





<a name="Definition_of_scheme-report-environment"></a><a name="Procedure_scheme-report-environment"></a><a name="index-scheme_002dreport_002denvironment"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_scheme-report-environment">scheme-report-environment</a></b></code><i>  version</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_null-environment"></a><a name="Procedure_null-environment"></a><a name="index-null_002denvironment"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_null-environment">null-environment</a></b></code><i>  version</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p><var>Version</var> must be the exact integer <samp>5</samp>,
corresponding to this revision of the Scheme report (the
Revised^5 Report on Scheme).
<samp>Scheme-report-environment</samp> returns a specifier for an
environment that is empty except for all bindings defined in
this report that are either required or both optional and
supported by the implementation. <samp>Null-environment</samp> returns
a specifier for an environment that is empty except for the
(syntactic) bindings for all syntactic keywords defined in
this report that are either required or both optional and
supported by the implementation.
</p>
<p>Other values of <var>version</var> can be used to specify environments
matching past revisions of this report, but their support is not
required.  An implementation will signal an error if <var>version</var>
is neither <samp>5</samp> nor another value supported by
the implementation.
</p>
<p>The effect of assigning (through the use of <samp>eval</samp>) a variable
bound in a <samp>scheme-report-environment</samp>
(for example <samp>car</samp>) is unspecified.  Thus the environments specified
by <samp>scheme-report-environment</samp> may be immutable.
</p>



<a name="Definition_of_interaction-environment"></a><a name="Optional_procedure_interaction-environment"></a><a name="index-interaction_002denvironment"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_interaction-environment">interaction-environment</a></b></code><code>)</code></td><td align="right">optional procedure</td></tr></table>

<p>This procedure returns a specifier for the environment that
contains implementation-defined bindings, typically a superset of
those listed in the report.  The intent is that this procedure
will return the environment in which the implementation would evaluate
expressions dynamically typed by the user.
</p>


<a name="Input-and-output"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Eval" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.5 Eval" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Ports" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.6.1 Ports" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Up section"><img src="button-up.png" border="0" alt="Up: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Input-and-output-1"></a>
<h2 class="section">6.6 Input and output</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Ports">6.6.1 Ports</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       
</td></tr>
<tr><td align="left" valign="top"><a href="#Input">6.6.2 Input</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       
</td></tr>
<tr><td align="left" valign="top"><a href="#Output">6.6.3 Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                      
</td></tr>
<tr><td align="left" valign="top"><a href="#System-interface">6.6.4 System interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
</table>


<a name="Ports"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Input-and-output" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.6.2 Input" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input-and-output" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Ports-1"></a>
<h3 class="subsection">6.6.1 Ports</h3>



<p>Ports represent input and output devices.  To Scheme, an input port is a
Scheme object that can deliver characters upon command, while an output port
is a Scheme object that can accept characters. 
<a name="index-port"></a>
</p>



<a name="Definition_of_call-with-input-file"></a><a name="Library_procedure_call-with-input-file"></a><a name="index-call_002dwith_002dinput_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_call-with-input-file">call-with-input-file</a></b></code><i>  string proc</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_call-with-output-file"></a><a name="Library_procedure_call-with-output-file"></a><a name="index-call_002dwith_002doutput_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_call-with-output-file">call-with-output-file</a></b></code><i>  string proc</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><var>String</var> should be a string naming a file, and
<var>proc</var> should be a procedure that accepts one argument.
For <samp>call-with-input-file</samp>,
the file should already exist; for
<samp>call-with-output-file</samp>,
the effect is unspecified if the file
already exists. These procedures call <var>proc</var> with one argument: the
port obtained by opening the named file for input or output.  If the
file cannot be opened, an error is signalled.  If <var>proc</var> returns,
then the port is closed automatically and the value(s) yielded by the
<var>proc</var> is(are) returned.  If <var>proc</var> does not return, then 
the port will not be closed automatically unless it is possible to
prove that the port will never again be used for a read or write
operation.
</p>

<blockquote><p><em>Rationale:</em>
Because Scheme's escape procedures have unlimited extent, it  is
possible to escape from the current continuation but later to escape back in. 
If implementations were permitted to close the port on any escape from the
current continuation, then it would be impossible to write portable code using
both <samp>call-with-current-continuation</samp> and <samp>call-with-input-file</samp> or
<samp>call-with-output-file</samp>.
</p>
</blockquote>
 




<a name="Definition_of_input-port?"></a><a name="Procedure_input-port?"></a><a name="index-input_002dport_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_input-port?">input-port?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_output-port?"></a><a name="Procedure_output-port?"></a><a name="index-output_002dport_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_output-port?">output-port?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is an input port or output port
respectively, otherwise returns <tt>#f</tt>.
</p>






<a name="Definition_of_current-input-port"></a><a name="Procedure_current-input-port"></a><a name="index-current_002dinput_002dport"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_current-input-port">current-input-port</a></b></code><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_current-output-port"></a><a name="Procedure_current-output-port"></a><a name="index-current_002doutput_002dport"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_current-output-port">current-output-port</a></b></code><code>)</code></td><td align="right">procedure</td></tr></table>
 
<p>Returns the current default input or output port.
</p>




<a name="Definition_of_with-input-from-file"></a><a name="Optional_procedure_with-input-from-file"></a><a name="index-with_002dinput_002dfrom_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_with-input-from-file">with-input-from-file</a></b></code><i>  string thunk</i><code>)</code></td><td align="right">optional procedure</td></tr></table>
<a name="Definition_of_with-output-to-file"></a><a name="Optional_procedure_with-output-to-file"></a><a name="index-with_002doutput_002dto_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_with-output-to-file">with-output-to-file</a></b></code><i>  string thunk</i><code>)</code></td><td align="right">optional procedure</td></tr></table>

<p><var>String</var> should be a string naming a file, and
<var>proc</var> should be a procedure of no arguments.
For <samp>with-input-from-file</samp>,
the file should already exist; for
<samp>with-output-to-file</samp>,
the effect is unspecified if the file
already exists.
The file is opened for input or output, an input or output port
connected to it is made the default value returned by
<samp>current-input-port</samp> or <samp>current-output-port</samp>
(and is used by <tt>(read)</tt>, <tt>(write <var>obj</var>)</tt>, and so forth),
and the
<var>thunk</var> is called with no arguments.  When the <var>thunk</var> returns,
the port is closed and the previous default is restored.
<samp>With-input-from-file</samp> and <samp>with-output-to-file</samp> return(s) the
value(s) yielded by <var>thunk</var>.
If an escape procedure
is used to escape from the continuation of these procedures, their
behavior is implementation dependent.
</p>









<a name="Definition_of_open-input-file"></a><a name="Procedure_open-input-file"></a><a name="index-open_002dinput_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_open-input-file">open-input-file</a></b></code><i>  filename</i><code>)</code></td><td align="right">procedure</td></tr></table>
 
<p>Takes a string naming an existing file and returns an input port capable of
delivering characters from the file.  If the file cannot be opened, an error is
signalled.
</p>




<a name="Definition_of_open-output-file"></a><a name="Procedure_open-output-file"></a><a name="index-open_002doutput_002dfile"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_open-output-file">open-output-file</a></b></code><i>  filename</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Takes a string naming an output file to be created and returns an output
port capable of writing characters to a new file by that name.  If the file
cannot be opened, an error is signalled.  If a file with the given name
already exists, the effect is unspecified.
</p>




<a name="Definition_of_close-input-port"></a><a name="Procedure_close-input-port"></a><a name="index-close_002dinput_002dport"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_close-input-port">close-input-port</a></b></code><i>  port</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_close-output-port"></a><a name="Procedure_close-output-port"></a><a name="index-close_002doutput_002dport"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_close-output-port">close-output-port</a></b></code><i>  port</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Closes the file associated with <var>port</var>, rendering the <var>port</var>
incapable of delivering or accepting characters.  
</p>
<p>These routines have no effect if the file has already been closed.
The value returned is unspecified.
</p>







<a name="Input"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Ports" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.6.1 Ports" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Output" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.6.3 Output" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input-and-output" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Input-1"></a>
<h3 class="subsection">6.6.2 Input</h3>




<p>    
<br>
<br>
<br>
<br>
<br>
</p>


<a name="Definition_of_read"></a><a name="Library_procedure_read"></a><a name="index-read-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_read">read</a></b></code><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_read"></a><a name="Library_procedure_read"></a><a name="index-read-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_read">read</a></b></code><i>  port</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p><samp>Read</samp> converts external representations of Scheme objects into the
objects themselves.  That is, it is a parser for the nonterminal
&lt;datum&gt; (see sections see section <a href="#External-representation">External representations</a> and
see section <a href="#Pairs-and-lists">Pairs and lists</a>).  <samp>Read</samp> returns the next
object parsable from the given input <var>port</var>, updating <var>port</var> to point to
the first character past the end of the external representation of the object.
</p>
<p>If an end of file is encountered in the input before any
characters are found that can begin an object, then an end of file
object is returned.  
 The port remains open, and further attempts
to read will also return an end of file object.  If an end of file is
encountered after the beginning of an object's external representation,
but the external representation is incomplete and therefore not parsable,
an error is signalled.
</p>
<p>The <var>port</var> argument may be omitted, in which case it defaults to the
value returned by <samp>current-input-port</samp>.  It is an error to read from
a closed port.
</p>


<a name="Definition_of_read-char"></a><a name="Procedure_read-char"></a><a name="index-read_002dchar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_read-char">read-char</a></b></code><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_read-char"></a><a name="Procedure_read-char"></a><a name="index-read_002dchar-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_read-char">read-char</a></b></code><i>  port</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the next character available from the input <var>port</var>, updating
the <var>port</var> to point to the following character.  If no more characters
are available, an end of file object is returned.  <var>Port</var> may be
omitted, in which case it defaults to the value returned by <samp>current-input-port</samp>.
</p>




<a name="Definition_of_peek-char"></a><a name="Procedure_peek-char"></a><a name="index-peek_002dchar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_peek-char">peek-char</a></b></code><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_peek-char"></a><a name="Procedure_peek-char"></a><a name="index-peek_002dchar-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_peek-char">peek-char</a></b></code><i>  port</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns the next character available from the input <var>port</var>,
<em>without</em> updating
the <var>port</var> to point to the following character.  If no more characters
are available, an end of file object is returned.  <var>Port</var> may be
omitted, in which case it defaults to the value returned by <samp>current-input-port</samp>.
</p>

<blockquote><p><em>Note:</em>
The value returned by a call to <samp>peek-char</samp> is the same as the
value that would have been returned by a call to <samp>read-char</samp> with the
same <var>port</var>.  The only difference is that the very next call to
<samp>read-char</samp> or <samp>peek-char</samp> on that <var>port</var> will return the
value returned by the preceding call to <samp>peek-char</samp>.  In particular, a call
to <samp>peek-char</samp> on an interactive port will hang waiting for input
whenever a call to <samp>read-char</samp> would have hung.
</p></blockquote>






<a name="Definition_of_eof-object?"></a><a name="Procedure_eof-object?"></a><a name="index-eof_002dobject_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_eof-object?">eof-object?</a></b></code><i>  obj</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if <var>obj</var> is an end of file object, otherwise returns
<tt>#f</tt>.  The precise set of end of file objects will vary among
implementations, but in any case no end of file object will ever be an object
that can be read in using <samp>read</samp>.
</p>




<a name="Definition_of_char-ready?"></a><a name="Procedure_char-ready?"></a><a name="index-char_002dready_003f"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char-ready?">char-ready?</a></b></code><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_char-ready?"></a><a name="Procedure_char-ready?"></a><a name="index-char_002dready_003f-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_char-ready?">char-ready?</a></b></code><i>  port</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Returns <tt>#t</tt> if a character is ready on the input <var>port</var> and
returns <tt>#f</tt> otherwise.  If <samp>char-ready</samp> returns <tt>#t</tt> then
the next <samp>read-char</samp> operation on the given <var>port</var> is guaranteed
not to hang.  If the <var>port</var> is at end of file then <samp>char-ready?</samp>
returns <tt>#t</tt>.  <var>Port</var> may be omitted, in which case it defaults to
the value returned by <samp>current-input-port</samp>.
</p>

<blockquote><p><em>Rationale:</em>
<samp>Char-ready?</samp> exists to make it possible for a program to
accept characters from interactive ports without getting stuck waiting for
input.  Any input editors associated with such ports must ensure that
characters whose existence has been asserted by <samp>char-ready?</samp> cannot
be rubbed out.  If <samp>char-ready?</samp> were to return <tt>#f</tt> at end of
file, a port at end of file would be indistinguishable from an interactive
port that has no ready characters.
</p></blockquote>




<a name="Output"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Input" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.6.2 Input" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#System-interface" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 6.6.4 System interface" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input-and-output" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Output-1"></a>
<h3 class="subsection">6.6.3 Output</h3>




<p> 
<br>
<br>
<br>
<br>
<br>
</p>

<a name="Definition_of_write"></a><a name="Library_procedure_write"></a><a name="index-write-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_write">write</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_write"></a><a name="Library_procedure_write"></a><a name="index-write-2"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_write">write</a></b></code><i>  obj port</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Writes a written representation of <var>obj</var> to the given <var>port</var>.  Strings
that appear in the written representation are enclosed in doublequotes, and
within those strings backslash and doublequote characters are
escaped by backslashes.
Character objects are written using the <samp>#\</samp> notation.
<samp>Write</samp> returns an unspecified value.  The
<var>port</var> argument may be omitted, in which case it defaults to the value
returned by <samp>current-output-port</samp>.
</p>




<a name="Definition_of_display"></a><a name="Library_procedure_display"></a><a name="index-display"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_display">display</a></b></code><i>  obj</i><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_display"></a><a name="Library_procedure_display"></a><a name="index-display-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_display">display</a></b></code><i>  obj port</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Writes a representation of <var>obj</var> to the given <var>port</var>.  Strings
that appear in the written representation are not enclosed in
doublequotes, and no characters are escaped within those strings.  Character
objects appear in the representation as if written by <samp>write-char</samp>
instead of by <samp>write</samp>.  <samp>Display</samp> returns an unspecified value.
The <var>port</var> argument may be omitted, in which case it defaults to the
value returned by <samp>current-output-port</samp>.
</p>

<blockquote><p><em>Rationale:</em>
<samp>Write</samp> is intended
for producing machine-readable output and <samp>display</samp> is for producing
human-readable output.  Implementations that allow &ldquo;slashification&rdquo;
within symbols will probably want <samp>write</samp> but not <samp>display</samp> to
slashify funny characters in symbols.
</p></blockquote>





<a name="Definition_of_newline"></a><a name="Library_procedure_newline"></a><a name="index-newline"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_newline">newline</a></b></code><code>)</code></td><td align="right">library procedure</td></tr></table>
<a name="Definition_of_newline"></a><a name="Library_procedure_newline"></a><a name="index-newline-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Library_procedure_newline">newline</a></b></code><i>  port</i><code>)</code></td><td align="right">library procedure</td></tr></table>

<p>Writes an end of line to <var>port</var>.  Exactly how this is done differs
from one operating system to another.  Returns an unspecified value.
The <var>port</var> argument may be omitted, in which case it defaults to the
value returned by <samp>current-output-port</samp>.
</p>




<a name="Definition_of_write-char"></a><a name="Procedure_write-char"></a><a name="index-write_002dchar"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_write-char">write-char</a></b></code><i>  char</i><code>)</code></td><td align="right">procedure</td></tr></table>
<a name="Definition_of_write-char"></a><a name="Procedure_write-char"></a><a name="index-write_002dchar-1"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Procedure_write-char">write-char</a></b></code><i>  char port</i><code>)</code></td><td align="right">procedure</td></tr></table>

<p>Writes the character <var>char</var> (not an external representation of the
character) to the given <var>port</var> and returns an unspecified value.  The
<var>port</var> argument may be omitted, in which case it defaults to the value
returned by <samp>current-output-port</samp>.
</p>



<a name="System-interface"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Output" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.6.3 Output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Input-and-output" title="Up section"><img src="button-up.png" border="0" alt="Up: 6.6 Input and output" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="System-interface-1"></a>
<h3 class="subsection">6.6.4 System interface</h3>


<p>Questions of system interface generally fall outside of the domain of this
report.  However, the following operations are important enough to
deserve description here.
</p>


<a name="Definition_of_load"></a><a name="Optional_procedure_load"></a><a name="index-load"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_load">load</a></b></code><i>  filename</i><code>)</code></td><td align="right">optional procedure</td></tr></table>



<p><var>Filename</var> should be a string naming an existing file
containing Scheme source code.  The <samp>load</samp> procedure reads
expressions and definitions from the file and evaluates them
sequentially.  It is unspecified whether the results of the expressions
are printed.  The <samp>load</samp> procedure does not affect the values
returned by <samp>current-input-port</samp> and <samp>current-output-port</samp>.
<samp>Load</samp> returns an unspecified value.
</p>

<blockquote><p><em>Rationale:</em>
For portability, <samp>load</samp> must operate on source files.
Its operation on other kinds of files necessarily varies among
implementations.
</p></blockquote>





<a name="Definition_of_transcript-on"></a><a name="Optional_procedure_transcript-on"></a><a name="index-transcript_002don"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_transcript-on">transcript-on</a></b></code><i>  filename</i><code>)</code></td><td align="right">optional procedure</td></tr></table>
<a name="Definition_of_transcript-off"></a><a name="Optional_procedure_transcript-off"></a><a name="index-transcript_002doff"></a><table width="100%"><tr><td align="left"> <code>(</code><code><b><a href="http://dynamo.iro.umontreal.ca/~gambit/wiki/index.php?title=Documentation:Optional_procedure_transcript-off">transcript-off</a></b></code><code>)</code></td><td align="right">optional procedure</td></tr></table>

<p><var>Filename</var> must be a string naming an output file to be
created. The effect of <samp>transcript-on</samp> is to open the named file
for output, and to cause a transcript of subsequent interaction between
the user and the Scheme system to be written to the file.  The
transcript is ended by a call to <samp>transcript-off</samp>, which closes the
transcript file.  Only one transcript may be in progress at any time,
though some implementations may relax this restriction.  The values
returned by these procedures are unspecified.
</p>

         


<a name="Formal-syntax-and-semantics"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#System-interface" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 6.6.4 System interface" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Standard-procedures" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 6. Standard procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Formal-syntax-and-semantics-1"></a>
<h1 class="chapter">7. Formal syntax and semantics</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Formal-syntax">7.1 Formal syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               
</td></tr>
<tr><td align="left" valign="top"><a href="#Formal-semantics">7.2 Formal semantics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
<tr><td align="left" valign="top"><a href="#Derived-expression-type">7.3 Derived expression types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     
</td></tr>
</table>



<p>This chapter provides formal descriptions of what has already been
described informally in previous chapters of this report.
</p>



<a name="Formal-syntax"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Lexical-structure" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.1 Lexical structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Up section"><img src="button-up.png" border="0" alt="Up: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Formal-syntax-1"></a>
<h2 class="section">7.1 Formal syntax</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           
</td></tr>
<tr><td align="left" valign="top"><a href="#External-representation">7.1.2 External representations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     
</td></tr>
<tr><td align="left" valign="top"><a href="#Expression">7.1.3 Expressions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  
</td></tr>
<tr><td align="left" valign="top"><a href="#Quasiquotations">7.1.4 Quasiquotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             
</td></tr>
<tr><td align="left" valign="top"><a href="#Transformers">7.1.5 Transformers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                
</td></tr>
<tr><td align="left" valign="top"><a href="#Programs-and-definitions">7.1.6 Programs and definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    
</td></tr>
</table>



<p>This section provides a formal syntax for Scheme written in an extended
BNF.
</p>
<p>All spaces in the grammar are for legibility.  Case is insignificant;
for example, <samp>#x1A</samp> and <samp>#X1a</samp> are equivalent.  &lt;empty&gt;
stands for the empty string.
</p>
<p>The following extensions to BNF are used to make the description more
concise:  &lt;thing&gt;* means zero or more occurrences of
&lt;thing&gt;; and &lt;thing&gt;+ means at least one
&lt;thing&gt;.
</p>

<a name="Lexical-structure"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Formal-syntax" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#External-representation" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.2 External representations" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Lexical-structure-1"></a>
<h3 class="subsection">7.1.1 Lexical structure</h3>


<p>This section describes how individual tokens (identifiers,
<a name="index-token"></a>
numbers, etc.) are formed from sequences of characters.  The following
sections describe how expressions and programs are formed from sequences
of tokens.
</p>
<p>&lt;Intertoken space&gt; may occur on either side of any token, but not
within a token.
</p>
<p>Tokens which require implicit termination (identifiers, numbers,
characters, and dot) may be terminated by any &lt;delimiter&gt;, but not
necessarily by anything else.
</p>
<p>The following five characters are reserved for future extensions to the
language: <tt>[ ] { } |</tt>
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">&lt;token&gt; &ndash;&gt; &lt;identifier&gt; | &lt;boolean&gt; | &lt;number&gt;
<a name="index-identifier-3"></a>     | &lt;character&gt; | &lt;string&gt;
     | ( | ) | #( | <tt>'</tt> | <tt>&lsquo;</tt> | , | ,@ | <b>.</b>
&lt;delimiter&gt; &ndash;&gt; &lt;whitespace&gt; | ( | ) | &quot; | ;
&lt;whitespace&gt; &ndash;&gt; &lt;space or newline&gt;
&lt;comment&gt; &ndash;&gt; ;  &lt;<span class="roman">all subsequent characters up to a</span>
                 <span class="roman">line break&gt;</span>
<a name="index-comment-1"></a>&lt;atmosphere&gt; &ndash;&gt; &lt;whitespace&gt; | &lt;comment&gt;
&lt;intertoken space&gt; &ndash;&gt; &lt;atmosphere&gt;*
</pre></td></tr></table>









<table><tr><td>&nbsp;</td><td><pre class="format">&lt;identifier&gt; &ndash;&gt; &lt;initial&gt; &lt;subsequent&gt;*
     | &lt;peculiar identifier&gt;
&lt;initial&gt; &ndash;&gt; &lt;letter&gt; | &lt;special initial&gt;
&lt;letter&gt; &ndash;&gt; a | b | c | ... | z

&lt;special initial&gt; &ndash;&gt; ! | $ | % | &amp; | * | / | : | &lt; | =
     | &gt; | ? | ^ | _ | ~
&lt;subsequent&gt; &ndash;&gt; &lt;initial&gt; | &lt;digit&gt;
     | &lt;special subsequent&gt;
&lt;digit&gt; &ndash;&gt; 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
&lt;special subsequent&gt; &ndash;&gt; + | - | . | @
&lt;peculiar identifier&gt; &ndash;&gt; + | - | ...
&lt;syntactic keyword&gt; &ndash;&gt; &lt;expression keyword&gt;
<a name="index-syntactic-keyword-3"></a><a name="index-keyword-2"></a>     | else | =&gt; | define 
     | unquote | unquote-splicing
&lt;expression keyword&gt; &ndash;&gt; quote | lambda | if
     | set! | begin | cond | and | or | case
     | let | let* | letrec | do | delay
     | quasiquote

<samp>&lt;variable&gt; &rArr; &lt;</samp><span class="roman">any &lt;identifier&gt; that isn't</span>
<a name="index-variable-3"></a>                <span class="roman">also a &lt;syntactic keyword&gt;&gt;</span>

&lt;boolean&gt; &ndash;&gt; #t | #f
&lt;character&gt; &ndash;&gt; #\ &lt;any character&gt;
     | #\ &lt;character name&gt;
&lt;character name&gt; &ndash;&gt; space | newline

&lt;string&gt; &ndash;&gt; &quot; &lt;string element&gt;* &quot;
&lt;string element&gt; &ndash;&gt; &lt;any character other than &quot; or \&gt;
     | \&quot; | \\
</pre></td></tr></table>







<table><tr><td>&nbsp;</td><td><pre class="format">&lt;number&gt; &ndash;&gt; &lt;num 2&gt;| &lt;num 8&gt;
     | &lt;num 10&gt;| &lt;num 16&gt;
</pre></td></tr></table>



<p>The following rules for &lt;num R&gt;, &lt;complex R&gt;, &lt;real
R&gt;, &lt;ureal R&gt;, &lt;uinteger R&gt;, and &lt;prefix R&gt;
should be replicated for R = 2, 8, 10,
and 16.  There are no rules for &lt;decimal 2&gt;, &lt;decimal
8&gt;, and &lt;decimal 16&gt;, which means that numbers containing
decimal points or exponents must be in decimal radix.
</p>


<table><tr><td>&nbsp;</td><td><pre class="format">&lt;num R&gt; &ndash;&gt; &lt;prefix R&gt; &lt;complex R&gt;
&lt;complex R&gt; &ndash;&gt; &lt;real R&gt; | &lt;real R&gt; @ &lt;real R&gt;
    | &lt;real R&gt; + &lt;ureal R&gt; i | &lt;real R&gt; - &lt;ureal R&gt; i
    | &lt;real R&gt; + i | &lt;real R&gt; - i
    | + &lt;ureal R&gt; i | - &lt;ureal R&gt; i | + i | - i
&lt;real R&gt; &ndash;&gt; &lt;sign&gt; &lt;ureal R&gt;
&lt;ureal R&gt; &ndash;&gt; &lt;uinteger R&gt;
    | &lt;uinteger R&gt; / &lt;uinteger R&gt;
    | &lt;decimal R&gt;
&lt;decimal 10&gt; &ndash;&gt; &lt;uinteger 10&gt; &lt;suffix&gt;
    | . &lt;digit 10&gt;+ #* &lt;suffix&gt;
    | &lt;digit 10&gt;+ . &lt;digit 10&gt;* #* &lt;suffix&gt;
    | &lt;digit 10&gt;+ #+ . #* &lt;suffix&gt;
&lt;uinteger R&gt; &ndash;&gt; &lt;digit R&gt;+ #*
&lt;prefix R&gt; &ndash;&gt; &lt;radix R&gt; &lt;exactness&gt;
    | &lt;exactness&gt; &lt;radix R&gt;
</pre></td></tr></table>




<table><tr><td>&nbsp;</td><td><pre class="format">&lt;suffix&gt; &ndash;&gt; &lt;empty&gt; 
    | &lt;exponent marker&gt; &lt;sign&gt; &lt;digit 10&gt;+
&lt;exponent marker&gt; &ndash;&gt; e | s | f | d | l
&lt;sign&gt; &ndash;&gt; &lt;empty&gt;  | + |  -
&lt;exactness&gt; &ndash;&gt; &lt;empty&gt; | #i | #e
<a name="index-_0023e-1"></a><a name="index-_0023i-1"></a>&lt;radix 2&gt; &ndash;&gt; #b
<a name="index-_0023b-1"></a>&lt;radix 8&gt; &ndash;&gt; #o
<a name="index-_0023o-1"></a>&lt;radix 10&gt; &ndash;&gt; &lt;empty&gt; | #d
&lt;radix 16&gt; &ndash;&gt; #x
<a name="index-_0023x-1"></a>&lt;digit 2&gt; &ndash;&gt; 0 | 1
&lt;digit 8&gt; &ndash;&gt; 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7
&lt;digit 10&gt; &ndash;&gt; &lt;digit&gt;
&lt;digit 16&gt; &ndash;&gt; &lt;digit 10&gt; | a | b | c | d | e | f
</pre></td></tr></table>






<a name="External-representation"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Lexical-structure" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.1 Lexical structure" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Expression" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.3 Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="External-representations-1"></a>
<h3 class="subsection">7.1.2 External representations</h3>



<p>&lt;Datum&gt; is what the <code>read</code> procedure (section see section <a href="#Input">Input</a>)
<a name="index-read-3"></a>
successfully parses.  Note that any string that parses as an
&lt;expression&gt; will also parse as a &lt;datum&gt;.  
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">&lt;datum&gt; &ndash;&gt; &lt;simple datum&gt; | &lt;compound datum&gt;
&lt;simple datum&gt; &ndash;&gt; &lt;boolean&gt; | &lt;number&gt;
     | &lt;character&gt; | &lt;string&gt; |  &lt;symbol&gt;
&lt;symbol&gt; &ndash;&gt; &lt;identifier&gt;
&lt;compound datum&gt; &ndash;&gt; &lt;list&gt; | &lt;vector&gt;
&lt;list&gt; &ndash;&gt; (&lt;datum&gt;*) | (&lt;datum&gt;+ . &lt;datum&gt;)
       | &lt;abbreviation&gt;
&lt;abbreviation&gt; &ndash;&gt; &lt;abbrev prefix&gt; &lt;datum&gt;
&lt;abbrev prefix&gt; &ndash;&gt; ' | &lsquo; | , | ,@
&lt;vector&gt; &ndash;&gt; #(&lt;datum&gt;*)
</pre></td></tr></table>




<a name="Expression"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#External-representation" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.2 External representations" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Quasiquotations" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.4 Quasiquotations" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Expressions-1"></a>
<h3 class="subsection">7.1.3 Expressions</h3>



<table><tr><td>&nbsp;</td><td><pre class="format">&lt;expression&gt; &ndash;&gt; &lt;variable&gt;
     | &lt;literal&gt;
     | &lt;procedure call&gt;
     | &lt;lambda expression&gt;
     | &lt;conditional&gt;
     | &lt;assignment&gt;
     | &lt;derived expression&gt;
     | &lt;macro use&gt;
     | &lt;macro block&gt;

&lt;literal&gt; &ndash;&gt; &lt;quotation&gt; | &lt;self-evaluating&gt;
&lt;self-evaluating&gt; &ndash;&gt; &lt;boolean&gt; | &lt;number&gt;
     | &lt;character&gt; | &lt;string&gt;
&lt;quotation&gt; &ndash;&gt; '&lt;datum&gt; | (quote &lt;datum&gt;)
&lt;procedure call&gt; &ndash;&gt; (&lt;operator&gt; &lt;operand&gt;*)
&lt;operator&gt; &ndash;&gt; &lt;expression&gt;
&lt;operand&gt; &ndash;&gt; &lt;expression&gt;

&lt;lambda expression&gt; &ndash;&gt; (lambda &lt;formals&gt; &lt;body&gt;)
&lt;formals&gt; &ndash;&gt; (&lt;variable&gt;*) | &lt;variable&gt;
     | (&lt;variable&gt;+ . &lt;variable&gt;)
&lt;body&gt; &ndash;&gt; &lt;definition&gt;* &lt;sequence&gt;
&lt;sequence&gt; &ndash;&gt; &lt;command&gt;* &lt;expression&gt;
&lt;command&gt; &ndash;&gt; &lt;expression&gt;

&lt;conditional&gt; &ndash;&gt; (if &lt;test&gt; &lt;consequent&gt; &lt;alternate&gt;)
&lt;test&gt; &ndash;&gt; &lt;expression&gt;
&lt;consequent&gt; &ndash;&gt; &lt;expression&gt;
&lt;alternate&gt; &ndash;&gt; &lt;expression&gt; | &lt;empty&gt;

&lt;assignment&gt; &ndash;&gt; (set! &lt;variable&gt; &lt;expression&gt;)

&lt;derived expression&gt; &ndash;&gt;
       (cond &lt;cond clause&gt;+)
     | (cond &lt;cond clause&gt;* (else &lt;sequence&gt;))
     | (case &lt;expression&gt;
         &lt;case clause&gt;+)
     | (case &lt;expression&gt;
         &lt;case clause&gt;*
         (else &lt;sequence&gt;))
     | (and &lt;test&gt;*)
     | (or &lt;test&gt;*)
     | (let (&lt;binding spec&gt;*) &lt;body&gt;)
     | (let &lt;variable&gt; (&lt;binding spec&gt;*) &lt;body&gt;)
     | (let* (&lt;binding spec&gt;*) &lt;body&gt;)
     | (letrec (&lt;binding spec&gt;*) &lt;body&gt;)
     | (begin &lt;sequence&gt;)
     | (do (&lt;iteration spec&gt;*)
           (&lt;test&gt; &lt;do result&gt;)
         &lt;command&gt;*)
     | (delay &lt;expression&gt;)
     | &lt;quasiquotation&gt;

&lt;cond clause&gt; &ndash;&gt; (&lt;test&gt; &lt;sequence&gt;)
      | (&lt;test&gt;)
      | (&lt;test&gt; =&gt; &lt;recipient&gt;)
&lt;recipient&gt; &ndash;&gt; &lt;expression&gt;
&lt;case clause&gt; &ndash;&gt; ((&lt;datum&gt;*) &lt;sequence&gt;)
&lt;binding spec&gt; &ndash;&gt; (&lt;variable&gt; &lt;expression&gt;)
&lt;iteration spec&gt; &ndash;&gt; (&lt;variable&gt; &lt;init&gt; &lt;step&gt;)
    | (&lt;variable&gt; &lt;init&gt;)
&lt;init&gt; &ndash;&gt; &lt;expression&gt;
&lt;step&gt; &ndash;&gt; &lt;expression&gt;
&lt;do result&gt; &ndash;&gt; &lt;sequence&gt; | &lt;empty&gt;

&lt;macro use&gt; &ndash;&gt; (&lt;keyword&gt; &lt;datum&gt;*)
&lt;keyword&gt; &ndash;&gt; &lt;identifier&gt;

&lt;macro block&gt; &ndash;&gt;
     (let-syntax (&lt;syntax spec&gt;*) &lt;body&gt;)
     | (letrec-syntax (&lt;syntax spec&gt;*) &lt;body&gt;)
&lt;syntax spec&gt; &ndash;&gt; (&lt;keyword&gt; &lt;transformer spec&gt;)
</pre></td></tr></table>



<a name="Quasiquotations"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Expression" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.3 Expressions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Transformers" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.5 Transformers" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Quasiquotations-1"></a>
<h3 class="subsection">7.1.4 Quasiquotations</h3>


<p>The following grammar for quasiquote expressions is not context-free.
It is presented as a recipe for generating an infinite number of
production rules.  Imagine a copy of the following rules for D = 1, 2,3, &hellip;.  D keeps track of the nesting depth.
</p>

<table><tr><td>&nbsp;</td><td><pre class="format">&lt;quasiquotation&gt; &ndash;&gt; &lt;quasiquotation 1&gt;
&lt;qq template 0&gt; &ndash;&gt; &lt;expression&gt;
&lt;quasiquotation D&gt; &ndash;&gt; &lsquo;&lt;qq template D&gt;
       | (quasiquote &lt;qq template D&gt;)
&lt;qq template D&gt; &ndash;&gt; &lt;simple datum&gt;
       | &lt;list qq template D&gt;
       | &lt;vector qq template D&gt;
       | &lt;unquotation D&gt;
&lt;list qq template D&gt; &ndash;&gt; (&lt;qq template or splice D&gt;*)
       | (&lt;qq template or splice D&gt;+ . &lt;qq template D&gt;)
       | '&lt;qq template D&gt;
       | &lt;quasiquotation D+1&gt;
&lt;vector qq template D&gt; &ndash;&gt; #(&lt;qq template or splice D&gt;*)
&lt;unquotation D&gt; &ndash;&gt; ,&lt;qq template D-1&gt;
       | (unquote &lt;qq template D-1&gt;)
&lt;qq template or splice D&gt; &ndash;&gt; &lt;qq template D&gt;
       | &lt;splicing unquotation D&gt;
&lt;splicing unquotation D&gt; &ndash;&gt; ,@&lt;qq template D-1&gt;
       | (unquote-splicing &lt;qq template D-1&gt;)
</pre></td></tr></table>



<p>In &lt;quasiquotation&gt;s, a &lt;list qq template D&gt; can sometimes
be confused with either an &lt;unquotation D&gt; or a &lt;splicing
unquotation D&gt;.  The interpretation as an
&lt;unquotation&gt; or &lt;splicing
unquotation D&gt; takes precedence.
</p>
<a name="Transformers"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Quasiquotations" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.4 Quasiquotations" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Programs-and-definitions" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.1.6 Programs and definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Transformers-1"></a>
<h3 class="subsection">7.1.5 Transformers</h3>



<table><tr><td>&nbsp;</td><td><pre class="format">&lt;transformer spec&gt; &ndash;&gt;
    (syntax-rules (&lt;identifier&gt;*) &lt;syntax rule&gt;*)
&lt;syntax rule&gt; &ndash;&gt; (&lt;pattern&gt; &lt;template&gt;)
&lt;pattern&gt; &ndash;&gt; &lt;pattern identifier&gt;
     | (&lt;pattern&gt;*)
     | (&lt;pattern&gt;+ . &lt;pattern&gt;)
     | (&lt;pattern&gt;* &lt;pattern&gt; &lt;ellipsis&gt;)
     | #(&lt;pattern&gt;*)
     | #(&lt;pattern&gt;* &lt;pattern&gt; &lt;ellipsis&gt;)
     | &lt;pattern datum&gt;
&lt;pattern datum&gt; &ndash;&gt; &lt;string&gt;
     | &lt;character&gt;
     | &lt;boolean&gt;
     | &lt;number&gt;
&lt;template&gt; &ndash;&gt; &lt;pattern identifier&gt;
     | (&lt;template element&gt;*)
     | (&lt;template element&gt;+ . &lt;template&gt;)
     | #(&lt;template element&gt;*)
     | &lt;template datum&gt;
&lt;template element&gt; &ndash;&gt; &lt;template&gt;
     | &lt;template&gt; &lt;ellipsis&gt;
&lt;template datum&gt; &ndash;&gt; &lt;pattern datum&gt;
&lt;pattern identifier&gt; &ndash;&gt; &lt;any identifier except <samp>...</samp>&gt;
&lt;ellipsis&gt; &ndash;&gt; &lt;the identifier <samp>...</samp>&gt;
</pre></td></tr></table>



<a name="Programs-and-definitions"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Transformers" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.5 Transformers" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-semantics" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.2 Formal semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax" title="Up section"><img src="button-up.png" border="0" alt="Up: 7.1 Formal syntax" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Programs-and-definitions-1"></a>
<h3 class="subsection">7.1.6 Programs and definitions</h3>



<table><tr><td>&nbsp;</td><td><pre class="format">&lt;program&gt; &ndash;&gt; &lt;command or definition&gt;*
&lt;command or definition&gt; &ndash;&gt; &lt;command&gt;
    | &lt;definition&gt;
    | &lt;syntax definition&gt;
    | (begin &lt;command or definition&gt;+)
&lt;definition&gt; &ndash;&gt; (define &lt;variable&gt; &lt;expression&gt;)
      | (define (&lt;variable&gt; &lt;def formals&gt;) &lt;body&gt;)
      | (begin &lt;definition&gt;*)
&lt;def formals&gt; &ndash;&gt; &lt;variable&gt;*
      | &lt;variable&gt;* . &lt;variable&gt;
&lt;syntax definition&gt; &ndash;&gt;
     (define-syntax &lt;keyword&gt; &lt;transformer spec&gt;)
</pre></td></tr></table>


       
<a name="Formal-semantics"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Programs-and-definitions" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.1.6 Programs and definitions" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Derived-expression-type" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: 7.3 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Up section"><img src="button-up.png" border="0" alt="Up: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Formal-semantics-1"></a>
<h2 class="section">7.2 Formal semantics</h2>


<p>This section provides a formal denotational semantics for the primitive
expressions of Scheme and selected built-in procedures.  The concepts
and notation used here are described in <small>[STOY77]</small>.
</p>
<blockquote><p><em>Note:</em> The formal semantics section was written in LaTeX which
is incompatible with TeXinfo.  See the Formal semantics section of
the original document from which this was derived.
</p></blockquote>

        
<a name="Derived-expression-type"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Formal-semantics" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.2 Formal semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Up section"><img src="button-up.png" border="0" alt="Up: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Derived-expression-types-2"></a>
<h2 class="section">7.3 Derived expression types</h2>



<p>This section gives macro definitions for the derived expression types in
terms of the primitive expression types (literal, variable, call, <samp>lambda</samp>,
<samp>if</samp>, <samp>set!</samp>).  See section <a href="#Control-features">Control features</a> for a possible
definition of <samp>delay</samp>.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax cond
  (syntax-rules (else =&gt;)
    ((cond (else result1 result2 ...))
     (begin result1 result2 ...))
    ((cond (test =&gt; result))
     (let ((temp test))
       (if temp (result temp))))
    ((cond (test =&gt; result) clause1 clause2 ...)
     (let ((temp test))
       (if temp
           (result temp)
           (cond clause1 clause2 ...))))
    ((cond (test)) test)
    ((cond (test) clause1 clause2 ...)
     (let ((temp test))
       (if temp
           temp
           (cond clause1 clause2 ...))))
    ((cond (test result1 result2 ...))
     (if test (begin result1 result2 ...)))
    ((cond (test result1 result2 ...)
           clause1 clause2 ...)
     (if test
         (begin result1 result2 ...)
         (cond clause1 clause2 ...)))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax case
  (syntax-rules (else)
    ((case (key ...)
       clauses ...)
     (let ((atom-key (key ...)))
       (case atom-key clauses ...)))
    ((case key
       (else result1 result2 ...))
     (begin result1 result2 ...))
    ((case key
       ((atoms ...) result1 result2 ...))
     (if (memv key '(atoms ...))
         (begin result1 result2 ...)))
    ((case key
       ((atoms ...) result1 result2 ...)
       clause clauses ...)
     (if (memv key '(atoms ...))
         (begin result1 result2 ...)
         (case key clause clauses ...)))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax and
  (syntax-rules ()
    ((and) #t)
    ((and test) test)
    ((and test1 test2 ...)
     (if test1 (and test2 ...) #f))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax or
  (syntax-rules ()
    ((or) #f)
    ((or test) test)
    ((or test1 test2 ...)
     (let ((x test1))
       (if x x (or test2 ...))))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax let
  (syntax-rules ()
    ((let ((name val) ...) body1 body2 ...)
     ((lambda (name ...) body1 body2 ...)
      val ...))
    ((let tag ((name val) ...) body1 body2 ...)
     ((letrec ((tag (lambda (name ...)
                      body1 body2 ...)))
        tag)
      val ...))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax let*
  (syntax-rules ()
    ((let* () body1 body2 ...)
     (let () body1 body2 ...))
    ((let* ((name1 val1) (name2 val2) ...)
       body1 body2 ...)
     (let ((name1 val1))
       (let* ((name2 val2) ...)
         body1 body2 ...)))))
</pre></td></tr></table>


<p>The following <samp>letrec</samp> macro uses the symbol <samp>&lt;undefined&gt;</samp>
in place of an expression which returns something that when stored in
a location makes it an error to try to obtain the value stored in the
location (no such expression is defined in Scheme).
A trick is used to generate the temporary names needed to avoid
specifying the order in which the values are evaluated.
This could also be accomplished by using an auxiliary macro.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax letrec
  (syntax-rules ()
    ((letrec ((var1 init1) ...) body ...)
     (letrec &quot;generate temp names&quot;
       (var1 ...)
       ()
       ((var1 init1) ...)
       body ...))
    ((letrec &quot;generate temp names&quot;
       ()
       (temp1 ...)
       ((var1 init1) ...)
       body ...)
     (let ((var1 &lt;undefined&gt;) ...)
       (let ((temp1 init1) ...)
         (set! var1 temp1)
         ...
         body ...)))
    ((letrec &quot;generate temp names&quot;
       (x y ...)
       (temp ...)
       ((var1 init1) ...)
       body ...)
     (letrec &quot;generate temp names&quot;
       (y ...)
       (newtemp temp ...)
       ((var1 init1) ...)
       body ...))))
</pre></td></tr></table>



<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax begin
  (syntax-rules ()
    ((begin exp ...)
     ((lambda () exp ...)))))
</pre></td></tr></table>


<p>The following alternative expansion for <samp>begin</samp> does not make use of
the ability to write more than one expression in the body of a lambda
expression.  In any case, note that these rules apply only if the body
of the <samp>begin</samp> contains no definitions.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax begin
  (syntax-rules ()
    ((begin exp)
     exp)
    ((begin exp1 exp2 ...)
     (let ((x exp1))
       (begin exp2 ...)))))
</pre></td></tr></table>


<p>The following definition
of <samp>do</samp> uses a trick to expand the variable clauses.
As with <samp>letrec</samp> above, an auxiliary macro would also work.
The expression <samp>(if #f #f)</samp> is used to obtain an unspecific
value.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define-syntax do
  (syntax-rules ()
    ((do ((var init step ...) ...)
         (test expr ...)
         command ...)
     (letrec
       ((loop
         (lambda (var ...)
           (if test
               (begin
                 (if #f #f)
                 expr ...)
               (begin
                 command
                 ...
                 (loop (do &quot;step&quot; var step ...)
                       ...))))))
       (loop init ...)))
    ((do &quot;step&quot; x)
     x)
    ((do &quot;step&quot; x y)
     y)))
</pre></td></tr></table>


         


<a name="Notes"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Derived-expression-type" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: 7.3 Derived expression types" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Language-changes" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Language changes" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Formal-syntax-and-semantics" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: 7. Formal syntax and semantics" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Additional-material" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Additional material" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Notes-1"></a>
<h1 class="unnumbered">Notes</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Language-changes">Language changes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            
</td></tr>
</table>





<a name="Language-changes"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Notes" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Additional-material" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Additional material" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Notes" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Notes" title="Up section"><img src="button-up.png" border="0" alt="Up: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Additional-material" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Additional material" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Language-changes-1"></a>
<h2 class="unnumberedsec">Language changes</h2>



<p>This section enumerates the changes that have been made to Scheme since
the &ldquo;Revised^4 report&rdquo; [R4RS] was published.
</p>


<ul>
<li>
The report is now a superset of the IEEE standard for Scheme
[IEEEScheme]: implementations that conform to the report will
also conform to the standard.  This required the following changes:


<ul>
<li>
The empty list is now required to count as true.

</li><li>
The classification of features as essential or inessential has been
removed.  There are now three classes of built-in procedures: primitive,
library, and optional.  The optional procedures are <samp>load</samp>,
<samp>with-input-from-file</samp>, <samp>with-output-to-file</samp>,
<samp>transcript-on</samp>, <samp>transcript-off</samp>, and
<samp>interaction-environment</samp>,
and <samp>-</samp> and <samp>/</samp> with more than two arguments.
None of these are in the IEEE standard.

</li><li>
Programs are allowed to redefine built-in procedures.  Doing so
will not change the behavior of other built-in procedures.

</li></ul>


</li><li>
<em>Port</em> has been added to the list of disjoint types.

</li><li>
The macro appendix has been removed.  High-level macros are now part
of the main body of the report.  The rewrite rules for derived expressions
have been replaced with macro definitions.  There are no reserved identifiers.

</li><li>
<samp>Syntax-rules</samp> now allows vector patterns.

</li><li>
Multiple-value returns, <samp>eval</samp>, and <samp>dynamic-wind</samp> have
been added.

</li><li>
The calls that are required to be implemented in a properly tail-recursive
fashion are defined explicitly.

</li><li>
&lsquo;<samp>@</samp>' can be used within identifiers. &lsquo;<samp>|</samp>' is reserved
for possible future extensions.


</li></ul>














       
<a name="Additional-material"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Language-changes" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Language changes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Example" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Example" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Notes" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Notes" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Example" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Example" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Additional-material-1"></a>
<h1 class="unnumbered">Additional material</h1>


<p>The Internet Scheme Repository at
</p>
 
<p align="center"> <a href="http://www.cs.indiana.edu/scheme-repository/">http://www.cs.indiana.edu/scheme-repository/</a>
</p> 

<p>contains an extensive Scheme bibliography, as well as papers,
programs, implementations, and other material related to Scheme.
</p>  



<a name="Example"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Additional-material" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Additional material" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Bibliography" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Bibliography" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Additional-material" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Additional material" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Bibliography" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Bibliography" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Example-1"></a>
<h1 class="unnumbered">Example</h1>
 


<p><samp>Integrate-system</samp> integrates the system 
</p>

<p align="center"> y_k^^ = f_k(y_1, y_2, &hellip; y_n),    k = 1, &hellip; n
</p>
<p>of differential equations with the method of Runge-Kutta.
</p>
<p>The parameter <tt>system-derivative</tt> is a function that takes a system
state (a vector of values for the state variables y_1, &hellip; y_n)
and produces a system derivative (the values y_1^^, &hellip;y_n^^).  The parameter <tt>initial-state</tt> provides an initial
system state, and <tt>h</tt> is an initial guess for the length of the
integration step.
</p>
<p>The value returned by <samp>integrate-system</samp> is an infinite stream of
system states.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define integrate-system
  (lambda (system-derivative initial-state h)
    (let ((next (runge-kutta-4 system-derivative h)))
      (letrec ((states
                (cons initial-state
                      (delay (map-streams next
                                          states)))))
        states))))
</pre></td></tr></table>


<p><samp>Runge-Kutta-4</samp> takes a function, <tt>f</tt>, that produces a
system derivative from a system state.  <samp>Runge-Kutta-4</samp>
produces a function that takes a system state and
produces a new system state.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define runge-kutta-4
  (lambda (f h)
    (let ((*h (scale-vector h))
          (*2 (scale-vector 2))
          (*1/2 (scale-vector (/ 1 2)))
          (*1/6 (scale-vector (/ 1 6))))
      (lambda (y)
        ;; y <span class="roman"></span>is a system state
        (let* ((k0 (*h (f y)))
               (k1 (*h (f (add-vectors y (*1/2 k0)))))
               (k2 (*h (f (add-vectors y (*1/2 k1)))))
               (k3 (*h (f (add-vectors y k2)))))
          (add-vectors y
            (*1/6 (add-vectors k0
                               (*2 k1)
                               (*2 k2)
                               k3))))))))

(define elementwise
  (lambda (f)
    (lambda vectors
      (generate-vector
        (vector-length (car vectors))
        (lambda (i)
          (apply f
                 (map (lambda (v) (vector-ref  v i))
                      vectors)))))))

(define generate-vector
  (lambda (size proc)
    (let ((ans (make-vector size)))
      (letrec ((loop
                (lambda (i)
                  (cond ((= i size) ans)
                        (else
                         (vector-set! ans i (proc i))
                         (loop (+ i 1)))))))
        (loop 0)))))

(define add-vectors (elementwise +))

(define scale-vector
  (lambda (s)
    (elementwise (lambda (x) (* x s)))))
</pre></td></tr></table>


<p><samp>Map-streams</samp> is analogous to <samp>map</samp>: it applies its first
argument (a procedure) to all the elements of its second argument (a
stream).
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define map-streams
  (lambda (f s)
    (cons (f (head s))
          (delay (map-streams f (tail s))))))
</pre></td></tr></table>


<p>Infinite streams are implemented as pairs whose car holds the first
element of the stream and whose cdr holds a promise to deliver the rest
of the stream.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define head car)
(define tail
  (lambda (stream) (force (cdr stream))))
</pre></td></tr></table>


<br>
<br>
<br>
<br>
<br>
<br>
<p>The following illustrates the use of <samp>integrate-system</samp> in
integrating the system
</p>

<p align="center">  C dv_C / dt = -i_L - v_C / R
</p>


<p align="center">  L di_L / dt = v_C
</p>
<p>which models a damped oscillator.
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">
(define damped-oscillator
  (lambda (R L C)
    (lambda (state)
      (let ((Vc (vector-ref state 0))
            (Il (vector-ref state 1)))
        (vector (- 0 (+ (/ Vc (* R C)) (/ Il C)))
                (/ Vc L))))))

(define the-states
  (integrate-system
     (damped-oscillator 10000 1000 .001)
     '#(1 0)
     .01))
</pre></td></tr></table>





         







<a name="Bibliography"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Example" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Example" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Example" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Example" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Next chapter"><img src="button-right-right.png" border="0" alt="FastForward: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Bibliography-1"></a>
<h1 class="unnumbered">Bibliography</h1>


<ul>
<li> [SICP]
<a name="index-SICP"></a>
Harold Abelson and Gerald Jay Sussman with Julie Sussman.
<em>Structure and Interpretation of Computer Programs, second edition.</em>
MIT Press, Cambridge, 1996.

</li><li> [Bawden88] 
Alan Bawden and Jonathan Rees.
<a name="index-Bawden88"></a>
Syntactic closures.
In <em>Proceedings of the 1988 ACM Symposium on Lisp and
  Functional Programming</em>, pages 86&ndash;95.

</li><li> [howtoprint]
<a name="index-howtoprint"></a>
Robert G. Burger and R. Kent Dybvig.
Printing floating-point numbers quickly and accurately.
In <em>Proceedings of the ACM SIGPLAN '96 Conference
  on Programming Language Design and Implementation</em>, pages 108&ndash;116.

</li><li> [RRRS]
<a name="index-RRRS"></a>
William Clinger, editor.
The revised revised report on Scheme, or an uncommon Lisp.
MIT Artificial Intelligence Memo 848, August 1985.
Also published as Computer Science Department Technical Report 174,
  Indiana University, June 1985.

</li><li> [howtoread] 
William Clinger.
<a name="index-howtoread"></a>
How to read floating point numbers accurately.
In <em>Proceedings of the ACM SIGPLAN '90 Conference
  on Programming Language Design and Implementation</em>, pages 92&ndash;101.
Proceedings published as <em>SIGPLAN Notices</em> 25(6), June 1990.

</li><li> [R4RS]
<a name="index-R4RS"></a>
William Clinger and Jonathan Rees, editors.
The revised^4 report on the algorithmic language Scheme.
In <em>ACM Lisp Pointers</em> 4(3), pages 1&ndash;55, 1991.

</li><li> [macrosthatwork] 
William Clinger and Jonathan Rees.
<a name="index-macrosthatwork"></a>
Macros that work.
In <em>Proceedings of the 1991 ACM Conference on Principles of
  Programming Languages</em>, pages 155&ndash;162.

</li><li> [propertailrecursion] 
William Clinger.
<a name="index-propertailrecursion"></a>
Proper Tail Recursion and Space Efficiency.
To appear in <em>Proceedings of the 1998 ACM Conference on Programming
 Language Design and Implementation</em>, June 1998.

</li><li> [syntacticabstraction]
<a name="index-syntacticabstraction"></a>
R. Kent Dybvig, Robert Hieb, and Carl Bruggeman.
Syntactic abstraction in Scheme.
<em>Lisp and Symbolic Computation</em> 5(4):295&ndash;326, 1993.

</li><li> [Scheme311]
<a name="index-Scheme311"></a>
Carol Fessenden, William Clinger, Daniel P. Friedman, and Christopher Haynes.
Scheme 311 version 4 reference manual.
Indiana University Computer Science Technical Report 137, February 1983.
Superseded by [Scheme84].

</li><li> [Scheme84]
<a name="index-Scheme84"></a>
D. Friedman, C. Haynes, E. Kohlbecker, and M. Wand.
Scheme 84 interim reference manual.
Indiana University Computer Science Technical Report 153, January 1985.

</li><li> [IEEE]
<a name="index-IEEE"></a>
<em>IEEE Standard 754-1985.  IEEE Standard for Binary Floating-Point
Arithmetic.</em>  IEEE, New York, 1985.

</li><li> [IEEEScheme]
<a name="index-IEEEScheme"></a>
<em>IEEE Standard 1178-1990.  IEEE Standard for the Scheme
  Programming Language.</em>  IEEE, New York, 1991.

</li><li> [Kohlbecker86]
<a name="index-Kohlbecker86"></a>
Eugene E. Kohlbecker Jr.
<em>Syntactic Extensions in the Programming Language Lisp.</em>
PhD thesis, Indiana University, August 1986.

</li><li> [hygienic]
<a name="index-hygienic-1"></a>
Eugene E. Kohlbecker Jr., Daniel P. Friedman, Matthias Felleisen, and Bruce Duba.
Hygienic macro expansion.
In <em>Proceedings of the 1986 ACM Conference on Lisp
  and Functional Programming</em>, pages 151&ndash;161.

</li><li> [Landin65]
<a name="index-Landin65"></a>
Peter Landin.
A correspondence between Algol 60 and Church's lambda notation: Part I.
<em>Communications of the ACM</em> 8(2):89&ndash;101, February 1965.

</li><li> [MITScheme]
<a name="index-MITScheme"></a>
MIT Department of Electrical Engineering and Computer Science.
Scheme manual, seventh edition.
September 1984.

</li><li> [Naur63]
<a name="index-Naur63"></a>
Peter Naur et al.
Revised report on the algorithmic language Algol 60.
<em>Communications of the ACM</em> 6(1):1&ndash;17, January 1963.

</li><li> [Penfield81]
<a name="index-Penfield81"></a>
Paul Penfield, Jr.
Principal values and branch cuts in complex APL.
In <em>APL '81 Conference Proceedings,</em> pages 248&ndash;256.
ACM SIGAPL, San Francisco, September 1981.
Proceedings published as <em>APL Quote Quad</em> 12(1), ACM, September 1981.

</li><li> [Pitman83]
<a name="index-Pitman83"></a>
Kent M. Pitman.
The revised MacLisp manual (Saturday evening edition).
MIT Laboratory for Computer Science Technical Report 295, May 1983.

</li><li> [Rees82]
<a name="index-Rees82"></a>
Jonathan A. Rees and Norman I. Adams IV.
T: A dialect of Lisp or, lambda: The ultimate software tool.
In <em>Conference Record of the 1982 ACM Symposium on Lisp and
  Functional Programming</em>, pages 114&ndash;122.

</li><li> [Rees84]
<a name="index-Rees84"></a>
Jonathan A. Rees, Norman I. Adams IV, and James R. Meehan.
The T manual, fourth edition.
Yale University Computer Science Department, January 1984.

</li><li> [R3RS]
<a name="index-R3RS"></a>
Jonathan Rees and William Clinger, editors.
The revised^3 report on the algorithmic language Scheme.
In <em>ACM SIGPLAN Notices</em> 21(12), pages 37&ndash;79, December 1986.

</li><li> [Reynolds72]
<a name="index-Reynolds72"></a>
John Reynolds.
Definitional interpreters for higher order programming languages.
In <em>ACM Conference Proceedings</em>, pages 717&ndash;740.
ACM, 
 1972.

</li><li> [Scheme78]
<a name="index-Scheme78"></a>
Guy Lewis Steele Jr. and Gerald Jay Sussman.
The revised report on Scheme, a dialect of Lisp.
MIT Artificial Intelligence Memo 452, January 1978.

</li><li> [Rabbit]
<a name="index-Rabbit"></a>
Guy Lewis Steele Jr.
Rabbit: a compiler for Scheme.
MIT Artificial Intelligence Laboratory Technical Report 474, May 1978.

</li><li> [CLtL]
<a name="index-CLtL"></a>
Guy Lewis Steele Jr.
<em>Common Lisp: The Language, second edition.</em>
Digital Press, Burlington MA, 1990.

</li><li> [Scheme75]
<a name="index-Scheme75"></a>
Gerald Jay Sussman and Guy Lewis Steele Jr.
Scheme: an interpreter for extended lambda calculus.
MIT Artificial Intelligence Memo 349, December 1975.

</li><li> [Stoy77]
<a name="index-Stoy77"></a>
Joseph E. Stoy.
<em>Denotational Semantics: The Scott-Strachey Approach to
  Programming Language Theory.</em>
MIT Press, Cambridge, 1977.

</li><li> [TImanual85]
<a name="index-TImanual85"></a>
Texas Instruments, Inc.
TI Scheme Language Reference Manual.
Preliminary version 1.0, November 1985. 

</li></ul>

       






<a name="Index"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Bibliography" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Bibliography" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Concepts" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Bibliography" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Bibliography" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Top" title="Up section"><img src="button-up.png" border="0" alt="Up: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><img src="button-empty.png" border="0" alt="FastForward: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<a name="Alphabetic-index-of-definitions-of-concepts_002c-keywords_002c-and-procedures"></a>
<h1 class="unnumbered">Alphabetic index of definitions of concepts, keywords, and procedures</h1>



<p>The principal entry for each term, procedure, or keyword is listed
first, separated from the other entries by a semicolon.
</p>
<br>
<br>
<br>
<br>
<br>
<br>

<a name="Concepts"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Index" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Procedures-1" title="Next section in reading order"><img src="button-right.png" border="0" alt="Forward: Procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Index" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Up section"><img src="button-up.png" border="0" alt="Up: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><img src="button-empty.png" border="0" alt="FastForward: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<h2 class="unnumberedsec">Concepts</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Concepts_cp_symbol-1" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-2" class="summary-letter"><b>,</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-3" class="summary-letter"><b>;</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-4" class="summary-letter"><b>=</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-5" class="summary-letter"><b>`</b></a>
 &nbsp; 
<br>
<a href="#Concepts_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_symbol-1">'</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0027-1">'</a></td><td valign="top"><a href="#Literal-expressions">4.1.2 Literal expressions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_symbol-2">,</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002c">,</a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002c_0040">,@</a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_symbol-3">;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003b">;</a></td><td valign="top"><a href="#Whitespace-and-comments">2.2 Whitespace and comments</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_symbol-4">=</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d_003e">=&gt;</a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_symbol-5">`</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0060-1">&lsquo;</a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-backquote">backquote</a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding">binding</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding-construct">binding construct</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bound">bound</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-call">call</a></td><td valign="top"><a href="#Procedure-calls">4.1.3 Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call-by-need">call by need</a></td><td valign="top"><a href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-combination">combination</a></td><td valign="top"><a href="#Procedure-calls">4.1.3 Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comma">comma</a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment">comment</a></td><td valign="top"><a href="#Whitespace-and-comments">2.2 Whitespace and comments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment-1">comment</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-constant">constant</a></td><td valign="top"><a href="#Storage-model">3.4 Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-continuation">continuation</a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-define-1">define</a></td><td valign="top"><a href="#Definitions">5.2 Definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002dsyntax">define-syntax</a></td><td valign="top"><a href="#Syntax-definitions">5.3 Syntax definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-definition">definition</a></td><td valign="top"><a href="#Definitions">5.2 Definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do-1">do</a></td><td valign="top"><a href="#Iteration">4.2.4 Iteration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dotted-pair">dotted pair</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-else">else</a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list">empty list</a></td><td valign="top"><a href="#Disjointness-of-types">3.2 Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-1">empty list</a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-2">empty list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-3">empty list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-4">empty list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-5">empty list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-6">empty list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-equivalence-predicate">equivalence predicate</a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error">error</a></td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">1.3.2 Error situations and unspecified behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-escape-procedure">escape procedure</a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exact">exact</a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exactness">exactness</a></td><td valign="top"><a href="#Exactness">6.2.2 Exactness</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-false">false</a></td><td valign="top"><a href="#Disjointness-of-types">3.2 Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-false-1">false</a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-false-2">false</a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hygienic">hygienic</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier">identifier</a></td><td valign="top"><a href="#Identifiers">2.1 Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier-1">identifier</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier-2">identifier</a></td><td valign="top"><a href="#Symbols">6.3.3 Symbols</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier-3">identifier</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-immutable">immutable</a></td><td valign="top"><a href="#Storage-model">3.4 Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-restriction">implementation restriction</a></td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">1.3.2 Error situations and unspecified behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-restriction-1">implementation restriction</a></td><td valign="top"><a href="#Implementation-restrictions">6.2.3 Implementation restrictions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-improper-list">improper list</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inexact">inexact</a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-initial-environment">initial environment</a></td><td valign="top"><a href="#Standard-procedures">6. Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-definition">internal definition</a></td><td valign="top"><a href="#Internal-definitions">5.2.2 Internal definitions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-K">K</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-keyword">keyword</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-keyword-1">keyword</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-keyword-2">keyword</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lazy-evaluation">lazy evaluation</a></td><td valign="top"><a href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library">library</a></td><td valign="top"><a href="#Primitive_003b-library_003b-and-optional-features">1.3.1 Primitive; library; and optional features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-procedure">library procedure</a></td><td valign="top"><a href="#Standard-procedures">6. Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-location">location</a></td><td valign="top"><a href="#Storage-model">3.4 Storage model</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro">macro</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-keyword">macro keyword</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-transformer">macro transformer</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-use">macro use</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mutable">mutable</a></td><td valign="top"><a href="#Storage-model">3.4 Storage model</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-number">number</a></td><td valign="top"><a href="#Numbers">6.2 Numbers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numerical-types">numerical types</a></td><td valign="top"><a href="#Numerical-types">6.2.1 Numerical types</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-object">object</a></td><td valign="top"><a href="#Semantics">1.1 Semantics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-optional">optional</a></td><td valign="top"><a href="#Primitive_003b-library_003b-and-optional-features">1.3.1 Primitive; library; and optional features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-pair">pair</a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-port">port</a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-predicate">predicate</a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedure-call">procedure call</a></td><td valign="top"><a href="#Procedure-calls">4.1.3 Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-promise">promise</a></td><td valign="top"><a href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-promise-1">promise</a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-proper-tail-recursion">proper tail recursion</a></td><td valign="top"><a href="#Proper-tail-recursion">3.5 Proper tail recursion</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-referentially-transparent">referentially transparent</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region">region</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-1">region</a></td><td valign="top"><a href="#Assignments">4.1.6 Assignments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-2">region</a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-3">region</a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-4">region</a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-5">region</a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-6">region</a></td><td valign="top"><a href="#Iteration">4.2.4 Iteration</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-simplest-rational">simplest rational</a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword">syntactic keyword</a></td><td valign="top"><a href="#Identifiers">2.1 Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword-1">syntactic keyword</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword-2">syntactic keyword</a></td><td valign="top"><a href="#Macros">4.3 Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword-3">syntactic keyword</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax-definition">syntax definition</a></td><td valign="top"><a href="#Syntax-definitions">5.3 Syntax definitions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tail-call">tail call</a></td><td valign="top"><a href="#Proper-tail-recursion">3.5 Proper tail recursion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token">token</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-top-level-environment">top level environment</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-top-level-environment-1">top level environment</a></td><td valign="top"><a href="#Standard-procedures">6. Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true">true</a></td><td valign="top"><a href="#Disjointness-of-types">3.2 Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-1">true</a></td><td valign="top"><a href="#Conditionals">4.1.5 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-2">true</a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-3">true</a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-type">type</a></td><td valign="top"><a href="#Disjointness-of-types">3.2 Disjointness of types</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound">unbound</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound-1">unbound</a></td><td valign="top"><a href="#Variable-references">4.1.1 Variable references</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound-2">unbound</a></td><td valign="top"><a href="#Top-level-definitions">5.2.1 Top level definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unspecified">unspecified</a></td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">1.3.2 Error situations and unspecified behavior</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-indexes">valid indexes</a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-indexes-1">valid indexes</a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable">variable</a></td><td valign="top"><a href="#Identifiers">2.1 Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-1">variable</a></td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-2">variable</a></td><td valign="top"><a href="#Variable-references">4.1.1 Variable references</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-3">variable</a></td><td valign="top"><a href="#Lexical-structure">7.1.1 Lexical structure</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concepts_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Whitespace">Whitespace</a></td><td valign="top"><a href="#Whitespace-and-comments">2.2 Whitespace and comments</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Concepts_cp_symbol-1" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-2" class="summary-letter"><b>,</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-3" class="summary-letter"><b>;</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-4" class="summary-letter"><b>=</b></a>
 &nbsp; 
<a href="#Concepts_cp_symbol-5" class="summary-letter"><b>`</b></a>
 &nbsp; 
<br>
<a href="#Concepts_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Concepts_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<a name="Procedures-1"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Concepts" title="Previous section in reading order"><img src="button-left.png" border="0" alt="Back: Concepts" align="middle" width="32"></a></td>
<td valign="middle" align="left"><img src="button-empty.png" border="0" alt="Forward: Procedures" align="middle" width="32"></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"><a href="#Index" title="Beginning of this chapter or previous chapter"><img src="button-left-left.png" border="0" alt="FastBack: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Up section"><img src="button-up.png" border="0" alt="Up: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
<td valign="middle" align="left"><img src="button-empty.png" border="0" alt="FastForward: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></td>
<td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<h2 class="unnumberedsec">Procedures</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Procedures-1_fn_symbol-1" class="summary-letter"><b> </b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-2" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-3" class="summary-letter"><b>*</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-4" class="summary-letter"><b>+</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-5" class="summary-letter"><b>-</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-6" class="summary-letter"><b>/</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-7" class="summary-letter"><b>&lt;</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-8" class="summary-letter"><b>=</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-9" class="summary-letter"><b>&gt;</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-10" class="summary-letter"><b>`</b></a>
 &nbsp; 
<br>
<a href="#Procedures-1_fn_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-Z" class="summary-letter"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-fn">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-1"> </a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index----------_2026"><code>         &hellip;</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-2">'</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0027"><code><tt>'</tt></code></a></td><td valign="top"><a href="#Literal-expressions">4.1.2 Literal expressions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-3">*</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002a"><code>*</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-4">+</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002b-1"><code>+</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-5">-</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d-1"><code>-</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d-2"><code>-</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d-3"><code>-</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-6">/</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002f"><code>/</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002f-1"><code>/</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002f-2"><code>/</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-7">&lt;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c"><code>&lt;</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003d"><code>&lt;=</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-8">=</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d"><code>=</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-9">&gt;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e"><code>&gt;</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e_003d"><code>&gt;=</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_symbol-10">`</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0060"><code><tt>`</tt></code></a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-abs"><code>abs</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-acos"><code>acos</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-and"><code>and</code></a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-angle"><code>angle</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-append"><code>append</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-apply-1"><code>apply</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-asin"><code>asin</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assoc"><code>assoc</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assq"><code>assq</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assv"><code>assv</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-atan"><code>atan</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-atan-1"><code>atan</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-begin"><code>begin</code></a></td><td valign="top"><a href="#Sequencing">4.2.3 Sequencing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-boolean_003f-1"><code>boolean?</code></a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-caar"><code>caar</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cadr"><code>cadr</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call_002dwith_002dcurrent_002dcontinuation-1"><code>call-with-current-continuation</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call_002dwith_002dinput_002dfile"><code>call-with-input-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call_002dwith_002doutput_002dfile"><code>call-with-output-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call_002dwith_002dvalues-2"><code>call-with-values</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-car"><code>car</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case"><code>case</code></a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdddar"><code>cdddar</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cddddr"><code>cddddr</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdr"><code>cdr</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ceiling"><code>ceiling</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002d_003einteger"><code>char-&gt;integer</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dalphabetic_003f"><code>char-alphabetic?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dci_003c_003d_003f"><code>char-ci&lt;=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dci_003c_003f"><code>char-ci&lt;?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dci_003d_003f"><code>char-ci=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dci_003e_003d_003f"><code>char-ci&gt;=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dci_003e_003f"><code>char-ci&gt;?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002ddowncase"><code>char-downcase</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dlower_002dcase_003f"><code>char-lower-case?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dnumeric_003f"><code>char-numeric?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dready_003f"><code>char-ready?</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dready_003f-1"><code>char-ready?</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dupcase"><code>char-upcase</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dupper_002dcase_003f"><code>char-upper-case?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002dwhitespace_003f"><code>char-whitespace?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003c_003d_003f"><code>char&lt;=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003c_003f"><code>char&lt;?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003d_003f"><code>char=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003e_003d_003f"><code>char&gt;=?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003e_003f"><code>char&gt;?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_003f-1"><code>char?</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-close_002dinput_002dport"><code>close-input-port</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-close_002doutput_002dport"><code>close-output-port</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-complex_003f-1"><code>complex?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cond"><code>cond</code></a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cons"><code>cons</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cos"><code>cos</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-current_002dinput_002dport"><code>current-input-port</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-current_002doutput_002dport"><code>current-output-port</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-delay"><code>delay</code></a></td><td valign="top"><a href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-denominator"><code>denominator</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-display"><code>display</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-display-1"><code>display</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do"><code>do</code></a></td><td valign="top"><a href="#Iteration">4.2.4 Iteration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamic_002dwind-1"><code>dynamic-wind</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-eof_002dobject_003f"><code>eof-object?</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-eq_003f-1"><code>eq?</code></a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-equal_003f"><code>equal?</code></a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-eqv_003f-2"><code>eqv?</code></a></td><td valign="top"><a href="#Equivalence-predicates">6.1 Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-eval-2"><code>eval</code></a></td><td valign="top"><a href="#Eval">6.5 Eval</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-even_003f"><code>even?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exact_002d_003einexact"><code>exact-&gt;inexact</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exact_003f"><code>exact?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exp"><code>exp</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expt"><code>expt</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-floor"><code>floor</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-for_002deach"><code>for-each</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-force-1"><code>force</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-gcd"><code>gcd</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-if"><code>if</code></a></td><td valign="top"><a href="#Conditionals">4.1.5 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-if-1"><code>if</code></a></td><td valign="top"><a href="#Conditionals">4.1.5 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-imag_002dpart"><code>imag-part</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inexact_002d_003eexact-1"><code>inexact-&gt;exact</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inexact_003f"><code>inexact?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-input_002dport_003f"><code>input-port?</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-integer_002d_003echar"><code>integer-&gt;char</code></a></td><td valign="top"><a href="#Characters">6.3.4 Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-integer_003f-1"><code>integer?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interaction_002denvironment"><code>interaction-environment</code></a></td><td valign="top"><a href="#Eval">6.5 Eval</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lambda"><code>lambda</code></a></td><td valign="top"><a href="#Procedures">4.1.4 Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lcm"><code>lcm</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-length-1"><code>length</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-let"><code>let</code></a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-let-1"><code>let</code></a></td><td valign="top"><a href="#Iteration">4.2.4 Iteration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-let_002a"><code>let*</code></a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-let_002dsyntax"><code>let-syntax</code></a></td><td valign="top"><a href="#Binding-constructs-for-syntactic-keywords">4.3.1 Binding constructs for syntactic keywords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letrec"><code>letrec</code></a></td><td valign="top"><a href="#Binding-constructs">4.2.2 Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letrec_002dsyntax"><code>letrec-syntax</code></a></td><td valign="top"><a href="#Binding-constructs-for-syntactic-keywords">4.3.1 Binding constructs for syntactic keywords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list"><code>list</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003estring"><code>list-&gt;string</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003evector"><code>list-&gt;vector</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002dref"><code>list-ref</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002dtail"><code>list-tail</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_003f"><code>list?</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-load"><code>load</code></a></td><td valign="top"><a href="#System-interface">6.6.4 System interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log"><code>log</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-magnitude"><code>magnitude</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dpolar"><code>make-polar</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002drectangular"><code>make-rectangular</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dstring"><code>make-string</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dstring-1"><code>make-string</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dvector-1"><code>make-vector</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dvector-2"><code>make-vector</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-map"><code>map</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-max"><code>max</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-member"><code>member</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memq"><code>memq</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memv"><code>memv</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-min"><code>min</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modulo"><code>modulo</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-negative_003f"><code>negative?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-newline"><code>newline</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-newline-1"><code>newline</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-not"><code>not</code></a></td><td valign="top"><a href="#Booleans">6.3.1 Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-null_002denvironment"><code>null-environment</code></a></td><td valign="top"><a href="#Eval">6.5 Eval</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-null_003f"><code>null?</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number_002d_003estring"><code>number-&gt;string</code></a></td><td valign="top"><a href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number_002d_003estring-1"><code>number-&gt;string</code></a></td><td valign="top"><a href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number_003f-2"><code>number?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numerator"><code>numerator</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-odd_003f"><code>odd?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-open_002dinput_002dfile"><code>open-input-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-open_002doutput_002dfile"><code>open-output-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-or"><code>or</code></a></td><td valign="top"><a href="#Conditional">4.2.1 Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002dport_003f"><code>output-port?</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-pair_003f-1"><code>pair?</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-peek_002dchar"><code>peek-char</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-peek_002dchar-1"><code>peek-char</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positive_003f"><code>positive?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedure_003f-1"><code>procedure?</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-quasiquote"><code>quasiquote</code></a></td><td valign="top"><a href="#Quasiquotation">4.2.6 Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quote"><code>quote</code></a></td><td valign="top"><a href="#Literal-expressions">4.1.2 Literal expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quotient"><code>quotient</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-rational_003f-1"><code>rational?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rationalize"><code>rationalize</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-read-1"><code>read</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-read-2"><code>read</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-read_002dchar"><code>read-char</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-read_002dchar-1"><code>read-char</code></a></td><td valign="top"><a href="#Input">6.6.2 Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-real_002dpart"><code>real-part</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-real_003f-1"><code>real?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-remainder"><code>remainder</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reverse"><code>reverse</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-round"><code>round</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-scheme_002dreport_002denvironment"><code>scheme-report-environment</code></a></td><td valign="top"><a href="#Eval">6.5 Eval</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_0021"><code>set!</code></a></td><td valign="top"><a href="#Assignments">4.1.6 Assignments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dcar_0021"><code>set-car!</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dcdr_0021-1"><code>set-cdr!</code></a></td><td valign="top"><a href="#Pairs-and-lists">6.3.2 Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sin"><code>sin</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sqrt"><code>sqrt</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string"><code>string</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002d_003elist"><code>string-&gt;list</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002d_003enumber"><code>string-&gt;number</code></a></td><td valign="top"><a href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002d_003enumber-1"><code>string-&gt;number</code></a></td><td valign="top"><a href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002d_003esymbol"><code>string-&gt;symbol</code></a></td><td valign="top"><a href="#Symbols">6.3.3 Symbols</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dappend"><code>string-append</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dci_003c_003d_003f"><code>string-ci&lt;=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dci_003c_003f"><code>string-ci&lt;?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dci_003d_003f"><code>string-ci=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dci_003e_003d_003f"><code>string-ci&gt;=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dci_003e_003f"><code>string-ci&gt;?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dcopy"><code>string-copy</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dfill_0021"><code>string-fill!</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dlength-1"><code>string-length</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dref"><code>string-ref</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002dset_0021-1"><code>string-set!</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003c_003d_003f"><code>string&lt;=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003c_003f"><code>string&lt;?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003d_003f"><code>string=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003e_003d_003f"><code>string&gt;=?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003e_003f"><code>string&gt;?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_003f-1"><code>string?</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-substring"><code>substring</code></a></td><td valign="top"><a href="#Strings">6.3.5 Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-symbol_002d_003estring-1"><code>symbol-&gt;string</code></a></td><td valign="top"><a href="#Symbols">6.3.3 Symbols</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-symbol_003f-1"><code>symbol?</code></a></td><td valign="top"><a href="#Symbols">6.3.3 Symbols</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002drules"><code>syntax-rules</code></a></td><td valign="top"><a href="#Pattern-language">4.3.2 Pattern language</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tan"><code>tan</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transcript_002doff"><code>transcript-off</code></a></td><td valign="top"><a href="#System-interface">6.6.4 System interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transcript_002don"><code>transcript-on</code></a></td><td valign="top"><a href="#System-interface">6.6.4 System interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-truncate"><code>truncate</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-values-1"><code>values</code></a></td><td valign="top"><a href="#Control-features">6.4 Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector"><code>vector</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002d_003elist"><code>vector-&gt;list</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002dfill_0021"><code>vector-fill!</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002dlength-1"><code>vector-length</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002dref"><code>vector-ref</code></a></td><td valign="top"><a href="#Entry-format">1.3.3 Entry format</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002dref-1"><code>vector-ref</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_002dset_0021"><code>vector-set!</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vector_003f-1"><code>vector?</code></a></td><td valign="top"><a href="#Vectors">6.3.6 Vectors</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-with_002dinput_002dfrom_002dfile"><code>with-input-from-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-with_002doutput_002dto_002dfile"><code>with-output-to-file</code></a></td><td valign="top"><a href="#Ports">6.6.1 Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write-1"><code>write</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write-2"><code>write</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dchar"><code>write-char</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dchar-1"><code>write-char</code></a></td><td valign="top"><a href="#Output">6.6.3 Output</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Procedures-1_fn_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-zero_003f-1"><code>zero?</code></a></td><td valign="top"><a href="#Numerical-operations">6.2.5 Numerical operations</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Procedures-1_fn_symbol-1" class="summary-letter"><b> </b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-2" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-3" class="summary-letter"><b>*</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-4" class="summary-letter"><b>+</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-5" class="summary-letter"><b>-</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-6" class="summary-letter"><b>/</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-7" class="summary-letter"><b>&lt;</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-8" class="summary-letter"><b>=</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-9" class="summary-letter"><b>&gt;</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_symbol-10" class="summary-letter"><b>`</b></a>
 &nbsp; 
<br>
<a href="#Procedures-1_fn_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#Procedures-1_fn_letter-Z" class="summary-letter"><b>Z</b></a>
 &nbsp; 
</td></tr></table>



<a name="SEC_Contents"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Summary" href="#Summary">Summary</a></li>
  <li><a name="toc-Contents" href="#Contents">Contents</a></li>
  <li><a name="toc-Introduction-1" href="#Introduction">Introduction</a>
  <ul class="toc">
    <li><a name="toc-Background-1" href="#Background">Background</a></li>
    <li><a name="toc-Acknowledgements-1" href="#Acknowledgements">Acknowledgements</a></li>
  </ul></li>
  <li><a name="toc-Overview-of-Scheme-1" href="#Overview-of-Scheme">1. Overview of Scheme</a>
  <ul class="toc">
    <li><a name="toc-Semantics-1" href="#Semantics">1.1 Semantics</a></li>
    <li><a name="toc-Syntax-1" href="#Syntax">1.2 Syntax</a></li>
    <li><a name="toc-Notation-and-terminology-1" href="#Notation-and-terminology">1.3 Notation and terminology</a>
    <ul class="toc">
      <li><a name="toc-Primitive_003b-library_003b-and-optional-features-1" href="#Primitive_003b-library_003b-and-optional-features">1.3.1 Primitive; library; and optional features</a></li>
      <li><a name="toc-Error-situations-and-unspecified-behavior-1" href="#Error-situations-and-unspecified-behavior">1.3.2 Error situations and unspecified behavior</a></li>
      <li><a name="toc-Entry-format-1" href="#Entry-format">1.3.3 Entry format</a></li>
      <li><a name="toc-Evaluation-examples-1" href="#Evaluation-examples">1.3.4 Evaluation examples</a></li>
      <li><a name="toc-Naming-conventions-1" href="#Naming-conventions">1.3.5 Naming conventions</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Lexical-conventions-1" href="#Lexical-conventions">2. Lexical conventions</a>
  <ul class="toc">
    <li><a name="toc-Identifiers-1" href="#Identifiers">2.1 Identifiers</a></li>
    <li><a name="toc-Whitespace-and-comments-1" href="#Whitespace-and-comments">2.2 Whitespace and comments</a></li>
    <li><a name="toc-Other-notations-1" href="#Other-notations">2.3 Other notations</a></li>
  </ul></li>
  <li><a name="toc-Basic-concepts-1" href="#Basic-concepts">3. Basic concepts</a>
  <ul class="toc">
    <li><a name="toc-Variables_003b-syntactic-keywords_003b-and-regions-1" href="#Variables_003b-syntactic-keywords_003b-and-regions">3.1 Variables; syntactic keywords; and regions</a></li>
    <li><a name="toc-Disjointness-of-types-1" href="#Disjointness-of-types">3.2 Disjointness of types</a></li>
    <li><a name="toc-External-representations-2" href="#External-representations">3.3 External representations</a></li>
    <li><a name="toc-Storage-model-1" href="#Storage-model">3.4 Storage model</a></li>
    <li><a name="toc-Proper-tail-recursion-1" href="#Proper-tail-recursion">3.5 Proper tail recursion</a></li>
  </ul></li>
  <li><a name="toc-Expressions-2" href="#Expressions">4. Expressions</a>
  <ul class="toc">
    <li><a name="toc-Primitive-expression-types-1" href="#Primitive-expression-types">4.1 Primitive expression types</a>
    <ul class="toc">
      <li><a name="toc-Variable-references-1" href="#Variable-references">4.1.1 Variable references</a></li>
      <li><a name="toc-Literal-expressions-1" href="#Literal-expressions">4.1.2 Literal expressions</a></li>
      <li><a name="toc-Procedure-calls-1" href="#Procedure-calls">4.1.3 Procedure calls</a></li>
      <li><a name="toc-Procedures-2" href="#Procedures">4.1.4 Procedures</a></li>
      <li><a name="toc-Conditionals-1" href="#Conditionals">4.1.5 Conditionals</a></li>
      <li><a name="toc-Assignments-1" href="#Assignments">4.1.6 Assignments</a></li>
    </ul></li>
    <li><a name="toc-Derived-expression-types-1" href="#Derived-expression-types">4.2 Derived expression types</a>
    <ul class="toc">
      <li><a name="toc-Conditionals-2" href="#Conditional">4.2.1 Conditionals</a></li>
      <li><a name="toc-Binding-constructs-1" href="#Binding-constructs">4.2.2 Binding constructs</a></li>
      <li><a name="toc-Sequencing-1" href="#Sequencing">4.2.3 Sequencing</a></li>
      <li><a name="toc-Iteration-1" href="#Iteration">4.2.4 Iteration</a></li>
      <li><a name="toc-Delayed-evaluation-1" href="#Delayed-evaluation">4.2.5 Delayed evaluation</a></li>
      <li><a name="toc-Quasiquotation-1" href="#Quasiquotation">4.2.6 Quasiquotation</a></li>
    </ul></li>
    <li><a name="toc-Macros-1" href="#Macros">4.3 Macros</a>
    <ul class="toc">
      <li><a name="toc-Binding-constructs-for-syntactic-keywords-1" href="#Binding-constructs-for-syntactic-keywords">4.3.1 Binding constructs for syntactic keywords</a></li>
      <li><a name="toc-Pattern-language-1" href="#Pattern-language">4.3.2 Pattern language</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Program-structure-1" href="#Program-structure">5. Program structure</a>
  <ul class="toc">
    <li><a name="toc-Programs-1" href="#Programs">5.1 Programs</a></li>
    <li><a name="toc-Definitions-1" href="#Definitions">5.2 Definitions</a>
    <ul class="toc">
      <li><a name="toc-Top-level-definitions-1" href="#Top-level-definitions">5.2.1 Top level definitions</a></li>
      <li><a name="toc-Internal-definitions-1" href="#Internal-definitions">5.2.2 Internal definitions</a></li>
    </ul></li>
    <li><a name="toc-Syntax-definitions-1" href="#Syntax-definitions">5.3 Syntax definitions</a></li>
  </ul></li>
  <li><a name="toc-Standard-procedures-1" href="#Standard-procedures">6. Standard procedures</a>
  <ul class="toc">
    <li><a name="toc-Equivalence-predicates-1" href="#Equivalence-predicates">6.1 Equivalence predicates</a></li>
    <li><a name="toc-Numbers-1" href="#Numbers">6.2 Numbers</a>
    <ul class="toc">
      <li><a name="toc-Numerical-types-1" href="#Numerical-types">6.2.1 Numerical types</a></li>
      <li><a name="toc-Exactness-1" href="#Exactness">6.2.2 Exactness</a></li>
      <li><a name="toc-Implementation-restrictions-1" href="#Implementation-restrictions">6.2.3 Implementation restrictions</a></li>
      <li><a name="toc-Syntax-of-numerical-constants-1" href="#Syntax-of-numerical-constants">6.2.4 Syntax of numerical constants</a></li>
      <li><a name="toc-Numerical-operations-1" href="#Numerical-operations">6.2.5 Numerical operations</a></li>
      <li><a name="toc-Numerical-input-and-output-1" href="#Numerical-input-and-output">6.2.6 Numerical input and output</a></li>
    </ul></li>
    <li><a name="toc-Other-data-types-1" href="#Other-data-types">6.3 Other data types</a>
    <ul class="toc">
      <li><a name="toc-Booleans-1" href="#Booleans">6.3.1 Booleans</a></li>
      <li><a name="toc-Pairs-and-lists-1" href="#Pairs-and-lists">6.3.2 Pairs and lists</a></li>
      <li><a name="toc-Symbols-1" href="#Symbols">6.3.3 Symbols</a></li>
      <li><a name="toc-Characters-1" href="#Characters">6.3.4 Characters</a></li>
      <li><a name="toc-Strings-1" href="#Strings">6.3.5 Strings</a></li>
      <li><a name="toc-Vectors-1" href="#Vectors">6.3.6 Vectors</a></li>
    </ul></li>
    <li><a name="toc-Control-features-1" href="#Control-features">6.4 Control features</a></li>
    <li><a name="toc-Eval-1" href="#Eval">6.5 Eval</a></li>
    <li><a name="toc-Input-and-output-1" href="#Input-and-output">6.6 Input and output</a>
    <ul class="toc">
      <li><a name="toc-Ports-1" href="#Ports">6.6.1 Ports</a></li>
      <li><a name="toc-Input-1" href="#Input">6.6.2 Input</a></li>
      <li><a name="toc-Output-1" href="#Output">6.6.3 Output</a></li>
      <li><a name="toc-System-interface-1" href="#System-interface">6.6.4 System interface</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Formal-syntax-and-semantics-1" href="#Formal-syntax-and-semantics">7. Formal syntax and semantics</a>
  <ul class="toc">
    <li><a name="toc-Formal-syntax-1" href="#Formal-syntax">7.1 Formal syntax</a>
    <ul class="toc">
      <li><a name="toc-Lexical-structure-1" href="#Lexical-structure">7.1.1 Lexical structure</a></li>
      <li><a name="toc-External-representations-1" href="#External-representation">7.1.2 External representations</a></li>
      <li><a name="toc-Expressions-1" href="#Expression">7.1.3 Expressions</a></li>
      <li><a name="toc-Quasiquotations-1" href="#Quasiquotations">7.1.4 Quasiquotations</a></li>
      <li><a name="toc-Transformers-1" href="#Transformers">7.1.5 Transformers</a></li>
      <li><a name="toc-Programs-and-definitions-1" href="#Programs-and-definitions">7.1.6 Programs and definitions</a></li>
    </ul></li>
    <li><a name="toc-Formal-semantics-1" href="#Formal-semantics">7.2 Formal semantics</a></li>
    <li><a name="toc-Derived-expression-types-2" href="#Derived-expression-type">7.3 Derived expression types</a></li>
  </ul></li>
  <li><a name="toc-Notes-1" href="#Notes">Notes</a>
  <ul class="toc">
    <li><a name="toc-Language-changes-1" href="#Language-changes">Language changes</a></li>
  </ul></li>
  <li><a name="toc-Additional-material-1" href="#Additional-material">Additional material</a></li>
  <li><a name="toc-Example-1" href="#Example">Example</a></li>
  <li><a name="toc-Bibliography-1" href="#Bibliography">Bibliography</a></li>
  <li><a name="toc-Alphabetic-index-of-definitions-of-concepts_002c-keywords_002c-and-procedures" href="#Index">Alphabetic index of definitions of concepts, keywords, and procedures</a>
  <ul class="toc">
    <li><a name="toc-Concepts" href="#Concepts">Concepts</a></li>
    <li><a name="toc-Procedures-1" href="#Procedures-1">Procedures</a></li>
  </ul>
</li>
</ul>
</div>
<a name="SEC_About"></a><hr size="1"><br/><br/><br/>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left"><a href="#Top" title="Cover (top) of document"><img src="button-up-arrow.png" border="0" alt="Top: Revised(5) Report on the Algorithmic Language Scheme" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#SEC_Contents" title="Table of contents"><img src="button-compass.png" border="0" alt="Contents: Table of Contents" align="middle" width="32"></a></td>
<td valign="middle" align="left"><a href="#Index" title="Index"><img src="button-abc.png" border="0" alt="Index: Alphabetic index of definitions of concepts, keywords, and procedures" align="middle" width="32"></a></td>
</tr></table>

</body>
</html>
